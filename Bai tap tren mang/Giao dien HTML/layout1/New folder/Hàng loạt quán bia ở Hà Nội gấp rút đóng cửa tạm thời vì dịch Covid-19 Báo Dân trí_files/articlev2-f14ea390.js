(window.WssBaomoiWebJsonp=window.WssBaomoiWebJsonp||[]).push([[8],{136:function(n,e,t){t(34),t(378),t(168),t(150),t(163),t(153),t(170),t(379),t(171),t(705),t(707),t(708),t(157),t(381),t(175),t(713),t(382),t(714),t(3).run(["externalScript",function(n){n("https://anymind360.com/js/4598/ats.js").then(function(){console.log("ats loaded")})}])},150:function(n,e,t){t(151);var i=t(155),o=["$http","$q","$compile","$interpolate","$filter","video","config","videoAds","$rootScope",function(f,h,n,e,m,v,g,_,b){var y=0;return{restrict:"AE",link:function(n,a,e){y++;var l=h.defer();function o(n){var e=1==g.IsMobile,t={cuetext:"Advertisement",preloadAds:!0,rules:{startOnSeek:"pre",timeBetweenAds:0},schedule:[{offset:6,skipoffset:5,tag:[_.getAds(e)],type:"linear"}],client:"vast",vpaidmode:"insecure"},e="undefined"!=$(a).attr("play-manual");n.autostart||1!=y||0!=g.IsArticlePage||e||(n.autostart=!0,n.mute=!0);var s={id:n.id,poster:n.poster,source:n.source,autostart:!!n.autostart,mute:n.mute,duration:n.duration,controls:n.controls,repeat:n.repeat,disableDuration:n.disableDuration};n.isAllowAds=n.isAllowAds&&!g.IsAmp,n.isAllowAds&&(s.advertising=t),v.driver.render(s).then(function(n){var e=n.replace(a[0]),i=e.getComponent().el;s.autostart&&$(i).addClass("auto-play");var n=$(e.getComponent().el).find("video")[0],o=e.getComponent().state.player,r=h.defer();o.on("ready",function(){var n=s.duration||"0",e=$('<div class="video-item__duration">'.concat(n,"</div>"));s.disableDuration||"0"===n||$(i).append(e);var t=!1;o.on("play",function(){e.hide(),t=!1;try{window.stopReload()}catch(n){}}),s.source&&-1<s.source.indexOf("youtube")&&o.on("timeupdate",function(){var n=o.currentTime(),e=o.duration();!o.paused()&&0<e&&e-1<n&&!t&&(t=!0,o.pause(),o.exitFullscreen(),o.hasStarted(!1),o.currentTime(0))}),r.promise.then(function(){try{o.play.apply(o,[])}catch(n){}})}),l.resolve({el:n,cb:function(){e.getComponent().state.playEvent.resolve()}})}).catch(function(n){console.log("error init video",n)})}var t,i,r,s,c,u=$(a).attr("x-data-video-id")||$(a).attr("videoid")||$(a).attr("video-id"),d=void 0!==$(a).attr("autostart"),p=void 0!==$(a).attr("you-tube");void 0!==$(a).attr("play-on-visible")&&l.promise.then(function(e){var n=e.el,t=new IntersectionObserver(function(n){n.forEach(function(n){0<n.intersectionRatio&&(n=n.target,e.cb(),t.unobserve(n))})});t.observe(n)}),!u||p?(t=$(a).attr("poster"),i=$(a).attr("data-src"),r=void 0!==$(a).attr("mute"),s=void 0===$(a).attr("no-controls"),p=void 0!==$(a).attr("repeat"),o({id:0,poster:t||"",source:i||"",isAllowAds:!!$(a).attr("data-ads"),autostart:d,mute:r,controls:s,repeat:p})):(c=g.WebApi+"/video-info/0/"+u,(window.cachedVideo?h.resolve({data:{source:window.cachedVideo}}):f.get(c)).then(function(n){if(!(n&&n.data&&n.data.source))return console.log("video not exist "+c),void $(a).remove();(n=n||{}).data=n.data||{},n.data.source=n.data.source||{};var e=g.ImageDomain+n.data.source.Avatar||"",t=g.VideoDomain+n.data.source.StreamLocalPath||"",i=n.data.source.AllowAd;2==n.data.source.ZoneId&&(i=!1),b.$broadcast("video-info",((n||{}).data||{}).source||{}),o({id:u,poster:e,autostart:d,duration:m("getVideoTime")((((n||{}).data||{}).source||{}).DurationInSeconds||0),disableDuration:""!=($(a).attr("disable-duration")||""),source:t,isAllowAds:i})}))}}}];t(3).filter("getVideoTime",function(){return function(n){if(0==n)return"";var e=Math.floor(n/3600),t=Math.floor((n-3600*e)/60),i=n-3600*e-60*t,n=[];return 0<e&&n.push(e),n.push(t),n.push(i),n.map(function(n){return n.toString().padStart(2,"0")}).join(":")}}).provider("videoAds",[function(){var t={true:"https://sspapi.admicro.vn/ssp_request/video?u=dantri.com.vn%2F&z=2013289&p=1&w=650&h=300&l=-1&loc=-1&tags=1,2,3,4,5&adstype=2&vtype=1&bannerlimit=5&bannerid=-1",false:"https://sspapi.admicro.vn/ssp_request/video?u=dantri.com.vn%2F&z=2013288&p=1&w=650&h=300&l=-1&loc=-1&tags=1,2,3,4,5&adstype=2&vtype=1&bannerlimit=5&bannerid=-1",getAds:function(n){var e=t[n],n=i.parse(e,!0),e=i.parse(location.href);return delete e.hash,delete e.search,n.query.u=e.format().toString().replace(/^https?:\/\//i,""),delete n.search,n.format().toString()}};this.$get=function(){return t},this.setProvider=function(n){t=n}}]).factory("video",["initPlayer",function(e){return{driver:{render:function(n){return e().then(function(){return bm.vdj.render(n)})}}}}]).factory("audioAds",[function(){var r=this;return{looper:!1,playEnd:!1,audioAdsPlayer:!1,initAudioAds:function(){clearInterval(r.looper);var i=localStorage.getItem("audioAdsCounter"),o=(i|=0)&&i%5!=0;r.audioAdsPlayer&&(r.audioAdsPlayer.pause(),r.audioAdsPlayer.currentTime=0),r.looper=setInterval(function(){var n=$(".dt-audio .dta-main .aud-bg").width(),e=$(".dt-audio .seek").attr("style").replace("width:","").replace("px","").replace(";","").trim();if(!r.playEnd&&.99*n<e&&(r.playEnd=!0,i++,localStorage.setItem("audioAdsCounter",i)),"100%"===e&&r.playEnd&&(clearInterval(r.looper),!o)){r.audioAdsPlayer||(r.audioAdsPlayer=document.createElement("AUDIO"));var e=$(".speech-section-initial-description").text(),t=!1;switch(console.log(e),e){case"Phía Bắc":t=$(".dt-audio .spico").hasClass("speech-male")?"https://acdn.dantri.com.vn/intro_1.mp3":"https://acdn.dantri.com.vn/intro_2.mp3";break;case"Phía Nam":t="https://acdn.dantri.com.vn/intro_3.mp3"}t&&(console.log(t),r.audioAdsPlayer.src=t,r.audioAdsPlayer.play())}},500)}}}]).directive("dtAudio",["$q","$http","config","initPlayer","audioAds",function(o,a,l,c,u){return{restrict:"AE",scope:{},link:function(n,r,e){var s=c(),t=o.defer(),i=e.dtAudio;a.get(l.WebApi+"/audio-info/"+i).then(function(n){t.resolve(n.data.source)}),t.promise.then(function(t){return o(function(e,n){a.get("".concat(l.WebApi,"/audio/next10/").concat(i)).then(function(n){e({audio:t,next:n.data.map(function(n){return"".concat(l.AudioDomain,"/??").concat(n.value)})})},function(){return e({audio:t,next:null})})})}).then(function(n){var t,e,i,o=n.audio;o.TitleAudio&&(e=o.BodyAudio.map(function(n,e){n=n.Value.split("body");return t=[n[0]+"title_"+(e+1)+".mp3",n[0]+"sapo_"+(e+1)+".mp3",n[0]+"body_"+(e+1)+".mp3"].join(),l.AudioDomain+"/??"+t}),i={source:[o.TitleAudio[l.voice].Value,o.BodyAudio[l.voice].Value].map(function(n){return l.AudioDomain+n.replace(/^\/+/,"/")}),voices:{list:e,next:n.next}},s.then(function(){console.log(i),bm.audio.render(i).then(function(n){n.replace(r[0]),$(document).on("click",".dt-audio .spmn li",u.initAudioAds);n=$(".dt-audio>.dta-main a:eq(0)");n.length&&n.on("click",function(){try{window.stopReload(),u.initAudioAds()}catch(n){console.error(n)}})})}))})}}}]).directive("videoId",o).directive("dataVideoId",o).directive("videoGroup",["$q","$rootScope","$compile","config",function(o,r,s,a){return{restrict:"AE",scope:{},controller:["$scope",function(n){var t=this,e=o.defer(),i=0;e.promise.then(function(){},function(){},function(o){var n,e;o.vid!=i&&(i=o.vid,n=$(".vdjbm"),t.elm.promise.then(function(i){function n(n,e){var t=$(i).find("[data-v-".concat(n,"]"));0<t.length&&(e?e($(t[0]),o[n]):t.text(o[n]||""))}n("title"),n("summary"),n("catname"),n("catlink",function(n,e){n.attr("href",e)}),n("read-more",function(n,e){"0"!=(e=e||"0")?(e="".concat(a.WebDomain).concat(e),n.attr("href",e),n.show()):n.hide()})}),0<(e=n.find("video")).length&&videojs(e[0]).reset(),n.attr("x-data-video-id",o.vid).attr("autostart",!0).attr("disable-duration",!0),s(n)(r.$new()))}),this.elm=o.defer(),this.play=function(n){e.notify(n)}}],link:function(n,e,t,i){i.elm.resolve(e)}}}]).directive("videoPlayable",[function(){return{restrict:"AE",require:"^videoGroup",scope:{},link:function(n,e,t,i){$(e).on("click",function(){return i.play({vid:t.videoPlayable,disableDuration:!0,title:t.title,summary:t.summary,catname:t.catname,catlink:t.catlink,"read-more":t.readMore}),!1})}}}]).config(["videoAdsProvider",function(n){}]),n.exports={}},151:function(n,e,t){t(3).factory("initPlayer",["config",function(n){return function(){return t.e(15).then(t.t.bind(null,174,7))}}])},157:function(n,e,t){function l(n){if(n.attr("is-floating-video")){if("hiding"===n.attr("is-floating-video"))return;n.attr("is-floating-video","hiding"),setTimeout(function(){n.css({position:n.attr("last-position")}),n.removeAttr("is-floating-video"),n.removeClass("floating-video")},100)}}function i(n){$(n).find(".floating-video").addClass("protected"),$(".floating-video").not(".protected").removeClass("floating-video").removeAttr("style"),$(n).find(".floating-video").removeClass("protected")}t(158),$(window).on("scroll",function(){var a;a=1<$(".vdjbm").length,$(".vdjbm").each(function(){var e=$(this).find(">div:first-child");if(a&&$(".articlev2").length){if(!e.find(".vjs-playing").length)return void(e.hasClass("floating-video")&&(e.removeClass("floating-video"),e.css({position:e.attr("last-position")})))}else if(!e.find(".vjs-playing").length&&!e.hasClass("floating-video"))return;var n=$(window).height(),t=$(window).scrollTop(),i=e.offset().top,o=e.attr("position"),r=(r=e.attr("videoHeight"))?parseInt(r):parseInt(e.height());e.attr("videoHeight",r),o=o?parseInt(o):i+r,e.attr("position",o);var s=(s=e.attr("position-top"))?parseInt(s):i-n;e.attr("position-top",s),e.parent().css("height",r),e.find(".close-button").length||(e.prepend("<div class='close-button'></div>"),e.find(".close-button").click(function(){l(e);var n=e.find(".video-js").attr("id");videojs(n).ready(function(){myPlayer=this,myPlayer.pause()})}));e.find(".close-button");r=e.css("position");e.attr("last-position")||e.attr("last-position",r),o<=t||t<s?e.attr("is-floating-video")||(e.attr("is-floating-video",!0),e.addClass("floating-video").css({position:"fixed"})):l(e)})}),$(document).ready(function(){$(document).on("click",".vdjbm.auto-play",function(){i($(this))}),$(".articlev2 .video,.e-magazine .video").on("click",function(){i($(this))})})},158:function(n,e,t){},159:function(n,e,t){},168:function(n,e,t){var o=t(169);n.exports=t(3).directive("topHeightContainer",["$q","$rootScope",function(n,i){return{restrict:"AE",scope:{},controller:function(){var t=new o.BehaviorSubject(0),e=n.defer();e.promise.then(function(n){i.$watch(function(){return $(n).height()},function(n){t.next(n)})}),this.addLeft=function(n){e.resolve(n)},this.addRight=function(e){$(e).addClass("v-scroll"),t.subscribe({next:function(n){0<n&&$(e).css({height:"".concat(n,"px"),"max-height":"".concat(n,"px")})}})}},link:function(n,e,t,i){}}}]).directive("topHeight",["$q",function(n){return{require:"^topHeightContainer",link:function(n,e,t,i){"left"==t.topHeight?i.addLeft(e):i.addRight(e)}}}])},169:function(t,i,n){!function(uu){function du(n){return(du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var n,e;n=this,e=function(n){function e(n,e){function t(){this.constructor=n}Rn(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}function s(n){return"function"==typeof n}function r(n){setTimeout(function(){throw n},0)}function a(n){return null!==n&&"object"===du(n)}function l(n){return n.reduce(function(n,e){return n.concat(e instanceof Vn?e.errors:e)},[])}function c(n){for(;n;){var e=n.destination,t=n.isStopped;if(n.closed||t)return;n=e&&e instanceof qn?e:null}return 1}function o(){}function t(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return i(n)}function i(e){return e?1===e.length?e[0]:function(n){return e.reduce(function(n,e){return e(n)},n)}:o}function u(n){if(!(n=n||(Bn.Promise||Promise)))throw Error("no Promise impl found");return n}function d(){return function(n){return n.lift(new ie(n))}}function p(n){return n?(e=n,new Gn(function(n){return e.schedule(function(){return n.complete()})})):Ue;var e}function f(n){return n&&"function"==typeof n.schedule}function h(i,o){return new Gn(function(n){var e=new Wn,t=0;return e.add(o.schedule(function(){t===i.length?n.complete():(n.next(i[t++]),n.closed||e.add(this.schedule()))})),e})}function m(n,e){return e?h(n,e):new Gn(Ve(n))}function v(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return f(e=n[n.length-1])?(n.pop(),h(n,e)):m(n)}function g(e,t){return new Gn(t?function(n){return t.schedule(_,0,{error:e,subscriber:n})}:function(n){return n.error(e)})}function _(n){n.subscriber.error(n.error)}function b(n){return n in Tt&&(delete Tt[n],!0)}function y(n){return n}function w(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new $t(e,t))}}function x(n){var t=this,e=n.args,i=n.subscriber,o=(n=n.params).callbackFunc,r=n.context,s=n.scheduler,a=n.subject;if(!a){a=n.subject=new xt;try{o.apply(r,e.concat([function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];t.add(s.schedule(S,0,{value:n.length<=1?n[0]:n,subject:a}))}]))}catch(n){a.error(n)}}this.add(a.subscribe(i))}function S(n){var e=n.subject;e.next(n.value),e.complete()}function I(n){var t=this,e=n.params,i=n.subscriber;n=n.context;var o=e.callbackFunc,r=e.args,s=e.scheduler,a=e.subject;if(!a){a=e.subject=new xt;try{o.apply(n,r.concat([function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];(e=n.shift())?t.add(s.schedule(C,0,{err:e,subject:a})):t.add(s.schedule(T,0,{value:n.length<=1?n[0]:n,subject:a}))}]))}catch(n){this.add(s.schedule(C,0,{err:n,subject:a}))}}this.add(a.subscribe(i))}function T(n){var e=n.subject;e.next(n.value),e.complete()}function C(n){n.subject.error(n.err)}function P(n){return n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}function E(n,e,t,i,o){if(!(o=void 0===o?new jt(n,t,i):o).closed)return e instanceof Gn?e.subscribe(o):To(e)(o)}function k(n,e){if(null!=n){if(n&&"function"==typeof n[Kn])return r=n,s=e,new Gn(function(e){var t=new Wn;return t.add(s.schedule(function(){var n=r[Kn]();t.add(n.subscribe({next:function(n){t.add(s.schedule(function(){return e.next(n)}))},error:function(n){t.add(s.schedule(function(){return e.error(n)}))},complete:function(){t.add(s.schedule(function(){return e.complete()}))}}))})),t});if(P(n))return i=n,o=e,new Gn(function(e){var t=new Wn;return t.add(o.schedule(function(){return i.then(function(n){t.add(o.schedule(function(){e.next(n),t.add(o.schedule(function(){return e.complete()}))}))},function(n){t.add(o.schedule(function(){return e.error(n)}))})})),t});if(Io(n))return h(n,e);if(n&&"function"==typeof n[So]||"string"==typeof n)return function(e,t){if(!e)throw Error("Iterable cannot be null");return new Gn(function(i){var o,n=new Wn;return n.add(function(){o&&"function"==typeof o.return&&o.return()}),n.add(t.schedule(function(){o=e[So](),n.add(t.schedule(function(){if(!i.closed){try{var n=o.next(),e=n.value,t=n.done}catch(n){return void i.error(n)}t?i.complete():(i.next(e),this.schedule())}}))})),n})}(n,e)}var i,o,r,s;throw new TypeError((null!==n&&du(n)||n)+" is not observable")}function O(n,e){return e?k(n,e):n instanceof Gn?n:new Gn(To(n))}function D(e,o,t){return void 0===t&&(t=Number.POSITIVE_INFINITY),"function"==typeof o?function(n){return n.pipe(D(function(t,i){return O(e(t,i)).pipe(w(function(n,e){return o(t,n,i,e)}))},t))}:("number"==typeof o&&(t=o),function(n){return n.lift(new ko(e,t))})}function A(n){return D(y,n=void 0===n?Number.POSITIVE_INFINITY:n)}function N(){return A(1)}function M(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return N()(v.apply(void 0,n))}function L(t){return new Gn(function(e){var n;try{n=t()}catch(n){return void e.error(n)}return(n?O(n):p()).subscribe(e)})}function z(l,c){return new Gn(function(i){var o=l.length;if(0===o)i.complete();else for(var r=Array(o),s=0,a=0,n=0;n<o;n++)!function(e){var n=O(l[e]),t=!1;i.add(n.subscribe({next:function(n){t||(t=!0,a++),r[e]=n},error:function(n){return i.error(n)},complete:function(){++s!==o&&t||(a===o&&i.next(c?c.reduce(function(n,e,t){return n[e]=r[t],n},{}):r),i.complete())}}))}(n)})}function F(n){var e,t=n.subscriber,i=n.condition;if(!t.closed){if(n.needIterate)try{n.state=n.iterate(n.state)}catch(n){return void t.error(n)}else n.needIterate=!0;if(i){var o=void 0;try{o=i(n.state)}catch(n){return void t.error(n)}if(!o)return void t.complete();if(t.closed)return}try{e=n.resultSelector(n.state)}catch(n){return void t.error(n)}if(!t.closed&&(t.next(e),!t.closed))return this.schedule(n)}}function $(n){return!Un(n)&&0<=n-parseFloat(n)+1}function R(n){var e=n.subscriber,t=n.counter;n=n.period,e.next(t),this.schedule({subscriber:e,counter:t+1,period:n},n)}function j(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return f(i)?(t=n.pop(),1<n.length&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof Gn?n[0]:A(e)(m(n,t))}function Z(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(0===n.length)return Ue;var t=n[0],i=n.slice(1);return 1===n.length&&Un(t)?Z.apply(void 0,t):new Gn(function(e){function n(){return e.add(Z.apply(void 0,i).subscribe(e))}return O(t).subscribe({next:function(n){e.next(n)},error:n,complete:n})})}function B(n){var e,t=n.keys,i=n.index,o=n.subscriber,r=n.subscription;n=n.obj,o.closed||(i<t.length?(e=t[i],o.next([e,n[e]]),r.add(this.schedule({keys:t,index:i+1,subscriber:o,subscription:r,obj:n}))):o.complete())}function H(n,e){function t(){return!t.pred.apply(t.thisArg,arguments)}return t.pred=n,t.thisArg=e,t}function U(e,t){return function(n){return n.lift(new Ao(e,t))}}function V(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(1===n.length){if(!Un(n[0]))return n[0];n=n[0]}return m(n,void 0).lift(new Mo)}function W(n){var e=n.start,t=n.index,i=n.subscriber;t>=n.count?i.complete():(i.next(e),i.closed||(n.index=t+1,n.start=e+1,this.schedule(n)))}function Y(t,n,i){void 0===t&&(t=0);var o=-1;return $(n)?o=Number(n)<1?1:Number(n):f(n)&&(i=n),f(i)||(i=Ot),new Gn(function(n){var e=$(t)?t:+t-i.now();return i.schedule(q,e,{index:0,period:o,subscriber:n})})}function q(n){var e=n.index,t=n.period,i=n.subscriber;if(i.next(e),!i.closed){if(-1===t)return i.complete();n.index=e+1,this.schedule(n,t)}}function X(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return"function"==typeof(e=n[n.length-1])&&n.pop(),m(n,void 0).lift(new zo(e))}function K(e){return function(n){return n.lift(new Zo(e))}}function G(n){var e=n.subscriber,t=n.context;t&&e.closeContext(t),e.closed||(n.context=e.openContext(),n.context.closeAction=this.schedule(n,n.bufferTimeSpan))}function Q(n){var e=n.bufferCreationInterval,t=n.bufferTimeSpan,i=n.subscriber,o=n.scheduler,r=i.openContext();i.closed||(i.add(r.closeAction=o.schedule(J,t,{subscriber:i,context:r})),this.schedule(n,e))}function J(n){n.subscriber.closeContext(n.context)}function nn(n,e){return D(n,e,1)}function en(n){n.debouncedNext()}function tn(e){return void 0===e&&(e=null),function(n){return n.lift(new cr(e))}}function on(e,t){return function(n){return n.lift(new xr(e,t))}}function rn(e){return void 0===e&&(e=sn),function(n){return n.lift(new Ir(e))}}function sn(){return new zt}function an(e){return function(n){return 0===e?p():n.lift(new Cr(e))}}function ln(e){return function(n){return 0===e?p():n.lift(new Ur(e))}}function cn(e,t){var i=2<=arguments.length?!0:!1;return function(n){return n.lift(new Kr(e,t,i))}}function un(i,e){return 2<=arguments.length?function(n){return t(cn(i,e),ln(1),tn(e))(n)}:function(n){return t(cn(function(n,e,t){return i(n,e,t+1)}),ln(1))(n)}}function dn(i,o){return function(n){var e="function"==typeof i?i:function(){return i};if("function"==typeof o)return n.lift(new ns(e,o));var t=Object.create(n,se);return t.source=n,t.subjectFactory=e,t}}function pn(n){var e=n.period;n.subscriber.notifyNext(),this.schedule(n,e)}function fn(){return new ee}function hn(e,o){return"function"==typeof o?function(n){return n.pipe(hn(function(t,i){return O(e(t,i)).pipe(w(function(n,e){return o(t,n,i,e)}))}))}:function(n){return n.lift(new As(e))}}function mn(n){n.subscriber.clearThrottle()}function vn(i,o,r){return void 0===r&&(r=Ot),function(n){var e=i instanceof Date&&!isNaN(+i),t=e?+i-r.now():Math.abs(i);return n.lift(new Ws(t,e,o,r))}}function gn(n,e,t){return 0===t?[e]:(n.push(e),n)}function _n(n){var e=n.subscriber,t=n.windowTimeSpan,i=n.window;i&&e.closeWindow(i),n.window=e.openWindow(),this.schedule(n,t)}function bn(n){var e=n.windowTimeSpan,t=n.subscriber,i=n.scheduler,o=n.windowCreationInterval,r=t.openWindow(),s={action:this,subscription:null};s.subscription=i.schedule(yn,e,{subscriber:t,window:r,context:s}),this.add(s.subscription),this.schedule(n,o)}function yn(n){var e=n.subscriber,t=n.window;(n=n.context)&&n.action&&n.subscription&&n.action.remove(n.subscription),e.closeWindow(t)}function wn(n,e){for(var t=0,i=e.length;t<i;t++)for(var o=e[t],r=Object.getOwnPropertyNames(o.prototype),s=0,a=r.length;s<a;s++){var l=r[s];n.prototype[l]=o.prototype[l]}}function xn(n,e){return new Qc({method:"GET",url:n,headers:e=void 0===e?null:e})}function Sn(n,e,t){return new Qc({method:"POST",url:n,body:e,headers:t})}function In(n,e){return new Qc({method:"DELETE",url:n,headers:e})}function Tn(n,e,t){return new Qc({method:"PUT",url:n,body:e,headers:t})}function Cn(n,e,t){return new Qc({method:"PATCH",url:n,body:e,headers:t})}function Pn(n,e){return Gc(new Qc({method:"GET",url:n,responseType:"json",headers:e}))}function En(n,e){switch(n){case"json":return n="response"in e?e.responseType?e.response:JSON.parse(e.response||e.responseText||"null"):JSON.parse(e.responseText||"null");case"xml":return e.responseXML;default:return"response"in e?e.response:e.responseText}}var kn,On,Dn,An,Nn,Mn,Ln,zn,Fn,$n,Rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])},jn=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},Zn=!1,Bn={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){n?console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Error().stack):Zn&&console.log("RxJS: Back to a better error behavior. Thank you. <3"),Zn=n},get useDeprecatedSynchronousErrorHandling(){return Zn}},Hn={closed:!0,next:function(n){},error:function(n){if(Bn.useDeprecatedSynchronousErrorHandling)throw n;r(n)},complete:function(){}},Un=Array.isArray||function(n){return n&&"number"==typeof n.length},Vn=(we.prototype=Object.create(Error.prototype),we),Wn=(ye.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this._parentOrParents,t=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,n instanceof ye)n.remove(this);else if(null!==n)for(var o=0;o<n.length;++o)n[o].remove(this);if(s(t))try{t.call(this)}catch(n){e=n instanceof Vn?l(n.errors):[n]}if(Un(i))for(o=-1,n=i.length;++o<n;)if(a(t=i[o]))try{t.unsubscribe()}catch(n){e=e||[],n instanceof Vn?e=e.concat(l(n.errors)):e.push(n)}if(e)throw new Vn(e)}},ye.prototype.add=function(n){var e=n;if(!n)return ye.EMPTY;switch(du(n)){case"function":e=new ye(n);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;e instanceof ye||(n=e,(e=new ye)._subscriptions=[n]);break;default:throw Error("unrecognized teardown "+n+" added to Subscription.")}if(null===(n=e._parentOrParents))e._parentOrParents=this;else if(n instanceof ye){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}return null===(n=this._subscriptions)?this._subscriptions=[e]:n.push(e),e},ye.prototype.remove=function(n){var e=this._subscriptions;!e||-1!==(n=e.indexOf(n))&&e.splice(n,1)},ye.EMPTY=((At=new ye).closed=!0,At),ye),Yn="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),qn=(e(be,Fn=Wn),be.prototype[Yn]=function(){return this},be.create=function(n,e,t){return(n=new be(n,e,t)).syncErrorThrowable=!1,n},be.prototype.next=function(n){this.isStopped||this._next(n)},be.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},be.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},be.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,Fn.prototype.unsubscribe.call(this))},be.prototype._next=function(n){this.destination.next(n)},be.prototype._error=function(n){this.destination.error(n),this.unsubscribe()},be.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},be.prototype._unsubscribeAndRecycle=function(){var n=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.isStopped=this.closed=!1,this._parentOrParents=n,this},be),Xn=(e(_e,zn=qn),_e.prototype.next=function(n){var e;!this.isStopped&&this._next&&(e=this._parentSubscriber,Bn.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,n)&&this.unsubscribe():this.__tryOrUnsub(this._next,n))},_e.prototype.error=function(n){if(!this.isStopped){var e=this._parentSubscriber,t=Bn.useDeprecatedSynchronousErrorHandling;if(this._error)t&&e.syncErrorThrowable?this.__tryOrSetError(e,this._error,n):this.__tryOrUnsub(this._error,n),this.unsubscribe();else if(e.syncErrorThrowable)t?(e.syncErrorValue=n,e.syncErrorThrown=!0):r(n),this.unsubscribe();else{if(this.unsubscribe(),t)throw n;r(n)}}},_e.prototype.complete=function(){var n,e,t=this;this.isStopped||(n=this._parentSubscriber,this._complete&&(e=function(){return t._complete.call(t._context)},Bn.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,e):this.__tryOrUnsub(e)),this.unsubscribe())},_e.prototype.__tryOrUnsub=function(n,e){try{n.call(this._context,e)}catch(n){if(this.unsubscribe(),Bn.useDeprecatedSynchronousErrorHandling)throw n;r(n)}},_e.prototype.__tryOrSetError=function(e,n,t){if(!Bn.useDeprecatedSynchronousErrorHandling)throw Error("bad call");try{n.call(this._context,t)}catch(n){return Bn.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=n,e.syncErrorThrown=!0):r(n),!0}return!1},_e.prototype._unsubscribe=function(){var n=this._parentSubscriber;this._parentSubscriber=this._context=null,n.unsubscribe()},_e),Kn="function"==typeof Symbol&&Symbol.observable||"@@observable",Gn=(ge.prototype.lift=function(n){var e=new ge;return e.source=this,e.operator=n,e},ge.prototype.subscribe=function(n,e,t){var i=this.operator;n:{if(n){if(n instanceof qn)break n;if(n[Yn]){n=n[Yn]();break n}}n=n||e||t?new qn(n,e,t):new qn(Hn)}if(i?n.add(i.call(n,this.source)):n.add(this.source||Bn.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),Bn.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},ge.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){Bn.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=n),c(e)?e.error(n):console.warn(n)}},ge.prototype.forEach=function(i,n){var o=this;return new(n=u(n))(function(n,e){var t=o.subscribe(function(n){try{i(n)}catch(n){e(n),t&&t.unsubscribe()}},e,n)})},ge.prototype._subscribe=function(n){var e=this.source;return e&&e.subscribe(n)},ge.prototype[Kn]=function(){return this},ge.prototype.pipe=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return 0===n.length?this:i(n)(this)},ge.prototype.toPromise=function(n){var i=this;return new(n=u(n))(function(n,e){var t;i.subscribe(function(n){return t=n},function(n){return e(n)},function(){return n(t)})})},ge.create=function(n){return new ge(n)},ge),Qn=(ve.prototype=Object.create(Error.prototype),ve),Jn=(e(me,Ln=Wn),me.prototype.unsubscribe=function(){var n,e;this.closed||(this.closed=!0,e=(n=this.subject).observers,this.subject=null,!e||0===e.length||n.isStopped||n.closed||-1!==(n=e.indexOf(this.subscriber))&&e.splice(n,1))},me),ne=(e(he,Mn=qn),he),ee=(e(fe,Nn=Gn),fe.prototype[Yn]=function(){return new ne(this)},fe.prototype.lift=function(n){var e=new te(this,this);return e.operator=n,e},fe.prototype.next=function(n){if(this.closed)throw new Qn;if(!this.isStopped)for(var e=(t=this.observers).length,t=t.slice(),i=0;i<e;i++)t[i].next(n)},fe.prototype.error=function(n){if(this.closed)throw new Qn;this.hasError=!0,this.thrownError=n,this.isStopped=!0;for(var e=(t=this.observers).length,t=t.slice(),i=0;i<e;i++)t[i].error(n);this.observers.length=0},fe.prototype.complete=function(){if(this.closed)throw new Qn;this.isStopped=!0;for(var n=(e=this.observers).length,e=e.slice(),t=0;t<n;t++)e[t].complete();this.observers.length=0},fe.prototype.unsubscribe=function(){this.closed=this.isStopped=!0,this.observers=null},fe.prototype._trySubscribe=function(n){if(this.closed)throw new Qn;return Nn.prototype._trySubscribe.call(this,n)},fe.prototype._subscribe=function(n){if(this.closed)throw new Qn;return this.hasError?(n.error(this.thrownError),Wn.EMPTY):this.isStopped?(n.complete(),Wn.EMPTY):(this.observers.push(n),new Jn(this,n))},fe.prototype.asObservable=function(){var n=new Gn;return n.source=this,n},fe.create=function(n,e){return new te(n,e)},fe),te=(e(pe,An=ee),pe.prototype.next=function(n){var e=this.destination;e&&e.next&&e.next(n)},pe.prototype.error=function(n){var e=this.destination;e&&e.error&&this.destination.error(n)},pe.prototype.complete=function(){var n=this.destination;n&&n.complete&&this.destination.complete()},pe.prototype._subscribe=function(n){return this.source?this.source.subscribe(n):Wn.EMPTY},pe),ie=(de.prototype.call=function(n,e){var t=this.connectable;return t._refCount++,n=new oe(n,t),e=e.subscribe(n),n.closed||(n.connection=t.connect()),e},de),oe=(e(ue,Dn=qn),ue.prototype._unsubscribe=function(){var n,e=this.connectable;e?(this.connectable=null,(n=e._refCount)<=0?this.connection=null:(e._refCount=n-1,1<n?this.connection=null:(n=this.connection,e=e._connection,this.connection=null,!e||n&&e!==n||e.unsubscribe()))):this.connection=null},ue),re=(e(ce,On=Gn),ce.prototype._subscribe=function(n){return this.getSubject().subscribe(n)},ce.prototype.getSubject=function(){var n=this._subject;return n&&!n.isStopped||(this._subject=this.subjectFactory()),this._subject},ce.prototype.connect=function(){var n=this._connection;return n||(this._isComplete=!1,(n=this._connection=new Wn).add(this.source.subscribe(new ae(this.getSubject(),this))),n.closed&&(this._connection=null,n=Wn.EMPTY)),n},ce.prototype.refCount=function(){return d()(this)},ce),se={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(Nt=re.prototype)._subscribe},_isComplete:{value:Nt._isComplete,writable:!0},getSubject:{value:Nt.getSubject},connect:{value:Nt.connect},refCount:{value:Nt.refCount}},ae=(e(le,kn=ne),le.prototype._error=function(n){this._unsubscribe(),kn.prototype._error.call(this,n)},le.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),kn.prototype._complete.call(this)},le.prototype._unsubscribe=function(){var n,e=this.connectable;e&&(this.connectable=null,n=e._connection,e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe())},le);function le(n,e){return(n=kn.call(this,n)||this).connectable=e,n}function ce(n,e){var t=On.call(this)||this;return t.source=n,t.subjectFactory=e,t._refCount=0,t._isComplete=!1,t}function ue(n,e){return(n=Dn.call(this,n)||this).connectable=e,n}function de(n){this.connectable=n}function pe(n,e){var t=An.call(this)||this;return t.destination=n,t.source=e,t}function fe(){var n=Nn.call(this)||this;return n.observers=[],n.closed=!1,n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}function he(n){var e=Mn.call(this,n)||this;return e.destination=n,e}function me(n,e){var t=Ln.call(this)||this;return t.subject=n,t.subscriber=e,t.closed=!1,t}function ve(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}function ge(n){this._isScalar=!1,n&&(this._subscribe=n)}function _e(n,e,t,i){var o,r=zn.call(this)||this;return r._parentSubscriber=n,n=r,s(e)?o=e:e&&(o=e.next,t=e.error,i=e.complete,e!==Hn&&(s((n=Object.create(e)).unsubscribe)&&r.add(n.unsubscribe.bind(n)),n.unsubscribe=r.unsubscribe.bind(r))),r._context=n,r._next=o,r._error=t,r._complete=i,r}function be(n,e,t){var i=Fn.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=Hn;break;case 1:if(!n){i.destination=Hn;break}if("object"===du(n)){n instanceof be?(i.syncErrorThrowable=n.syncErrorThrowable,(i.destination=n).add(i)):(i.syncErrorThrowable=!0,i.destination=new Xn(i,n));break}default:i.syncErrorThrowable=!0,i.destination=new Xn(i,n,e,t)}return i}function ye(n){this.closed=!1,this._subscriptions=this._parentOrParents=null,n&&(this._unsubscribe=n)}function we(n){return Error.call(this),this.message=n?n.length+" errors occurred during unsubscription:\n"+n.map(function(n,e){return e+1+") "+n.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=n,this}function xe(n,e){return(n=$n.call(this,n)||this).connectable=e,n}e(xe,$n=qn),xe.prototype._unsubscribe=function(){var n,e=this.connectable;e?(this.connectable=null,(n=e._refCount)<=0?this.connection=null:(e._refCount=n-1,1<n?this.connection=null:(n=this.connection,e=e._connection,this.connection=null,!e||n&&e!==n||e.unsubscribe()))):this.connection=null};var Se,Ie,Te,Ce,Pe,Ee,ke,Oe,De,Ae,Ne=(it.prototype.call=function(n,e){return e.subscribe(new Me(n,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},it),Me=(e(tt,Ae=qn),tt.prototype._next=function(n){var e;try{e=this.keySelector(n)}catch(n){return void this.error(n)}this._group(n,e)},tt.prototype._group=function(n,e){var t,i=this.groups,o=(i=i||(this.groups=new Map)).get(e);if(this.elementSelector)try{t=this.elementSelector(n)}catch(n){this.error(n)}else t=n;if(!o&&(o=this.subjectSelector?this.subjectSelector():new ee,i.set(e,o),n=new ze(e,o,this),this.destination.next(n),this.durationSelector)){n=void 0;try{n=this.durationSelector(new ze(e,o))}catch(n){return void this.error(n)}this.add(n.subscribe(new Le(e,o,this)))}o.closed||o.next(t)},tt.prototype._error=function(t){var n=this.groups;n&&(n.forEach(function(n,e){n.error(t)}),n.clear()),this.destination.error(t)},tt.prototype._complete=function(){var n=this.groups;n&&(n.forEach(function(n,e){n.complete()}),n.clear()),this.destination.complete()},tt.prototype.removeGroup=function(n){this.groups.delete(n)},tt.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&Ae.prototype.unsubscribe.call(this))},tt),Le=(e(et,De=qn),et.prototype._next=function(n){this.complete()},et.prototype._unsubscribe=function(){var n=this.parent,e=this.key;this.key=this.parent=null,n&&n.removeGroup(e)},et),ze=(e(nt,Oe=Gn),nt.prototype._subscribe=function(n){var e=new Wn,t=this.refCountSubscription,i=this.groupSubject;return t&&!t.closed&&e.add(new Fe(t)),e.add(i.subscribe(n)),e},nt),Fe=(e(Je,ke=Wn),Je.prototype.unsubscribe=function(){var n=this.parent;n.closed||this.closed||(ke.prototype.unsubscribe.call(this),--n.count,0===n.count&&n.attemptedToUnsubscribe&&n.unsubscribe())},Je),$e=(e(Qe,Ee=ee),Object.defineProperty(Qe.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),Qe.prototype._subscribe=function(n){var e=Ee.prototype._subscribe.call(this,n);return e&&!e.closed&&n.next(this._value),e},Qe.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Qn;return this._value},Qe.prototype.next=function(n){Ee.prototype.next.call(this,this._value=n)},Qe),Re=(e(Ge,Pe=Wn),Ge.prototype.schedule=function(n,e){return this},e(Ke,Ce=Ge),Ke.prototype.schedule=function(n,e){if(void 0===e&&(e=0),this.closed)return this;this.state=n,n=this.id;var t=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(t,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(t,this.id,e),this},Ke.prototype.requestAsyncId=function(n,e,t){return void 0===t&&(t=0),setInterval(n.flush.bind(n,this),t)},Ke.prototype.recycleAsyncId=function(n,e,t){if(null!==(t=void 0===t?0:t)&&this.delay===t&&!1===this.pending)return e;clearInterval(e)},Ke.prototype.execute=function(n,e){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(n=this._execute(n,e))?n:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},Ke.prototype._execute=function(n,e){e=!1;var t=void 0;try{this.work(n)}catch(n){e=!0,t=!!n&&n||Error(n)}if(e)return this.unsubscribe(),t},Ke.prototype._unsubscribe=function(){var n=this.id,e=this.scheduler,t=e.actions,i=t.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,-1!==i&&t.splice(i,1),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null},Ke),je=(e(Xe,Te=Re),Xe.prototype.schedule=function(n,e){return 0<(e=void 0===e?0:e)?Te.prototype.schedule.call(this,n,e):(this.delay=e,this.state=n,this.scheduler.flush(this),this)},Xe.prototype.execute=function(n,e){return 0<e||this.closed?Te.prototype.execute.call(this,n,e):this._execute(n,e)},Xe.prototype.requestAsyncId=function(n,e,t){return null!==(t=void 0===t?0:t)&&0<t||null===t&&0<this.delay?Te.prototype.requestAsyncId.call(this,n,e,t):n.flush(this)},Xe),Ze=(qe.prototype.schedule=function(n,e,t){return void 0===e&&(e=0),new this.SchedulerAction(this,n).schedule(t,e)},qe.now=function(){return Date.now()},qe),Be=(e(Ye,Ie=Ze),Ye.prototype.schedule=function(n,e,t){return void 0===e&&(e=0),Ye.delegate&&Ye.delegate!==this?Ye.delegate.schedule(n,e,t):Ie.prototype.schedule.call(this,n,e,t)},Ye.prototype.flush=function(n){var e,t=this.actions;if(this.active)t.push(n);else{this.active=!0;do{if(e=n.execute(n.state,n.delay))break}while(n=t.shift());if(this.active=!1,e){for(;n=t.shift();)n.unsubscribe();throw e}}},Ye),He=(e(We,Se=Be),new We(je)),Ue=new Gn(function(n){return n.complete()}),Ve=function(i){return function(n){for(var e=0,t=i.length;e<t&&!n.closed;e++)n.next(i[e]);n.complete()}};function We(){return null!==Se&&Se.apply(this,arguments)||this}function Ye(n,e){void 0===e&&(e=Ze.now);var t=Ie.call(this,n,function(){return Ye.delegate&&Ye.delegate!==t?Ye.delegate.now():e()})||this;return t.actions=[],t.active=!1,t.scheduled=void 0,t}function qe(n,e){void 0===e&&(e=qe.now),this.SchedulerAction=n,this.now=e}function Xe(n,e){var t=Te.call(this,n,e)||this;return t.scheduler=n,t.work=e,t}function Ke(n,e){var t=Ce.call(this,n,e)||this;return t.scheduler=n,t.work=e,t.pending=!1,t}function Ge(n,e){return Pe.call(this)||this}function Qe(n){var e=Ee.call(this)||this;return e._value=n,e}function Je(n){var e=ke.call(this)||this;return(e.parent=n).count++,e}function nt(n,e,t){var i=Oe.call(this)||this;return i.key=n,i.groupSubject=e,i.refCountSubscription=t,i}function et(n,e,t){var i=De.call(this,e)||this;return i.key=n,i.group=e,i.parent=t,i}function tt(n,e,t,i,o){return(n=Ae.call(this,n)||this).keySelector=e,n.elementSelector=t,n.durationSelector=i,n.subjectSelector=o,n.groups=null,n.attemptedToUnsubscribe=!1,n.count=0,n}function it(n,e,t,i){this.keySelector=n,this.elementSelector=e,this.durationSelector=t,this.subjectSelector=i}(la=n.NotificationKind||(n.NotificationKind={})).NEXT="N",la.ERROR="E",la.COMPLETE="C";var ot,rt,st,at,lt,ct,ut,dt,pt,ft,ht,mt,vt=(oi.prototype.observe=function(n){switch(this.kind){case"N":return n.next&&n.next(this.value);case"E":return n.error&&n.error(this.error);case"C":return n.complete&&n.complete()}},oi.prototype.do=function(n,e,t){switch(this.kind){case"N":return n&&n(this.value);case"E":return e&&e(this.error);case"C":return t&&t()}},oi.prototype.accept=function(n,e,t){return n&&"function"==typeof n.next?this.observe(n):this.do(n,e,t)},oi.prototype.toObservable=function(){switch(this.kind){case"N":return v(this.value);case"E":return g(this.error);case"C":return p()}throw Error("unexpected notification kind value")},oi.createNext=function(n){return void 0!==n?new oi("N",n):oi.undefinedValueNotification},oi.createError=function(n){return new oi("E",void 0,n)},oi.createComplete=function(){return oi.completeNotification},oi.completeNotification=new oi("C"),oi.undefinedValueNotification=new oi("N",void 0),oi),gt=(ii.prototype.call=function(n,e){return e.subscribe(new _t(n,this.scheduler,this.delay))},ii),_t=(e(ti,mt=qn),ti.dispatch=function(n){n.notification.observe(n.destination),this.unsubscribe()},ti.prototype.scheduleMessage=function(n){this.destination.add(this.scheduler.schedule(ti.dispatch,this.delay,new bt(n,this.destination)))},ti.prototype._next=function(n){this.scheduleMessage(vt.createNext(n))},ti.prototype._error=function(n){this.scheduleMessage(vt.createError(n)),this.unsubscribe()},ti.prototype._complete=function(){this.scheduleMessage(vt.createComplete()),this.unsubscribe()},ti),bt=function(n,e){this.notification=n,this.destination=e},yt=(e(ei,ht=ee),ei.prototype.nextInfiniteTimeWindow=function(n){var e=this._events;e.push(n),e.length>this._bufferSize&&e.shift(),ht.prototype.next.call(this,n)},ei.prototype.nextTimeWindow=function(n){this._events.push(new wt(this._getNow(),n)),this._trimBufferThenGetEvents(),ht.prototype.next.call(this,n)},ei.prototype._subscribe=function(n){var e,t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,r=i.length;if(this.closed)throw new Qn;if(e=this.isStopped||this.hasError?Wn.EMPTY:(this.observers.push(n),new Jn(this,n)),o&&n.add(n=new _t(n,o)),t)for(t=0;t<r&&!n.closed;t++)n.next(i[t]);else for(t=0;t<r&&!n.closed;t++)n.next(i[t].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),e},ei.prototype._getNow=function(){return(this.scheduler||He).now()},ei.prototype._trimBufferThenGetEvents=function(){for(var n=this._getNow(),e=this._bufferSize,t=this._windowTime,i=this._events,o=i.length,r=0;r<o&&!(n-i[r].time<t);)r++;return 0<(r=e<o?Math.max(r,o-e):r)&&i.splice(0,r),i},ei),wt=function(n,e){this.time=n,this.value=e},xt=(e(ni,ft=ee),ni.prototype._subscribe=function(n){return this.hasError?(n.error(this.thrownError),Wn.EMPTY):this.hasCompleted&&this.hasNext?(n.next(this.value),n.complete(),Wn.EMPTY):ft.prototype._subscribe.call(this,n)},ni.prototype.next=function(n){this.hasCompleted||(this.value=n,this.hasNext=!0)},ni.prototype.error=function(n){this.hasCompleted||ft.prototype.error.call(this,n)},ni.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&ft.prototype.next.call(this,this.value),ft.prototype.complete.call(this)},ni),St=1,It=Promise.resolve(),Tt={},Ct=function(n){var e=St++;return Tt[e]=!0,It.then(function(){return b(e)&&n()}),e},Pt=function(n){b(n)},Et=(e(Jt,pt=Re),Jt.prototype.requestAsyncId=function(n,e,t){return null!==(t=void 0===t?0:t)&&0<t?pt.prototype.requestAsyncId.call(this,n,e,t):(n.actions.push(this),n.scheduled||(n.scheduled=Ct(n.flush.bind(n,null))))},Jt.prototype.recycleAsyncId=function(n,e,t){if(null!==(t=void 0===t?0:t)&&0<t||null===t&&0<this.delay)return pt.prototype.recycleAsyncId.call(this,n,e,t);0===n.actions.length&&(Pt(e),n.scheduled=void 0)},Jt),kt=(e(Qt,dt=Be),Qt.prototype.flush=function(n){this.active=!0,this.scheduled=void 0;var e,t=this.actions,i=-1,o=t.length;n=n||t.shift();do{if(e=n.execute(n.state,n.delay))break}while(++i<o&&(n=t.shift()));if(this.active=!1,e){for(;++i<o&&(n=t.shift());)n.unsubscribe();throw e}},new Qt(Et)),Ot=new Be(Re),Dt=(e(Gt,ut=Re),Gt.prototype.requestAsyncId=function(n,e,t){return null!==(t=void 0===t?0:t)&&0<t?ut.prototype.requestAsyncId.call(this,n,e,t):(n.actions.push(this),n.scheduled||(n.scheduled=requestAnimationFrame(function(){return n.flush(null)})))},Gt.prototype.recycleAsyncId=function(n,e,t){if(null!==(t=void 0===t?0:t)&&0<t||null===t&&0<this.delay)return ut.prototype.recycleAsyncId.call(this,n,e,t);0===n.actions.length&&(cancelAnimationFrame(e),n.scheduled=void 0)},Gt),At=(e(Kt,ct=Be),Kt.prototype.flush=function(n){this.active=!0,this.scheduled=void 0;var e,t=this.actions,i=-1,o=t.length;n=n||t.shift();do{if(e=n.execute(n.state,n.delay))break}while(++i<o&&(n=t.shift()));if(this.active=!1,e){for(;++i<o&&(n=t.shift());)n.unsubscribe();throw e}},new Kt(Dt)),Nt=(e(Xt,lt=Be),Xt.prototype.flush=function(){for(var n,e,t=this.actions,i=this.maxFrames;(e=t[0])&&e.delay<=i&&(t.shift(),this.frame=e.delay,!(n=e.execute(e.state,e.delay))););if(n){for(;e=t.shift();)e.unsubscribe();throw n}},Xt.frameTimeFactor=10,Xt),Mt=(e(qt,at=Re),qt.prototype.schedule=function(n,e){if(void 0===e&&(e=0),!this.id)return at.prototype.schedule.call(this,n,e);this.active=!1;var t=new qt(this.scheduler,this.work);return this.add(t),t.schedule(n,e)},qt.prototype.requestAsyncId=function(n,e,t){return this.delay=n.frame+(t=void 0===t?0:t),(n=n.actions).push(this),n.sort(qt.sortActions),!0},qt.prototype.recycleAsyncId=function(n,e,t){},qt.prototype._execute=function(n,e){if(!0===this.active)return at.prototype._execute.call(this,n,e)},qt.sortActions=function(n,e){return n.delay===e.delay?n.index===e.index?0:n.index>e.index?1:-1:n.delay>e.delay?1:-1},qt),Lt=(Yt.prototype=Object.create(Error.prototype),Yt),zt=(Wt.prototype=Object.create(Error.prototype),Wt),Ft=(Vt.prototype=Object.create(Error.prototype),Vt),$t=(Ut.prototype.call=function(n,e){return e.subscribe(new Rt(n,this.project,this.thisArg))},Ut),Rt=(e(Ht,st=qn),Ht.prototype._next=function(n){var e;try{e=this.project.call(this.thisArg,n,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)},Ht),je=(e(Bt,rt=qn),Bt.prototype.notifyNext=function(n,e,t,i,o){this.destination.next(e)},Bt.prototype.notifyError=function(n,e){this.destination.error(n)},Bt.prototype.notifyComplete=function(n){this.destination.complete()},Bt),jt=(e(Zt,ot=qn),Zt.prototype._next=function(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)},Zt.prototype._error=function(n){this.parent.notifyError(n,this),this.unsubscribe()},Zt.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},Zt);function Zt(n,e,t){var i=ot.call(this)||this;return i.parent=n,i.outerValue=e,i.outerIndex=t,i.index=0,i}function Bt(){return null!==rt&&rt.apply(this,arguments)||this}function Ht(n,e,t){return(n=st.call(this,n)||this).project=e,n.count=0,n.thisArg=t||n,n}function Ut(n,e){this.project=n,this.thisArg=e}function Vt(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}function Wt(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}function Yt(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}function qt(n,e,t){void 0===t&&(t=n.index+=1);var i=at.call(this,n,e)||this;return i.scheduler=n,i.work=e,i.index=t,i.active=!0,i.index=n.index=t,i}function Xt(n,e){void 0===n&&(n=Mt),void 0===e&&(e=Number.POSITIVE_INFINITY);var t=lt.call(this,n,function(){return t.frame})||this;return t.maxFrames=e,t.frame=0,t.index=-1,t}function Kt(){return null!==ct&&ct.apply(this,arguments)||this}function Gt(n,e){var t=ut.call(this,n,e)||this;return t.scheduler=n,t.work=e,t}function Qt(){return null!==dt&&dt.apply(this,arguments)||this}function Jt(n,e){var t=pt.call(this,n,e)||this;return t.scheduler=n,t.work=e,t}function ni(){var n=null!==ft&&ft.apply(this,arguments)||this;return n.value=null,n.hasNext=!1,n.hasCompleted=!1,n}function ei(n,e,t){void 0===n&&(n=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY);var i=ht.call(this)||this;return i.scheduler=t,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=n<1?1:n,i._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}function ti(n,e,t){return void 0===t&&(t=0),(n=mt.call(this,n)||this).scheduler=e,n.delay=t,n}function ii(n,e){void 0===e&&(e=0),this.scheduler=n,this.delay=e}function oi(n,e,t){this.kind=n,this.value=e,this.error=t,this.hasValue="N"===n}var ri,si,ai,li,ci,ui,di,pi,fi,hi,mi,vi,gi,_i,bi,yi,wi,xi,Si,Ii,Ti,Ci,Pi,Ei,ki,Oi,Di,Ai,Ni,Mi,Li,zi,Fi,$i,Ri,ji,Zi,Bi,Hi,Ui,Vi,Wi,Yi,qi,Xi,Ki,Gi,Qi,Ji,no,eo,to,io,oo,ro,so,ao,lo,co,uo,po,fo,ho,mo,vo,go,_o,bo,yo,wo,xo,So="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Io=function(n){return n&&"number"==typeof n.length&&"function"!=typeof n},To=function(n){if(n&&"function"==typeof n[Kn])return t=n,function(n){var e=t[Kn]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(n)};var t,i,o;if(Io(n))return Ve(n);if(P(n))return i=n,function(e){return i.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,r),e};if(n&&"function"==typeof n[So])return o=n,function(n){for(var e=o[So]();;){var t=e.next();if(t.done){n.complete();break}if(n.next(t.value),n.closed)break}return"function"==typeof e.return&&n.add(function(){e.return&&e.return()}),n};throw n=a(n)?"an invalid object":"'"+n+"'",new TypeError("You provided "+n+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},Co={},Po=(Zc.prototype.call=function(n,e){return e.subscribe(new Eo(n,this.resultSelector))},Zc),Eo=(e(jc,xo=je),jc.prototype._next=function(n){this.values.push(Co),this.observables.push(n)},jc.prototype._complete=function(){var n=this.observables,e=n.length;if(0===e)this.destination.complete();else{this.toRespond=this.active=e;for(var t=0;t<e;t++){var i=n[t];this.add(E(this,i,i,t))}}},jc.prototype.notifyComplete=function(n){0==--this.active&&this.destination.complete()},jc.prototype.notifyNext=function(n,e,t,i,o){i=(n=this.values)[t],i=this.toRespond?i===Co?--this.toRespond:this.toRespond:0,n[t]=e,0===i&&(this.resultSelector?this._tryResultSelector(n):this.destination.next(n.slice()))},jc.prototype._tryResultSelector=function(n){var e;try{e=this.resultSelector.apply(this,n)}catch(n){return void this.destination.error(n)}this.destination.next(e)},jc),ko=(Rc.prototype.call=function(n,e){return e.subscribe(new Oo(n,this.project,this.concurrent))},Rc),Oo=(e($c,wo=je),$c.prototype._next=function(n){this.active<this.concurrent?this._tryNext(n):this.buffer.push(n)},$c.prototype._tryNext=function(n){var e,t=this.index++;try{e=this.project(n,t)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(e,n,t)},$c.prototype._innerSub=function(n,e,t){e=new jt(this,e,t),(t=this.destination).add(e),(n=E(this,n,void 0,void 0,e))!==e&&t.add(n)},$c.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},$c.prototype.notifyNext=function(n,e,t,i,o){this.destination.next(e)},$c.prototype.notifyComplete=function(n){var e=this.buffer;this.remove(n),this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},$c),Do=new Gn(o),Ao=(Fc.prototype.call=function(n,e){return e.subscribe(new No(n,this.predicate,this.thisArg))},Fc),No=(e(zc,yo=qn),zc.prototype._next=function(n){var e;try{e=this.predicate.call(this.thisArg,n,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(n)},zc),Mo=(Lc.prototype.call=function(n,e){return e.subscribe(new Lo(n))},Lc),Lo=(e(Mc,bo=je),Mc.prototype._next=function(n){this.observables.push(n)},Mc.prototype._complete=function(){var n=this.observables,e=n.length;if(0===e)this.destination.complete();else{for(var t=0;t<e&&!this.hasFirst;t++){var i=E(this,i=n[t],i,t);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},Mc.prototype.notifyNext=function(n,e,t,i,o){if(!this.hasFirst){for(this.hasFirst=!0,n=0;n<this.subscriptions.length;n++)n!==t&&((i=this.subscriptions[n]).unsubscribe(),this.remove(i));this.subscriptions=null}this.destination.next(e)},Mc),zo=(Nc.prototype.call=function(n,e){return e.subscribe(new Fo(n,this.resultSelector))},Nc),Fo=(e(Ac,_o=qn),Ac.prototype._next=function(n){var e=this.iterators;Un(n)?e.push(new Ro(n)):"function"==typeof n[So]?e.push(new $o(n[So]())):e.push(new jo(this.destination,this,n))},Ac.prototype._complete=function(){var n=this.iterators,e=n.length;if(this.unsubscribe(),0===e)this.destination.complete();else{this.active=e;for(var t=0;t<e;t++){var i=n[t];i.stillUnsubscribed?this.destination.add(i.subscribe(i,t)):this.active--}}},Ac.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},Ac.prototype.checkIterators=function(){for(var n=this.iterators,e=n.length,t=this.destination,i=0;i<e;i++)if("function"==typeof(s=n[i]).hasValue&&!s.hasValue())return;for(var o=!1,r=[],i=0;i<e;i++){var s,a=(s=n[i]).next();if(s.hasCompleted()&&(o=!0),a.done)return void t.complete();r.push(a.value)}this.resultSelector?this._tryresultSelector(r):t.next(r),o&&t.complete()},Ac.prototype._tryresultSelector=function(n){var e;try{e=this.resultSelector.apply(this,n)}catch(n){return void this.destination.error(n)}this.destination.next(e)},Ac),$o=(Dc.prototype.hasValue=function(){return!0},Dc.prototype.next=function(){var n=this.nextResult;return this.nextResult=this.iterator.next(),n},Dc.prototype.hasCompleted=function(){var n=this.nextResult;return n&&n.done},Dc),Ro=(Oc.prototype[So]=function(){return this},Oc.prototype.next=function(n){n=this.index++;var e=this.array;return n<this.length?{value:e[n],done:!1}:{value:null,done:!0}},Oc.prototype.hasValue=function(){return this.array.length>this.index},Oc.prototype.hasCompleted=function(){return this.array.length===this.index},Oc),jo=(e(kc,go=je),kc.prototype[So]=function(){return this},kc.prototype.next=function(){var n=this.buffer;return 0===n.length&&this.isComplete?{value:null,done:!0}:{value:n.shift(),done:!1}},kc.prototype.hasValue=function(){return 0<this.buffer.length},kc.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},kc.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},kc.prototype.notifyNext=function(n,e,t,i,o){this.buffer.push(e),this.parent.checkIterators()},kc.prototype.subscribe=function(n,e){return E(this,this.observable,this,e)},kc),Zo=(Ec.prototype.call=function(n,e){return e.subscribe(new Bo(n,this.durationSelector))},Ec),Bo=(e(Pc,vo=je),Pc.prototype._next=function(n){if(this.value=n,this.hasValue=!0,!this.throttled){var e=void 0;try{e=(0,this.durationSelector)(n)}catch(n){return this.destination.error(n)}!(n=E(this,e))||n.closed?this.clearThrottle():this.add(this.throttled=n)}},Pc.prototype.clearThrottle=function(){var n=this.value,e=this.hasValue,t=this.throttled;t&&(this.remove(t),this.throttled=null,t.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(n))},Pc.prototype.notifyNext=function(n,e,t,i){this.clearThrottle()},Pc.prototype.notifyComplete=function(){this.clearThrottle()},Pc),Ho=(Cc.prototype.call=function(n,e){return e.subscribe(new Uo(n,this.closingNotifier))},Cc),Uo=(e(Tc,mo=je),Tc.prototype._next=function(n){this.buffer.push(n)},Tc.prototype.notifyNext=function(n,e,t,i,o){n=this.buffer,this.buffer=[],this.destination.next(n)},Tc),Vo=(Ic.prototype.call=function(n,e){return e.subscribe(new this.subscriberClass(n,this.bufferSize,this.startBufferEvery))},Ic),Wo=(e(Sc,ho=qn),Sc.prototype._next=function(n){var e=this.buffer;e.push(n),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},Sc.prototype._complete=function(){var n=this.buffer;0<n.length&&this.destination.next(n),ho.prototype._complete.call(this)},Sc),Yo=(e(xc,fo=qn),xc.prototype._next=function(n){var e=this.bufferSize,t=this.startBufferEvery,i=this.buffers,o=this.count;for(this.count++,0==o%t&&i.push([]),t=i.length;t--;)(o=i[t]).push(n),o.length===e&&(i.splice(t,1),this.destination.next(o))},xc.prototype._complete=function(){for(var n=this.buffers,e=this.destination;0<n.length;){var t=n.shift();0<t.length&&e.next(t)}fo.prototype._complete.call(this)},xc),qo=(wc.prototype.call=function(n,e){return e.subscribe(new Ko(n,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},wc),Xo=function(){this.buffer=[]},Ko=(e(yc,po=qn),yc.prototype._next=function(n){for(var e,t=this.contexts,i=t.length,o=0;o<i;o++){var r=t[o],s=r.buffer;s.push(n),s.length==this.maxBufferSize&&(e=r)}e&&this.onBufferFull(e)},yc.prototype._error=function(n){this.contexts.length=0,po.prototype._error.call(this,n)},yc.prototype._complete=function(){for(var n=this.contexts,e=this.destination;0<n.length;){var t=n.shift();e.next(t.buffer)}po.prototype._complete.call(this)},yc.prototype._unsubscribe=function(){this.contexts=null},yc.prototype.onBufferFull=function(n){var e;this.closeContext(n),(n=n.closeAction).unsubscribe(),this.remove(n),!this.closed&&this.timespanOnly&&(n=this.openContext(),e=this.bufferTimeSpan,this.add(n.closeAction=this.scheduler.schedule(G,e,{subscriber:this,context:n,bufferTimeSpan:e})))},yc.prototype.openContext=function(){var n=new Xo;return this.contexts.push(n),n},yc.prototype.closeContext=function(n){this.destination.next(n.buffer);var e=this.contexts;0<=(e?e.indexOf(n):-1)&&e.splice(e.indexOf(n),1)},yc),Go=(bc.prototype.call=function(n,e){return e.subscribe(new Qo(n,this.openings,this.closingSelector))},bc),Qo=(e(_c,uo=je),_c.prototype._next=function(n){for(var e=this.contexts,t=e.length,i=0;i<t;i++)e[i].buffer.push(n)},_c.prototype._error=function(n){for(var e=this.contexts;0<e.length;){var t=e.shift();t.subscription.unsubscribe(),t.buffer=null,t.subscription=null}this.contexts=null,uo.prototype._error.call(this,n)},_c.prototype._complete=function(){for(var n=this.contexts;0<n.length;){var e=n.shift();this.destination.next(e.buffer),e.subscription.unsubscribe(),e.buffer=null,e.subscription=null}this.contexts=null,uo.prototype._complete.call(this)},_c.prototype.notifyNext=function(n,e,t,i,o){n?this.closeBuffer(n):this.openBuffer(e)},_c.prototype.notifyComplete=function(n){this.closeBuffer(n.context)},_c.prototype.openBuffer=function(n){try{var e=this.closingSelector.call(this,n);e&&this.trySubscribe(e)}catch(n){this._error(n)}},_c.prototype.closeBuffer=function(n){var e,t=this.contexts;t&&n&&(e=n.subscription,this.destination.next(n.buffer),t.splice(t.indexOf(n),1),this.remove(e),e.unsubscribe())},_c.prototype.trySubscribe=function(n){var e=this.contexts,t=new Wn,i={buffer:[],subscription:t};e.push(i),!(n=E(this,n,i))||n.closed?this.closeBuffer(i):(n.context=i,this.add(n),t.add(n))},_c),Jo=(gc.prototype.call=function(n,e){return e.subscribe(new nr(n,this.closingSelector))},gc),nr=(e(vc,co=je),vc.prototype._next=function(n){this.buffer.push(n)},vc.prototype._complete=function(){var n=this.buffer;n&&this.destination.next(n),co.prototype._complete.call(this)},vc.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},vc.prototype.notifyNext=function(n,e,t,i,o){this.openBuffer()},vc.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},vc.prototype.openBuffer=function(){var n=this.closingSubscription;n&&(this.remove(n),n.unsubscribe()),(n=this.buffer)&&this.destination.next(n),this.buffer=[];try{var e=(0,this.closingSelector)()}catch(n){return this.error(n)}this.closingSubscription=n=new Wn,this.add(n),this.subscribing=!0,n.add(E(this,e)),this.subscribing=!1},vc),er=(mc.prototype.call=function(n,e){return e.subscribe(new tr(n,this.selector,this.caught))},mc),tr=(e(hc,lo=je),hc.prototype.error=function(n){if(!this.isStopped){var e=void 0;try{e=this.selector(n,this.caught)}catch(n){return void lo.prototype.error.call(this,n)}this._unsubscribeAndRecycle(),n=new jt(this,void 0,void 0),this.add(n),(e=E(this,e,void 0,void 0,n))!==n&&this.add(e)}},hc),ir=(fc.prototype.call=function(n,e){return e.subscribe(new or(n,this.predicate,this.source))},fc),or=(e(pc,ao=qn),pc.prototype._next=function(n){this.predicate?this._tryPredicate(n):this.count++},pc.prototype._tryPredicate=function(n){var e;try{e=this.predicate(n,this.index++,this.source)}catch(n){return void this.destination.error(n)}e&&this.count++},pc.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},pc),rr=(dc.prototype.call=function(n,e){return e.subscribe(new sr(n,this.durationSelector))},dc),sr=(e(uc,so=je),uc.prototype._next=function(n){try{var e=this.durationSelector.call(this,n);e&&this._tryNext(n,e)}catch(n){this.destination.error(n)}},uc.prototype._complete=function(){this.emitValue(),this.destination.complete()},uc.prototype._tryNext=function(n,e){var t=this.durationSubscription;this.value=n,this.hasValue=!0,t&&(t.unsubscribe(),this.remove(t)),(t=E(this,e))&&!t.closed&&this.add(this.durationSubscription=t)},uc.prototype.notifyNext=function(n,e,t,i,o){this.emitValue()},uc.prototype.notifyComplete=function(){this.emitValue()},uc.prototype.emitValue=function(){var n,e;this.hasValue&&(n=this.value,(e=this.durationSubscription)&&(this.durationSubscription=null,e.unsubscribe(),this.remove(e)),this.value=null,this.hasValue=!1,so.prototype._next.call(this,n))},uc),ar=(cc.prototype.call=function(n,e){return e.subscribe(new lr(n,this.dueTime,this.scheduler))},cc),lr=(e(lc,ro=qn),lc.prototype._next=function(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(en,this.dueTime,this))},lc.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},lc.prototype.debouncedNext=function(){var n;this.clearDebounce(),this.hasValue&&(n=this.lastValue,this.lastValue=null,this.hasValue=!1,this.destination.next(n))},lc.prototype.clearDebounce=function(){var n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)},lc),cr=(ac.prototype.call=function(n,e){return e.subscribe(new ur(n,this.defaultValue))},ac),ur=(e(sc,oo=qn),sc.prototype._next=function(n){this.isEmpty=!1,this.destination.next(n)},sc.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},sc),dr=(rc.prototype.call=function(n,e){return e.subscribe(new pr(n,this.delay,this.scheduler))},rc),pr=(e(oc,io=qn),oc.dispatch=function(n){for(var e=n.source,t=e.queue,i=n.scheduler,o=n.destination;0<t.length&&t[0].time-i.now()<=0;)t.shift().notification.observe(o);0<t.length?(e=Math.max(0,t[0].time-i.now()),this.schedule(n,e)):(this.unsubscribe(),e.active=!1)},oc.prototype._schedule=function(n){this.active=!0,this.destination.add(n.schedule(oc.dispatch,this.delay,{source:this,destination:this.destination,scheduler:n}))},oc.prototype.scheduleNotification=function(n){var e;!0!==this.errored&&(e=this.scheduler,n=new fr(e.now()+this.delay,n),this.queue.push(n),!1===this.active&&this._schedule(e))},oc.prototype._next=function(n){this.scheduleNotification(vt.createNext(n))},oc.prototype._error=function(n){this.errored=!0,this.queue=[],this.destination.error(n),this.unsubscribe()},oc.prototype._complete=function(){this.scheduleNotification(vt.createComplete()),this.unsubscribe()},oc),fr=function(n,e){this.time=n,this.notification=e},hr=(ic.prototype.call=function(n,e){return e.subscribe(new mr(n,this.delayDurationSelector))},ic),mr=(e(tc,to=je),tc.prototype.notifyNext=function(n,e,t,i,o){this.destination.next(n),this.removeSubscription(o),this.tryComplete()},tc.prototype.notifyError=function(n,e){this._error(n)},tc.prototype.notifyComplete=function(n){(n=this.removeSubscription(n))&&this.destination.next(n),this.tryComplete()},tc.prototype._next=function(n){var e=this.index++;try{var t=this.delayDurationSelector(n,e);t&&this.tryDelay(t,n)}catch(n){this.destination.error(n)}},tc.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},tc.prototype.removeSubscription=function(n){n.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(n);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),n.outerValue},tc.prototype.tryDelay=function(n,e){(n=E(this,n,e))&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))},tc.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},tc),vr=(e(ec,eo=Gn),ec.prototype._subscribe=function(n){this.subscriptionDelay.subscribe(new gr(n,this.source))},ec),gr=(e(nc,no=qn),nc.prototype._next=function(n){this.subscribeToSource()},nc.prototype._error=function(n){this.unsubscribe(),this.parent.error(n)},nc.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},nc.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},nc),_r=(Jl.prototype.call=function(n,e){return e.subscribe(new br(n))},Jl),br=(e(Ql,Ji=qn),Ql.prototype._next=function(n){n.observe(this.destination)},Ql),yr=(Gl.prototype.call=function(n,e){return e.subscribe(new wr(n,this.keySelector,this.flushes))},Gl),wr=(e(Kl,Qi=je),Kl.prototype.notifyNext=function(n,e,t,i,o){this.values.clear()},Kl.prototype.notifyError=function(n,e){this._error(n)},Kl.prototype._next=function(n){this.keySelector?this._useKeySelector(n):this._finalizeNext(n,n)},Kl.prototype._useKeySelector=function(n){var e,t=this.destination;try{e=this.keySelector(n)}catch(n){return void t.error(n)}this._finalizeNext(e,n)},Kl.prototype._finalizeNext=function(n,e){var t=this.values;t.has(n)||(t.add(n),this.destination.next(e))},Kl),xr=(Xl.prototype.call=function(n,e){return e.subscribe(new Sr(n,this.compare,this.keySelector))},Xl),Sr=(e(ql,Gi=qn),ql.prototype.compare=function(n,e){return n===e},ql.prototype._next=function(n){try{var e=(t=this.keySelector)?t(n):n}catch(n){return this.destination.error(n)}if(t=!1,this.hasKey)try{var t=(0,this.compare)(this.key,e)}catch(n){return this.destination.error(n)}else this.hasKey=!0;t||(this.key=e,this.destination.next(n))},ql),Ir=(Yl.prototype.call=function(n,e){return e.subscribe(new Tr(n,this.errorFactory))},Yl),Tr=(e(Wl,Ki=qn),Wl.prototype._next=function(n){this.hasValue=!0,this.destination.next(n)},Wl.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)},Wl),Cr=(Vl.prototype.call=function(n,e){return e.subscribe(new Pr(n,this.total))},Vl),Pr=(e(Ul,Xi=qn),Ul.prototype._next=function(n){var e=this.total,t=++this.count;t<=e&&(this.destination.next(n),t===e&&(this.destination.complete(),this.unsubscribe()))},Ul),Er=(Hl.prototype.call=function(n,e){return e.subscribe(new kr(n,this.predicate,this.thisArg,this.source))},Hl),kr=(e(Bl,qi=qn),Bl.prototype.notifyComplete=function(n){this.destination.next(n),this.destination.complete()},Bl.prototype._next=function(n){var e=!1;try{e=this.predicate.call(this.thisArg,n,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)},Bl.prototype._complete=function(){this.notifyComplete(!0)},Bl),Or=(Zl.prototype.call=function(n,e){return e.subscribe(new Dr(n))},Zl),Dr=(e(jl,Yi=je),jl.prototype._next=function(n){this.hasSubscription||(this.hasSubscription=!0,this.add(E(this,n)))},jl.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},jl.prototype.notifyComplete=function(n){this.remove(n),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},jl),Ar=(Rl.prototype.call=function(n,e){return e.subscribe(new Nr(n,this.project))},Rl),Nr=(e($l,Wi=je),$l.prototype._next=function(n){this.hasSubscription||this.tryNext(n)},$l.prototype.tryNext=function(n){var e,t=this.index++;try{e=this.project(n,t)}catch(n){return void this.destination.error(n)}this.hasSubscription=!0,this._innerSub(e,n,t)},$l.prototype._innerSub=function(n,e,t){e=new jt(this,e,t),(t=this.destination).add(e),(n=E(this,n,void 0,void 0,e))!==e&&t.add(n)},$l.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},$l.prototype.notifyNext=function(n,e,t,i,o){this.destination.next(e)},$l.prototype.notifyError=function(n){this.destination.error(n)},$l.prototype.notifyComplete=function(n){this.destination.remove(n),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},$l),Mr=(Fl.prototype.call=function(n,e){return e.subscribe(new Lr(n,this.project,this.concurrent,this.scheduler))},Fl),Lr=(e(zl,Vi=je),zl.dispatch=function(n){n.subscriber.subscribeToProjection(n.result,n.value,n.index)},zl.prototype._next=function(n){var e=this.destination;if(e.closed)this._complete();else{var t=this.index++;if(this.active<this.concurrent){e.next(n);try{var i=(0,this.project)(n,t);this.scheduler?this.destination.add(this.scheduler.schedule(zl.dispatch,0,{subscriber:this,result:i,value:n,index:t})):this.subscribeToProjection(i,n,t)}catch(n){e.error(n)}}else this.buffer.push(n)}},zl.prototype.subscribeToProjection=function(n,e,t){this.active++,this.destination.add(E(this,n,e,t))},zl.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&this.destination.complete(),this.unsubscribe()},zl.prototype.notifyNext=function(n,e,t,i,o){this._next(e)},zl.prototype.notifyComplete=function(n){var e=this.buffer;this.destination.remove(n),this.active--,e&&0<e.length&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},zl),zr=(Ll.prototype.call=function(n,e){return e.subscribe(new Fr(n,this.callback))},Ll),Fr=(e(Ml,Ui=qn),Ml),$r=(Nl.prototype.call=function(n,e){return e.subscribe(new Rr(n,this.predicate,this.source,this.yieldIndex,this.thisArg))},Nl),Rr=(e(Al,Hi=qn),Al.prototype.notifyComplete=function(n){var e=this.destination;e.next(n),e.complete(),this.unsubscribe()},Al.prototype._next=function(n){var e=this.predicate,t=this.thisArg,i=this.index++;try{e.call(t||this,n,i,this.source)&&this.notifyComplete(this.yieldIndex?i:n)}catch(n){this.destination.error(n)}},Al.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},Al),jr=(Dl.prototype.call=function(n,e){return e.subscribe(new Zr(n))},Dl),Zr=(e(Ol,Bi=qn),Ol.prototype._next=function(n){},Ol),Br=(kl.prototype.call=function(n,e){return e.subscribe(new Hr(n))},kl),Hr=(e(El,Zi=qn),El.prototype.notifyComplete=function(n){var e=this.destination;e.next(n),e.complete()},El.prototype._next=function(n){this.notifyComplete(!1)},El.prototype._complete=function(){this.notifyComplete(!0)},El),Ur=(Pl.prototype.call=function(n,e){return e.subscribe(new Vr(n,this.total))},Pl),Vr=(e(Cl,ji=qn),Cl.prototype._next=function(n){var e=this.ring,t=this.total,i=this.count++;e.length<t?e.push(n):e[i%t]=n},Cl.prototype._complete=function(){var n=this.destination,e=this.count;if(0<e)for(var t=this.count>=this.total?this.total:this.count,i=this.ring,o=0;o<t;o++){var r=e++%t;n.next(i[r])}n.complete()},Cl),Wr=(Tl.prototype.call=function(n,e){return e.subscribe(new Yr(n,this.value))},Tl),Yr=(e(Il,Ri=qn),Il.prototype._next=function(n){this.destination.next(this.value)},Il),qr=(Sl.prototype.call=function(n,e){return e.subscribe(new Xr(n))},Sl),Xr=(e(xl,$i=qn),xl.prototype._next=function(n){this.destination.next(vt.createNext(n))},xl.prototype._error=function(n){var e=this.destination;e.next(vt.createError(n)),e.complete()},xl.prototype._complete=function(){var n=this.destination;n.next(vt.createComplete()),n.complete()},xl),Kr=(wl.prototype.call=function(n,e){return e.subscribe(new Gr(n,this.accumulator,this.seed,this.hasSeed))},wl),Gr=(e(yl,Fi=qn),Object.defineProperty(yl.prototype,"seed",{get:function(){return this._seed},set:function(n){this.hasSeed=!0,this._seed=n},enumerable:!0,configurable:!0}),yl.prototype._next=function(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)},yl.prototype._tryNext=function(n){var e,t=this.index++;try{e=this.accumulator(this.seed,n,t)}catch(n){this.destination.error(n)}this.seed=e,this.destination.next(e)},yl),Qr=(bl.prototype.call=function(n,e){return e.subscribe(new Jr(n,this.accumulator,this.seed,this.concurrent))},bl),Jr=(e(_l,zi=je),_l.prototype._next=function(n){if(this.active<this.concurrent){var e=this.index++,t=this.destination,i=void 0;try{i=(0,this.accumulator)(this.acc,n,e)}catch(n){return t.error(n)}this.active++,this._innerSub(i,n,e)}else this.buffer.push(n)},_l.prototype._innerSub=function(n,e,t){e=new jt(this,e,t),(t=this.destination).add(e),(n=E(this,n,void 0,void 0,e))!==e&&t.add(n)},_l.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},_l.prototype.notifyNext=function(n,e,t,i,o){n=this.destination,this.acc=e,this.hasValue=!0,n.next(e)},_l.prototype.notifyComplete=function(n){var e=this.buffer;this.destination.remove(n),this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},_l),ns=(gl.prototype.call=function(n,e){var t=this.selector,i=this.subjectFactory();return(n=t(i).subscribe(n)).add(e.subscribe(i)),n},gl),es=(vl.prototype.call=function(n,e){return e.subscribe(new ts(n,this.nextSources))},vl),ts=(e(ml,Li=je),ml.prototype.notifyError=function(n,e){this.subscribeToNextSource()},ml.prototype.notifyComplete=function(n){this.subscribeToNextSource()},ml.prototype._error=function(n){this.subscribeToNextSource(),this.unsubscribe()},ml.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},ml.prototype.subscribeToNextSource=function(){var n,e,t=this.nextSources.shift();t?(n=new jt(this,void 0,void 0),(e=this.destination).add(n),(t=E(this,t,void 0,void 0,n))!==n&&e.add(t)):this.destination.complete()},ml),is=(hl.prototype.call=function(n,e){return e.subscribe(new os(n))},hl),os=(e(fl,Mi=qn),fl.prototype._next=function(n){var e;this.hasPrev?e=[this.prev,n]:this.hasPrev=!0,this.prev=n,e&&this.destination.next(e)},fl),rs=(pl.prototype.call=function(n,e){return e.subscribe(new ss(n,this.count,this.source))},pl),ss=(e(dl,Ni=qn),dl.prototype.complete=function(){if(!this.isStopped){var n=this.source,e=this.count;if(0===e)return Ni.prototype.complete.call(this);-1<e&&(this.count=e-1),n.subscribe(this._unsubscribeAndRecycle())}},dl),as=(ul.prototype.call=function(n,e){return e.subscribe(new ls(n,this.notifier,e))},ul),ls=(e(cl,Ai=je),cl.prototype.notifyNext=function(n,e,t,i,o){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},cl.prototype.notifyComplete=function(n){if(!1===this.sourceIsBeingSubscribedTo)return Ai.prototype.complete.call(this)},cl.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return Ai.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},cl.prototype._unsubscribe=function(){var n=this.notifications,e=this.retriesSubscription;n&&(n.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},cl.prototype._unsubscribeAndRecycle=function(){var n=this._unsubscribe;return this._unsubscribe=null,Ai.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=n,this},cl.prototype.subscribeToRetries=function(){this.notifications=new ee;try{var n=(0,this.notifier)(this.notifications)}catch(n){return Ai.prototype.complete.call(this)}this.retries=n,this.retriesSubscription=E(this,n)},cl),cs=(ll.prototype.call=function(n,e){return e.subscribe(new us(n,this.count,this.source))},ll),us=(e(al,Di=qn),al.prototype.error=function(n){if(!this.isStopped){var e=this.source,t=this.count;if(0===t)return Di.prototype.error.call(this,n);-1<t&&(this.count=t-1),e.subscribe(this._unsubscribeAndRecycle())}},al),ds=(sl.prototype.call=function(n,e){return e.subscribe(new ps(n,this.notifier,this.source))},sl),ps=(e(rl,Oi=je),rl.prototype.error=function(n){if(!this.isStopped){var e=this.errors,t=this.retries,i=this.retriesSubscription;if(t)this.retriesSubscription=this.errors=null;else{e=new ee;try{t=(0,this.notifier)(e)}catch(n){return Oi.prototype.error.call(this,n)}i=E(this,t)}this._unsubscribeAndRecycle(),this.errors=e,this.retries=t,this.retriesSubscription=i,e.next(n)}},rl.prototype._unsubscribe=function(){var n=this.errors,e=this.retriesSubscription;n&&(n.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},rl.prototype.notifyNext=function(n,e,t,i,o){n=this._unsubscribe,this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=n,this.source.subscribe(this)},rl),fs=(ol.prototype.call=function(n,e){return n=new hs(n),(e=e.subscribe(n)).add(E(n,this.notifier)),e},ol),hs=(e(il,ki=je),il.prototype._next=function(n){this.value=n,this.hasValue=!0},il.prototype.notifyNext=function(n,e,t,i,o){this.emitValue()},il.prototype.notifyComplete=function(){this.emitValue()},il.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},il),ms=(tl.prototype.call=function(n,e){return e.subscribe(new vs(n,this.period,this.scheduler))},tl),vs=(e(el,Ei=qn),el.prototype._next=function(n){this.lastValue=n,this.hasValue=!0},el.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},el),gs=(nl.prototype.call=function(n,e){return e.subscribe(new _s(n,this.compareTo,this.comparator))},nl),_s=(e(Ja,Pi=qn),Ja.prototype._next=function(n){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(n),this.checkValues())},Ja.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},Ja.prototype.checkValues=function(){for(var n=this._a,e=this._b,t=this.comparator;0<n.length&&0<e.length;){var i=n.shift(),o=e.shift(),r=!1;try{r=t?t(i,o):i===o}catch(n){this.destination.error(n)}r||this.emit(!1)}},Ja.prototype.emit=function(n){var e=this.destination;e.next(n),e.complete()},Ja.prototype.nextB=function(n){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(n),this.checkValues())},Ja.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},Ja),bs=(e(Qa,Ci=qn),Qa.prototype._next=function(n){this.parent.nextB(n)},Qa.prototype._error=function(n){this.parent.error(n),this.unsubscribe()},Qa.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},Qa),ys=(Ga.prototype.call=function(n,e){return e.subscribe(new ws(n,this.predicate,this.source))},Ga),ws=(e(Ka,Ti=qn),Ka.prototype.applySingleValue=function(n){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=n)},Ka.prototype._next=function(n){var e=this.index++;this.predicate?this.tryNext(n,e):this.applySingleValue(n)},Ka.prototype.tryNext=function(n,e){try{this.predicate(n,e,this.source)&&this.applySingleValue(n)}catch(n){this.destination.error(n)}},Ka.prototype._complete=function(){var n=this.destination;0<this.index?(n.next(this.seenValue?this.singleValue:void 0),n.complete()):n.error(new zt)},Ka),xs=(Xa.prototype.call=function(n,e){return e.subscribe(new Ss(n,this.total))},Xa),Ss=(e(qa,Ii=qn),qa.prototype._next=function(n){++this.count>this.total&&this.destination.next(n)},qa),Is=(Ya.prototype.call=function(n,e){return 0===this._skipCount?e.subscribe(new qn(n)):e.subscribe(new Ts(n,this._skipCount))},Ya),Ts=(e(Wa,Si=qn),Wa.prototype._next=function(n){var e,t=this._skipCount,i=this._count++;i<t?this._ring[i]=n:(t=i%t,e=(i=this._ring)[t],i[t]=n,this.destination.next(e))},Wa),Cs=(Va.prototype.call=function(n,e){return e.subscribe(new Ps(n,this.notifier))},Va),Ps=(e(Ua,xi=je),Ua.prototype._next=function(n){this.hasValue&&xi.prototype._next.call(this,n)},Ua.prototype.notifyNext=function(n,e,t,i,o){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},Ua.prototype.notifyComplete=function(){},Ua),Es=(Ha.prototype.call=function(n,e){return e.subscribe(new ks(n,this.predicate))},Ha),ks=(e(Ba,wi=qn),Ba.prototype._next=function(n){var e=this.destination;this.skipping&&this.tryCallPredicate(n),this.skipping||e.next(n)},Ba.prototype.tryCallPredicate=function(n){try{this.skipping=!!this.predicate(n,this.index++)}catch(n){this.destination.error(n)}},Ba),Os=(e(Za,yi=Gn),Za.create=function(n,e,t){return new Za(n,e=void 0===e?0:e,t=void 0===t?kt:t)},Za.dispatch=function(n){return this.add(n.source.subscribe(n.subscriber))},Za.prototype._subscribe=function(n){return this.scheduler.schedule(Za.dispatch,this.delayTime,{source:this.source,subscriber:n})},Za),Ds=(ja.prototype.call=function(n,e){return new Os(e,this.delay,this.scheduler).subscribe(n)},ja),As=(Ra.prototype.call=function(n,e){return e.subscribe(new Ns(n,this.project))},Ra),Ns=(e($a,bi=je),$a.prototype._next=function(n){var e,t=this.index++;try{e=this.project(n,t)}catch(n){return void this.destination.error(n)}this._innerSub(e,n,t)},$a.prototype._innerSub=function(n,e,t){var i=this.innerSubscription;i&&i.unsubscribe(),e=new jt(this,e,t),(t=this.destination).add(e),this.innerSubscription=E(this,n,void 0,void 0,e),this.innerSubscription!==e&&t.add(this.innerSubscription)},$a.prototype._complete=function(){var n=this.innerSubscription;n&&!n.closed||bi.prototype._complete.call(this),this.unsubscribe()},$a.prototype._unsubscribe=function(){this.innerSubscription=null},$a.prototype.notifyComplete=function(n){this.destination.remove(n),this.innerSubscription=null,this.isStopped&&bi.prototype._complete.call(this)},$a.prototype.notifyNext=function(n,e,t,i,o){this.destination.next(e)},$a),Ms=(Fa.prototype.call=function(n,e){var t=E(n=new Ls(n),this.notifier);return t&&!n.seenValue?(n.add(t),e.subscribe(n)):n},Fa),Ls=(e(za,_i=je),za.prototype.notifyNext=function(n,e,t,i,o){this.seenValue=!0,this.complete()},za.prototype.notifyComplete=function(){},za),zs=(La.prototype.call=function(n,e){return e.subscribe(new Fs(n,this.predicate,this.inclusive))},La),Fs=(e(Ma,gi=qn),Ma.prototype._next=function(n){var e,t=this.destination;try{e=this.predicate(n,this.index++)}catch(n){return void t.error(n)}this.nextOrComplete(n,e)},Ma.prototype.nextOrComplete=function(n,e){var t=this.destination;e?t.next(n):(this.inclusive&&t.next(n),t.complete())},Ma),$s=(Na.prototype.call=function(n,e){return e.subscribe(new Rs(n,this.nextOrObserver,this.error,this.complete))},Na),Rs=(e(Aa,vi=qn),Aa.prototype._next=function(n){try{this._tapNext.call(this._context,n)}catch(n){return void this.destination.error(n)}this.destination.next(n)},Aa.prototype._error=function(n){try{this._tapError.call(this._context,n)}catch(n){return void this.destination.error(n)}this.destination.error(n)},Aa.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(n){return void this.destination.error(n)}return this.destination.complete()},Aa),js={leading:!0,trailing:!1},Zs=(Da.prototype.call=function(n,e){return e.subscribe(new Bs(n,this.durationSelector,this.leading,this.trailing))},Da),Bs=(e(Oa,mi=je),Oa.prototype._next=function(n){this._hasValue=!0,this._sendValue=n,this._throttled||(this._leading?this.send():this.throttle(n))},Oa.prototype.send=function(){var n=this._sendValue;this._hasValue&&(this.destination.next(n),this.throttle(n)),this._hasValue=!1,this._sendValue=null},Oa.prototype.throttle=function(n){(n=this.tryDurationSelector(n))&&this.add(this._throttled=E(this,n))},Oa.prototype.tryDurationSelector=function(n){try{return this.durationSelector(n)}catch(n){return this.destination.error(n),null}},Oa.prototype.throttlingDone=function(){var n=this._throttled,e=this._trailing;n&&n.unsubscribe(),this._throttled=null,e&&this.send()},Oa.prototype.notifyNext=function(n,e,t,i,o){this.throttlingDone()},Oa.prototype.notifyComplete=function(){this.throttlingDone()},Oa),Hs=(ka.prototype.call=function(n,e){return e.subscribe(new Us(n,this.duration,this.scheduler,this.leading,this.trailing))},ka),Us=(e(Ea,hi=qn),Ea.prototype._next=function(n){this.throttled?this.trailing&&(this._trailingValue=n,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(mn,this.duration,{subscriber:this})),this.leading?this.destination.next(n):this.trailing&&(this._trailingValue=n,this._hasTrailingValue=!0))},Ea.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},Ea.prototype.clearThrottle=function(){var n=this.throttled;n&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),n.unsubscribe(),this.remove(n),this.throttled=null)},Ea),Vs=function(n,e){this.value=n,this.interval=e},Ws=(Pa.prototype.call=function(n,e){return e.subscribe(new Ys(n,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},Pa),Ys=(e(Ca,fi=je),Ca.dispatchTimeout=function(n){var e=n.withObservable;n._unsubscribeAndRecycle(),n.add(E(n,e))},Ca.prototype.scheduleTimeout=function(){var n=this.action;n?this.action=n.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(Ca.dispatchTimeout,this.waitFor,this))},Ca.prototype._next=function(n){this.absoluteTimeout||this.scheduleTimeout(),fi.prototype._next.call(this,n)},Ca.prototype._unsubscribe=function(){this.withObservable=this.scheduler=this.action=null},Ca),qs=function(n,e){this.value=n,this.timestamp=e},Xs=(Ta.prototype.call=function(n,e){return n=new Ks(n),(e=e.subscribe(n)).closed||n.add(E(n,this.windowBoundaries)),e},Ta),Ks=(e(Ia,pi=je),Ia.prototype.notifyNext=function(n,e,t,i,o){this.openWindow()},Ia.prototype.notifyError=function(n,e){this._error(n)},Ia.prototype.notifyComplete=function(n){this._complete()},Ia.prototype._next=function(n){this.window.next(n)},Ia.prototype._error=function(n){this.window.error(n),this.destination.error(n)},Ia.prototype._complete=function(){this.window.complete(),this.destination.complete()},Ia.prototype._unsubscribe=function(){this.window=null},Ia.prototype.openWindow=function(){(n=this.window)&&n.complete();var n=this.destination,e=this.window=new ee;n.next(e)},Ia),Gs=(Sa.prototype.call=function(n,e){return e.subscribe(new Qs(n,this.windowSize,this.startWindowEvery))},Sa),Qs=(e(xa,di=qn),xa.prototype._next=function(n){for(var e=0<this.startWindowEvery?this.startWindowEvery:this.windowSize,t=this.destination,i=this.windowSize,o=this.windows,r=o.length,s=0;s<r&&!this.closed;s++)o[s].next(n);0<=(n=this.count-i+1)&&0==n%e&&!this.closed&&o.shift().complete(),0!=++this.count%e||this.closed||(e=new ee,o.push(e),t.next(e))},xa.prototype._error=function(n){var e=this.windows;if(e)for(;0<e.length&&!this.closed;)e.shift().error(n);this.destination.error(n)},xa.prototype._complete=function(){var n=this.windows;if(n)for(;0<n.length&&!this.closed;)n.shift().complete();this.destination.complete()},xa.prototype._unsubscribe=function(){this.count=0,this.windows=null},xa),Js=(wa.prototype.call=function(n,e){return e.subscribe(new ea(n,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},wa),na=(e(ya,ui=ee),ya.prototype.next=function(n){this._numberOfNextedValues++,ui.prototype.next.call(this,n)},Object.defineProperty(ya.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),ya),ea=(e(ba,ci=qn),ba.prototype._next=function(n){for(var e=this.windows,t=e.length,i=0;i<t;i++){var o=e[i];o.closed||(o.next(n),o.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(o))}},ba.prototype._error=function(n){for(var e=this.windows;0<e.length;)e.shift().error(n);this.destination.error(n)},ba.prototype._complete=function(){for(var n=this.windows;0<n.length;){var e=n.shift();e.closed||e.complete()}this.destination.complete()},ba.prototype.openWindow=function(){var n=new na;return this.windows.push(n),this.destination.next(n),n},ba.prototype.closeWindow=function(n){n.complete();var e=this.windows;e.splice(e.indexOf(n),1)},ba),ta=(_a.prototype.call=function(n,e){return e.subscribe(new ia(n,this.openings,this.closingSelector))},_a),ia=(e(ga,li=je),ga.prototype._next=function(n){var e=this.contexts;if(e)for(var t=e.length,i=0;i<t;i++)e[i].window.next(n)},ga.prototype._error=function(n){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,i=-1;++i<t;){var o=e[i];o.window.error(n),o.subscription.unsubscribe()}li.prototype._error.call(this,n)},ga.prototype._complete=function(){var n=this.contexts;if(this.contexts=null,n)for(var e=n.length,t=-1;++t<e;){var i=n[t];i.window.complete(),i.subscription.unsubscribe()}li.prototype._complete.call(this)},ga.prototype._unsubscribe=function(){var n=this.contexts;if(this.contexts=null,n)for(var e=n.length,t=-1;++t<e;){var i=n[t];i.window.unsubscribe(),i.subscription.unsubscribe()}},ga.prototype.notifyNext=function(n,e,t,i,o){if(n===this.openings){n=void 0;try{var r=this.closingSelector;n=r(e)}catch(n){return this.error(n)}e=new ee,r=new Wn,this.contexts.push(t={window:e,subscription:r}),(n=E(this,n,t)).closed?this.closeWindow(this.contexts.length-1):(n.context=t,r.add(n)),this.destination.next(e)}else this.closeWindow(this.contexts.indexOf(n))},ga.prototype.notifyError=function(n){this.error(n)},ga.prototype.notifyComplete=function(n){n!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(n.context))},ga.prototype.closeWindow=function(n){var e,t,i;-1!==n&&(t=(i=(e=this.contexts)[n]).window,i=i.subscription,e.splice(n,1),t.complete(),i.unsubscribe())},ga),oa=(va.prototype.call=function(n,e){return e.subscribe(new ra(n,this.closingSelector))},va),ra=(e(ma,ai=je),ma.prototype.notifyNext=function(n,e,t,i,o){this.openWindow(o)},ma.prototype.notifyError=function(n,e){this._error(n)},ma.prototype.notifyComplete=function(n){this.openWindow(n)},ma.prototype._next=function(n){this.window.next(n)},ma.prototype._error=function(n){this.window.error(n),this.destination.error(n),this.unsubscribeClosingNotification()},ma.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},ma.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},ma.prototype.openWindow=function(n){(n=void 0===n?null:n)&&(this.remove(n),n.unsubscribe()),(n=this.window)&&n.complete(),n=this.window=new ee,this.destination.next(n);try{var e=(0,this.closingSelector)()}catch(n){return this.destination.error(n),void this.window.error(n)}this.add(this.closingNotification=E(this,e))},ma),sa=(ha.prototype.call=function(n,e){return e.subscribe(new aa(n,this.observables,this.project))},ha),aa=(e(fa,si=je),fa.prototype.notifyNext=function(n,e,t,i,o){this.values[t]=e,0<(n=this.toRespond).length&&(-1!==(t=n.indexOf(t))&&n.splice(t,1))},fa.prototype.notifyComplete=function(){},fa.prototype._next=function(n){0===this.toRespond.length&&(n=[n].concat(this.values),this.project?this._tryProject(n):this.destination.next(n))},fa.prototype._tryProject=function(n){var e;try{e=this.project.apply(this,n)}catch(n){return void this.destination.error(n)}this.destination.next(e)},fa),la=Object.freeze({audit:K,auditTime:function(n,e){return void 0===e&&(e=Ot),K(function(){return Y(n,e)})},buffer:function(e){return function(n){return n.lift(new Ho(e))}},bufferCount:function(e,t){return void 0===t&&(t=null),function(n){return n.lift(new Vo(e,t))}},bufferTime:function(e){var n=arguments.length,t=Ot;f(arguments[arguments.length-1])&&(t=arguments[arguments.length-1],n--);var i=null;2<=n&&(i=arguments[1]);var o=Number.POSITIVE_INFINITY;return 3<=n&&(o=arguments[2]),function(n){return n.lift(new qo(e,i,o,t))}},bufferToggle:function(e,t){return function(n){return n.lift(new Go(e,t))}},bufferWhen:function(e){return function(n){return n.lift(new Jo(e))}},catchError:function(t){return function(n){var e=new er(t);return n=n.lift(e),e.caught=n}},combineAll:function(e){return function(n){return n.lift(new Po(e))}},combineLatest:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=null;return"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&Un(e[0])&&(e=e[0].slice()),function(n){return n.lift.call(O([n].concat(e)),new Po(t))}},concat:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(n){return n.lift.call(M.apply(void 0,[n].concat(e)))}},concatAll:N,concatMap:nn,concatMapTo:function(n,e){return nn(function(){return n},e)},count:function(e){return function(n){return n.lift(new ir(e,n))}},debounce:function(e){return function(n){return n.lift(new rr(e))}},debounceTime:function(e,t){return void 0===t&&(t=Ot),function(n){return n.lift(new ar(e,t))}},defaultIfEmpty:tn,delay:function(n,e){void 0===e&&(e=Ot);var t=n instanceof Date&&!isNaN(+n)?+n-e.now():Math.abs(n);return function(n){return n.lift(new dr(t,e))}},delayWhen:function(e,t){return t?function(n){return new vr(n,t).lift(new hr(e))}:function(n){return n.lift(new hr(e))}},dematerialize:function(){return function(n){return n.lift(new _r)}},distinct:function(e,t){return function(n){return n.lift(new yr(e,t))}},distinctUntilChanged:on,distinctUntilKeyChanged:function(t,i){return on(function(n,e){return i?i(n[t],e[t]):n[t]===e[t]})},elementAt:function(t,e){if(t<0)throw new Lt;var i=2<=arguments.length;return function(n){return n.pipe(U(function(n,e){return e===t}),an(1),i?tn(e):rn(function(){return new Lt}))}},endWith:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(n){return M(n,v.apply(void 0,e))}},every:function(e,t){return function(n){return n.lift(new Er(e,t,n))}},exhaust:function(){return function(n){return n.lift(new Or)}},exhaustMap:function e(o,r){return r?function(n){return n.pipe(e(function(t,i){return O(o(t,i)).pipe(w(function(n,e){return r(t,n,i,e)}))}))}:function(n){return n.lift(new Ar(o))}},expand:function(e,t,i){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===i&&(i=void 0),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(n){return n.lift(new Mr(e,t,i))}},filter:U,finalize:function(e){return function(n){return n.lift(new zr(e))}},find:function(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(n){return n.lift(new $r(e,n,!1,t))}},findIndex:function(e,t){return function(n){return n.lift(new $r(e,n,!0,t))}},first:function(i,n){var e=2<=arguments.length;return function(t){return t.pipe(i?U(function(n,e){return i(n,e,t)}):y,an(1),e?tn(n):rn(function(){return new zt}))}},groupBy:function(e,t,i,o){return function(n){return n.lift(new Ne(e,t,i,o))}},ignoreElements:function(){return function(n){return n.lift(new jr)}},isEmpty:function(){return function(n){return n.lift(new Br)}},last:function(i,n){var e=2<=arguments.length;return function(t){return t.pipe(i?U(function(n,e){return i(n,e,t)}):y,ln(1),e?tn(n):rn(function(){return new zt}))}},map:w,mapTo:function(e){return function(n){return n.lift(new Wr(e))}},materialize:function(){return function(n){return n.lift(new qr)}},max:function(t){return un("function"==typeof t?function(n,e){return 0<t(n,e)?n:e}:function(n,e){return e<n?n:e})},merge:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(n){return n.lift.call(j.apply(void 0,[n].concat(e)))}},mergeAll:A,mergeMap:D,flatMap:D,mergeMapTo:function(n,e,t){return void 0===t&&(t=Number.POSITIVE_INFINITY),"function"==typeof e?D(function(){return n},e,t):D(function(){return n},t="number"==typeof e?e:t)},mergeScan:function(e,t,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),function(n){return n.lift(new Qr(e,t,i))}},min:function(t){return un("function"==typeof t?function(n,e){return t(n,e)<0?n:e}:function(n,e){return n<e?n:e})},multicast:dn,observeOn:function(e,t){return void 0===t&&(t=0),function(n){return n.lift(new gt(e,t))}},onErrorResumeNext:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Un(e[0])&&(e=e[0]),function(n){return n.lift(new es(e))}},pairwise:function(){return function(n){return n.lift(new is)}},partition:function(e,t){return function(n){return[U(e,t)(n),U(H(e,t))(n)]}},pluck:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=e.length;if(0===o)throw Error("list of properties cannot be empty.");return function(n){return w((t=e,i=o,function(n){var e=n;for(n=0;n<i;n++)if(void 0===(e=e[t[n]]))return;return e}))(n);var t,i}},publish:function(n){return n?dn(function(){return new ee},n):dn(new ee)},publishBehavior:function(e){return function(n){return dn(new $e(e))(n)}},publishLast:function(){return function(n){return dn(new xt)(n)}},publishReplay:function(n,e,t,i){var o="function"==typeof t?t:void 0,r=new yt(n,e,i=t&&"function"!=typeof t?t:i);return function(n){return dn(function(){return r},o)(n)}},race:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(n){return 1===e.length&&Un(e[0])&&(e=e[0]),n.lift.call(V.apply(void 0,[n].concat(e)))}},reduce:un,repeat:function(e){return void 0===e&&(e=-1),function(n){return 0===e?p():e<0?n.lift(new rs(-1,n)):n.lift(new rs(e-1,n))}},repeatWhen:function(e){return function(n){return n.lift(new as(e))}},retry:function(e){return void 0===e&&(e=-1),function(n){return n.lift(new cs(e,n))}},retryWhen:function(e){return function(n){return n.lift(new ds(e,n))}},refCount:d,sample:function(e){return function(n){return n.lift(new fs(e))}},sampleTime:function(e,t){return void 0===t&&(t=Ot),function(n){return n.lift(new ms(e,t))}},scan:cn,sequenceEqual:function(e,t){return function(n){return n.lift(new gs(e,t))}},share:function(){return function(n){return d()(dn(fn)(n))}},shareReplay:function(n,e,t){var d=n&&"object"===du(n)?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t};return function(n){return n.lift((n=(e=d).bufferSize,o=void 0===n?Number.POSITIVE_INFINITY:n,r=void 0===(n=e.windowTime)?Number.POSITIVE_INFINITY:n,s=e.refCount,a=e.scheduler,l=0,u=c=!1,function(n){l++,t&&!c||(c=!1,t=new yt(o,r,a),i=n.subscribe({next:function(n){t.next(n)},error:function(n){c=!0,t.error(n)},complete:function(){u=!0,i=void 0,t.complete()}}));var e=t.subscribe(this);this.add(function(){l--,e.unsubscribe(),i&&!u&&s&&0===l&&(i.unsubscribe(),t=i=void 0)})}));var e,t,i,o,r,s,a,l,c,u}},single:function(e){return function(n){return n.lift(new ys(e,n))}},skip:function(e){return function(n){return n.lift(new xs(e))}},skipLast:function(e){return function(n){return n.lift(new Is(e))}},skipUntil:function(e){return function(n){return n.lift(new Cs(e))}},skipWhile:function(e){return function(n){return n.lift(new Es(e))}},startWith:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[e.length-1];return f(t)?(e.pop(),function(n){return M(e,n,t)}):function(n){return M(e,n)}},subscribeOn:function(e,t){return void 0===t&&(t=0),function(n){return n.lift(new Ds(e,t))}},switchAll:function(){return hn(y)},switchMap:hn,switchMapTo:function(n,e){return e?hn(function(){return n},e):hn(function(){return n})},take:an,takeLast:ln,takeUntil:function(e){return function(n){return n.lift(new Ms(e))}},takeWhile:function(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new zs(e,t))}},tap:function(e,t,i){return function(n){return n.lift(new $s(e,t,i))}},throttle:function(e,t){return void 0===t&&(t=js),function(n){return n.lift(new Zs(e,t.leading,t.trailing))}},throttleTime:function(e,t,i){return void 0===t&&(t=Ot),void 0===i&&(i=js),function(n){return n.lift(new Hs(e,t,i.leading,i.trailing))}},throwIfEmpty:rn,timeInterval:function(t){return void 0===t&&(t=Ot),function(n){return L(function(){return n.pipe(cn(function(n,e){return n=n.current,{value:e,current:t.now(),last:n}},{current:t.now(),value:void 0,last:void 0}),w(function(n){return new Vs(n.value,n.current-n.last)}))})}},timeout:function(n,e){return void 0===e&&(e=Ot),vn(n,g(new Ft),e)},timeoutWith:vn,timestamp:function(e){return void 0===e&&(e=Ot),w(function(n){return new qs(n,e.now())})},toArray:function(){return un(gn,[])},window:function(e){return function(n){return n.lift(new Xs(e))}},windowCount:function(e,t){return void 0===t&&(t=0),function(n){return n.lift(new Gs(e,t))}},windowTime:function(e,n,t,i){var o=Ot,r=null,s=Number.POSITIVE_INFINITY;return f(i)&&(o=i),f(t)?o=t:$(t)&&(s=t),f(n)?o=n:$(n)&&(r=n),function(n){return n.lift(new Js(e,r,s,o))}},windowToggle:function(e,t){return function(n){return n.lift(new ta(e,t))}},windowWhen:function(e){return function(n){return n.lift(new oa(e))}},withLatestFrom:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){var e;return"function"==typeof t[t.length-1]&&(e=t.pop()),n.lift(new sa(t,e))}},zip:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(n){return n.lift.call(X.apply(void 0,[n].concat(e)))}},zipAll:function(e){return function(n){return n.lift(new zo(e))}}}),ca=function(n,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.subscribedFrame=n,this.unsubscribedFrame=e},Et=(pa.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new ca(this.scheduler.now())),this.subscriptions.length-1},pa.prototype.logUnsubscribedFrame=function(n){var e=this.subscriptions;e[n]=new ca(e[n].subscribedFrame,this.scheduler.now())},pa),ua=(e(da,ri=Gn),da.prototype.scheduleMessages=function(n){for(var e=this.messages.length,t=0;t<e;t++){var i=this.messages[t];n.add(this.scheduler.schedule(function(n){n.message.notification.observe(n.subscriber)},i.frame,{message:i,subscriber:n}))}},da);function da(n,e){var t=ri.call(this,function(n){var e=this,t=e.logSubscribedFrame(),i=new Wn;return i.add(new Wn(function(){e.logUnsubscribedFrame(t)})),e.scheduleMessages(n),i})||this;return t.messages=n,t.subscriptions=[],t.scheduler=e,t}function pa(){this.subscriptions=[]}function fa(n,e,t){(n=si.call(this,n)||this).observables=e,n.project=t,n.toRespond=[],t=e.length,n.values=Array(t);for(var i=0;i<t;i++)n.toRespond.push(i);for(i=0;i<t;i++){var o=e[i];n.add(E(n,o,o,i))}return n}function ha(n,e){this.observables=n,this.project=e}function ma(n,e){var t=ai.call(this,n)||this;return t.destination=n,t.closingSelector=e,t.openWindow(),t}function va(n){this.closingSelector=n}function ga(n,e,t){return(n=li.call(this,n)||this).openings=e,n.closingSelector=t,n.contexts=[],n.add(n.openSubscription=E(n,e,e)),n}function _a(n,e){this.openings=n,this.closingSelector=e}function ba(n,e,t,i,o){var r=ci.call(this,n)||this;return r.destination=n,r.windowTimeSpan=e,r.windowCreationInterval=t,r.maxWindowSize=i,r.scheduler=o,r.windows=[],n=r.openWindow(),null!==t&&0<=t?(i={windowTimeSpan:e,windowCreationInterval:t,subscriber:r,scheduler:o},r.add(o.schedule(yn,e,{subscriber:r,window:n,context:null})),r.add(o.schedule(bn,t,i))):r.add(o.schedule(_n,e,{subscriber:r,window:n,windowTimeSpan:e})),r}function ya(){var n=null!==ui&&ui.apply(this,arguments)||this;return n._numberOfNextedValues=0,n}function wa(n,e,t,i){this.windowTimeSpan=n,this.windowCreationInterval=e,this.maxWindowSize=t,this.scheduler=i}function xa(n,e,t){var i=di.call(this,n)||this;return i.destination=n,i.windowSize=e,i.startWindowEvery=t,i.windows=[new ee],i.count=0,n.next(i.windows[0]),i}function Sa(n,e){this.windowSize=n,this.startWindowEvery=e}function Ia(n){var e=pi.call(this,n)||this;return e.window=new ee,n.next(e.window),e}function Ta(n){this.windowBoundaries=n}function Ca(n,e,t,i,o){return(n=fi.call(this,n)||this).absoluteTimeout=e,n.waitFor=t,n.withObservable=i,n.scheduler=o,n.action=null,n.scheduleTimeout(),n}function Pa(n,e,t,i){this.waitFor=n,this.absoluteTimeout=e,this.withObservable=t,this.scheduler=i}function Ea(n,e,t,i,o){return(n=hi.call(this,n)||this).duration=e,n.scheduler=t,n.leading=i,n.trailing=o,n._hasTrailingValue=!1,n._trailingValue=null,n}function ka(n,e,t,i){this.duration=n,this.scheduler=e,this.leading=t,this.trailing=i}function Oa(n,e,t,i){var o=mi.call(this,n)||this;return o.destination=n,o.durationSelector=e,o._leading=t,o._trailing=i,o._hasValue=!1,o}function Da(n,e,t){this.durationSelector=n,this.leading=e,this.trailing=t}function Aa(n,e,t,i){return(n=vi.call(this,n)||this)._tapNext=o,n._tapError=o,n._tapComplete=o,n._tapError=t||o,n._tapComplete=i||o,s(e)?(n._context=n)._tapNext=e:e&&(n._context=e,n._tapNext=e.next||o,n._tapError=e.error||o,n._tapComplete=e.complete||o),n}function Na(n,e,t){this.nextOrObserver=n,this.error=e,this.complete=t}function Ma(n,e,t){return(n=gi.call(this,n)||this).predicate=e,n.inclusive=t,n.index=0,n}function La(n,e){this.predicate=n,this.inclusive=e}function za(n){return(n=_i.call(this,n)||this).seenValue=!1,n}function Fa(n){this.notifier=n}function $a(n,e){return(n=bi.call(this,n)||this).project=e,n.index=0,n}function Ra(n){this.project=n}function ja(n,e){this.scheduler=n,this.delay=e}function Za(n,e,t){void 0===e&&(e=0),void 0===t&&(t=kt);var i=yi.call(this)||this;return i.source=n,i.delayTime=e,i.scheduler=t,(!$(e)||e<0)&&(i.delayTime=0),t&&"function"==typeof t.schedule||(i.scheduler=kt),i}function Ba(n,e){return(n=wi.call(this,n)||this).predicate=e,n.skipping=!0,n.index=0,n}function Ha(n){this.predicate=n}function Ua(n,e){(n=xi.call(this,n)||this).hasValue=!1;var t=new jt(n,void 0,void 0);return n.add(t),n.innerSubscription=t,(e=E(n,e,void 0,void 0,t))!==t&&(n.add(e),n.innerSubscription=e),n}function Va(n){this.notifier=n}function Wa(n,e){return(n=Si.call(this,n)||this)._skipCount=e,n._count=0,n._ring=Array(e),n}function Ya(n){if(this._skipCount=n,this._skipCount<0)throw new Lt}function qa(n,e){return(n=Ii.call(this,n)||this).total=e,n.count=0,n}function Xa(n){this.total=n}function Ka(n,e,t){return(n=Ti.call(this,n)||this).predicate=e,n.source=t,n.seenValue=!1,n.index=0,n}function Ga(n,e){this.predicate=n,this.source=e}function Qa(n,e){return(n=Ci.call(this,n)||this).parent=e,n}function Ja(n,e,t){var i=Pi.call(this,n)||this;return i.compareTo=e,i.comparator=t,i._a=[],i._b=[],i._oneComplete=!1,i.destination.add(e.subscribe(new bs(n,i))),i}function nl(n,e){this.compareTo=n,this.comparator=e}function el(n,e,t){return(n=Ei.call(this,n)||this).period=e,n.scheduler=t,n.hasValue=!1,n.add(t.schedule(pn,e,{subscriber:n,period:e})),n}function tl(n,e){this.period=n,this.scheduler=e}function il(){var n=null!==ki&&ki.apply(this,arguments)||this;return n.hasValue=!1,n}function ol(n){this.notifier=n}function rl(n,e,t){return(n=Oi.call(this,n)||this).notifier=e,n.source=t,n}function sl(n,e){this.notifier=n,this.source=e}function al(n,e,t){return(n=Di.call(this,n)||this).count=e,n.source=t,n}function ll(n,e){this.count=n,this.source=e}function cl(n,e,t){return(n=Ai.call(this,n)||this).notifier=e,n.source=t,n.sourceIsBeingSubscribedTo=!0,n}function ul(n){this.notifier=n}function dl(n,e,t){return(n=Ni.call(this,n)||this).count=e,n.source=t,n}function pl(n,e){this.count=n,this.source=e}function fl(n){return(n=Mi.call(this,n)||this).hasPrev=!1,n}function hl(){}function ml(n,e){var t=Li.call(this,n)||this;return t.destination=n,t.nextSources=e,t}function vl(n){this.nextSources=n}function gl(n,e){this.subjectFactory=n,this.selector=e}function _l(n,e,t,i){return(n=zi.call(this,n)||this).accumulator=e,n.acc=t,n.concurrent=i,n.hasValue=!1,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}function bl(n,e,t){this.accumulator=n,this.seed=e,this.concurrent=t}function yl(n,e,t,i){return(n=Fi.call(this,n)||this).accumulator=e,n._seed=t,n.hasSeed=i,n.index=0,n}function wl(n,e,t){void 0===t&&(t=!1),this.accumulator=n,this.seed=e,this.hasSeed=t}function xl(n){return $i.call(this,n)||this}function Sl(){}function Il(n,e){return(n=Ri.call(this,n)||this).value=e,n}function Tl(n){this.value=n}function Cl(n,e){return(n=ji.call(this,n)||this).total=e,n.ring=[],n.count=0,n}function Pl(n){if(this.total=n,this.total<0)throw new Lt}function El(n){return Zi.call(this,n)||this}function kl(){}function Ol(){return null!==Bi&&Bi.apply(this,arguments)||this}function Dl(){}function Al(n,e,t,i,o){return(n=Hi.call(this,n)||this).predicate=e,n.source=t,n.yieldIndex=i,n.thisArg=o,n.index=0,n}function Nl(n,e,t,i){this.predicate=n,this.source=e,this.yieldIndex=t,this.thisArg=i}function Ml(n,e){return(n=Ui.call(this,n)||this).add(new Wn(e)),n}function Ll(n){this.callback=n}function zl(n,e,t,i){return(n=Vi.call(this,n)||this).project=e,n.concurrent=t,n.scheduler=i,n.index=0,n.active=0,n.hasCompleted=!1,t<Number.POSITIVE_INFINITY&&(n.buffer=[]),n}function Fl(n,e,t){this.project=n,this.concurrent=e,this.scheduler=t}function $l(n,e){return(n=Wi.call(this,n)||this).project=e,n.hasSubscription=!1,n.hasCompleted=!1,n.index=0,n}function Rl(n){this.project=n}function jl(n){return(n=Yi.call(this,n)||this).hasCompleted=!1,n.hasSubscription=!1,n}function Zl(){}function Bl(n,e,t,i){return(n=qi.call(this,n)||this).predicate=e,n.thisArg=t,n.source=i,n.index=0,n.thisArg=t||n,n}function Hl(n,e,t){this.predicate=n,this.thisArg=e,this.source=t}function Ul(n,e){return(n=Xi.call(this,n)||this).total=e,n.count=0,n}function Vl(n){if(this.total=n,this.total<0)throw new Lt}function Wl(n,e){return(n=Ki.call(this,n)||this).errorFactory=e,n.hasValue=!1,n}function Yl(n){this.errorFactory=n}function ql(n,e,t){return(n=Gi.call(this,n)||this).keySelector=t,n.hasKey=!1,"function"==typeof e&&(n.compare=e),n}function Xl(n,e){this.compare=n,this.keySelector=e}function Kl(n,e,t){return(n=Qi.call(this,n)||this).keySelector=e,n.values=new Set,t&&n.add(E(n,t)),n}function Gl(n,e){this.keySelector=n,this.flushes=e}function Ql(n){return Ji.call(this,n)||this}function Jl(){}function nc(n,e){var t=no.call(this)||this;return t.parent=n,t.source=e,t.sourceSubscribed=!1,t}function ec(n,e){var t=eo.call(this)||this;return t.source=n,t.subscriptionDelay=e,t}function tc(n,e){return(n=to.call(this,n)||this).delayDurationSelector=e,n.completed=!1,n.delayNotifierSubscriptions=[],n.index=0,n}function ic(n){this.delayDurationSelector=n}function oc(n,e,t){return(n=io.call(this,n)||this).delay=e,n.scheduler=t,n.queue=[],n.active=!1,n.errored=!1,n}function rc(n,e){this.delay=n,this.scheduler=e}function sc(n,e){return(n=oo.call(this,n)||this).defaultValue=e,n.isEmpty=!0,n}function ac(n){this.defaultValue=n}function lc(n,e,t){return(n=ro.call(this,n)||this).dueTime=e,n.scheduler=t,n.debouncedSubscription=null,n.lastValue=null,n.hasValue=!1,n}function cc(n,e){this.dueTime=n,this.scheduler=e}function uc(n,e){return(n=so.call(this,n)||this).durationSelector=e,n.hasValue=!1,n.durationSubscription=null,n}function dc(n){this.durationSelector=n}function pc(n,e,t){return(n=ao.call(this,n)||this).predicate=e,n.source=t,n.count=0,n.index=0,n}function fc(n,e){this.predicate=n,this.source=e}function hc(n,e,t){return(n=lo.call(this,n)||this).selector=e,n.caught=t,n}function mc(n){this.selector=n}function vc(n,e){return(n=co.call(this,n)||this).closingSelector=e,n.subscribing=!1,n.openBuffer(),n}function gc(n){this.closingSelector=n}function _c(n,e,t){return(n=uo.call(this,n)||this).openings=e,n.closingSelector=t,n.contexts=[],n.add(E(n,e)),n}function bc(n,e){this.openings=n,this.closingSelector=e}function yc(n,e,t,i,o){var r;return(n=po.call(this,n)||this).bufferTimeSpan=e,n.bufferCreationInterval=t,n.maxBufferSize=i,n.scheduler=o,n.contexts=[],i=n.openContext(),n.timespanOnly=null==t||t<0,n.timespanOnly?n.add(i.closeAction=o.schedule(G,e,{subscriber:n,context:i,bufferTimeSpan:e})):(r={bufferTimeSpan:e,bufferCreationInterval:t,subscriber:n,scheduler:o},n.add(i.closeAction=o.schedule(J,e,{subscriber:n,context:i})),n.add(o.schedule(Q,t,r))),n}function wc(n,e,t,i){this.bufferTimeSpan=n,this.bufferCreationInterval=e,this.maxBufferSize=t,this.scheduler=i}function xc(n,e,t){return(n=fo.call(this,n)||this).bufferSize=e,n.startBufferEvery=t,n.buffers=[],n.count=0,n}function Sc(n,e){return(n=ho.call(this,n)||this).bufferSize=e,n.buffer=[],n}function Ic(n,e){this.bufferSize=n,this.subscriberClass=(this.startBufferEvery=e)&&n!==e?Yo:Wo}function Tc(n,e){return(n=mo.call(this,n)||this).buffer=[],n.add(E(n,e)),n}function Cc(n){this.closingNotifier=n}function Pc(n,e){return(n=vo.call(this,n)||this).durationSelector=e,n.hasValue=!1,n}function Ec(n){this.durationSelector=n}function kc(n,e,t){return(n=go.call(this,n)||this).parent=e,n.observable=t,n.stillUnsubscribed=!0,n.buffer=[],n.isComplete=!1,n}function Oc(n){this.array=n,this.length=this.index=0,this.length=n.length}function Dc(n){this.iterator=n,this.nextResult=n.next()}function Ac(n,e,t){return void 0===t&&(t=Object.create(null)),(n=_o.call(this,n)||this).iterators=[],n.active=0,n.resultSelector="function"==typeof e?e:null,n.values=t,n}function Nc(n){this.resultSelector=n}function Mc(n){return(n=bo.call(this,n)||this).hasFirst=!1,n.observables=[],n.subscriptions=[],n}function Lc(){}function zc(n,e,t){return(n=yo.call(this,n)||this).predicate=e,n.thisArg=t,n.count=0,n}function Fc(n,e){this.predicate=n,this.thisArg=e}function $c(n,e,t){return void 0===t&&(t=Number.POSITIVE_INFINITY),(n=wo.call(this,n)||this).project=e,n.concurrent=t,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}function Rc(n,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=n,this.concurrent=e}function jc(n,e){return(n=xo.call(this,n)||this).resultSelector=e,n.active=0,n.values=[],n.observables=[],n}function Zc(n){this.resultSelector=n}wn(ua,[Et]);var Bc,Hc=(e(Uc,Bc=ee),Uc.prototype._subscribe=function(n){var e=this,t=e.logSubscribedFrame(),i=new Wn;return i.add(new Wn(function(){e.logUnsubscribedFrame(t)})),i.add(Bc.prototype._subscribe.call(this,n)),i},Uc.prototype.setup=function(){for(var e=this,n=e.messages.length,t=0;t<n;t++)!function(){var n=e.messages[t];e.scheduler.schedule(function(){n.notification.observe(e)},n.frame)}()},Uc);function Uc(n,e){var t=Bc.call(this)||this;return t.messages=n,t.subscriptions=[],t.scheduler=e,t}wn(Hc,[Et]);var Vc,Dt=(e(Yc,Vc=Nt),Yc.prototype.createTime=function(n){if(-1===(n=n.indexOf("|")))throw Error('marble diagram for time should have a completion marker "|"');return n*Yc.frameTimeFactor},Yc.prototype.createColdObservable=function(n,e,t){if(-1!==n.indexOf("^"))throw Error('cold observable cannot have subscription offset "^"');if(-1!==n.indexOf("!"))throw Error('cold observable cannot have unsubscription marker "!"');return n=Yc.parseMarbles(n,e,t,void 0,this.runMode),n=new ua(n,this),this.coldObservables.push(n),n},Yc.prototype.createHotObservable=function(n,e,t){if(-1!==n.indexOf("!"))throw Error('hot observable cannot have unsubscription marker "!"');return n=Yc.parseMarbles(n,e,t,void 0,this.runMode),n=new Hc(n,this),this.hotObservables.push(n),n},Yc.prototype.materializeInnerObservable=function(n,e){var t=this,i=[];return n.subscribe(function(n){i.push({frame:t.frame-e,notification:vt.createNext(n)})},function(n){i.push({frame:t.frame-e,notification:vt.createError(n)})},function(){i.push({frame:t.frame-e,notification:vt.createComplete()})}),i},Yc.prototype.expectObservable=function(n,e){var t,i=this,o=[],r={actual:o,ready:!1},s=(e=Yc.parseMarblesAsSubscriptions(e=void 0===e?null:e,this.runMode)).unsubscribedFrame;this.schedule(function(){t=n.subscribe(function(n){var e=n;n instanceof Gn&&(e=i.materializeInnerObservable(e,i.frame)),o.push({frame:i.frame,notification:vt.createNext(e)})},function(n){o.push({frame:i.frame,notification:vt.createError(n)})},function(){o.push({frame:i.frame,notification:vt.createComplete()})})},e.subscribedFrame===Number.POSITIVE_INFINITY?0:e.subscribedFrame),s!==Number.POSITIVE_INFINITY&&this.schedule(function(){return t.unsubscribe()},s),this.flushTests.push(r);var a=this.runMode;return{toBe:function(n,e,t){r.ready=!0,r.expected=Yc.parseMarbles(n,e,t,!0,a)}}},Yc.prototype.expectSubscriptions=function(n){var e={actual:n,ready:!1};this.flushTests.push(e);var t=this.runMode;return{toBe:function(n){n="string"==typeof n?[n]:n,e.ready=!0,e.expected=n.map(function(n){return Yc.parseMarblesAsSubscriptions(n,t)})}}},Yc.prototype.flush=function(){for(var e=this,n=this.hotObservables;0<n.length;)n.shift().setup();Vc.prototype.flush.call(this),this.flushTests=this.flushTests.filter(function(n){return!n.ready||(e.assertDeepEqual(n.actual,n.expected),!1)})},Yc.parseMarblesAsSubscriptions=function(s,a){var l=this;if(void 0===a&&(a=!1),"string"!=typeof s)return new ca(Number.POSITIVE_INFINITY);function n(n){function e(n){i+=n*l.frameTimeFactor}var t,i=f;switch(o=s[n]){case" ":a||e(1);break;case"-":e(1);break;case"(":u=f,e(1);break;case")":u=-1,e(1);break;case"^":if(d!==Number.POSITIVE_INFINITY)throw Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");d=-1<u?u:f,e(1);break;case"!":if(p!==Number.POSITIVE_INFINITY)throw Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");p=-1<u?u:f;break;default:if(a&&o.match(/^[0-9]$/)&&(0===n||" "===s[n-1]))if(t=s.slice(n).match(/^([0-9]+(?:\.[0-9]+)?)(ms|s|m) /)){n+=t[0].length-1;var o=parseFloat(t[1]),r=void 0;switch(t[2]){case"ms":r=o;break;case"s":r=1e3*o;break;case"m":r=6e4*o}e(r/h.frameTimeFactor);break}throw Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+o+"'.")}f=i,c=n}for(var c,e=s.length,u=-1,d=Number.POSITIVE_INFINITY,p=Number.POSITIVE_INFINITY,f=0,h=this,t=0;t<e;t++)n(t),t=c;return p<0?new ca(d):new ca(d,p)},Yc.parseMarbles=function(a,e,l,t,c){var u=this;if(void 0===t&&(t=!1),void 0===c&&(c=!1),-1!==a.indexOf("!"))throw Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var d,n=a.length,p=[],f=-1===(i=(c?a.replace(/^[ ]+/,""):a).indexOf("^"))?0:i*-this.frameTimeFactor,h="object"!==du(e)?function(n){return n}:function(n){return t&&e[n]instanceof ua?e[n].messages:e[n]},m=-1,i=function(n){function e(n){t+=n*u.frameTimeFactor}var t=f,i=void 0;switch(r=a[n]){case" ":c||e(1);break;case"-":e(1);break;case"(":m=f,e(1);break;case")":m=-1,e(1);break;case"|":i=vt.createComplete(),e(1);break;case"^":e(1);break;case"#":i=vt.createError(l||"error"),e(1);break;default:if(c&&r.match(/^[0-9]$/)&&(0===n||" "===a[n-1])){var o=a.slice(n).match(/^([0-9]+(?:\.[0-9]+)?)(ms|s|m) /);if(o){n+=o[0].length-1;var r=parseFloat(o[1]),s=void 0;switch(o[2]){case"ms":s=r;break;case"s":s=1e3*r;break;case"m":s=6e4*r}e(s/v.frameTimeFactor);break}}i=vt.createNext(h(r)),e(1)}i&&p.push({frame:-1<m?m:f,notification:i}),f=t,d=n},v=this,o=0;o<n;o++)i(o),o=d;return p},Yc.prototype.run=function(n){var e=Yc.frameTimeFactor,t=this.maxFrames;Yc.frameTimeFactor=1,this.maxFrames=Number.POSITIVE_INFINITY,this.runMode=!0;var i={cold:(Be.delegate=this).createColdObservable.bind(this),hot:this.createHotObservable.bind(this),flush:this.flush.bind(this),expectObservable:this.expectObservable.bind(this),expectSubscriptions:this.expectSubscriptions.bind(this)};try{var o=n(i);return this.flush(),o}finally{Yc.frameTimeFactor=e,this.maxFrames=t,this.runMode=!1,Be.delegate=void 0}},Yc),Re=Object.freeze({TestScheduler:Dt}),je="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Wc="undefined"!=typeof window&&window||void 0!==uu&&uu||je;function Yc(n){var e=Vc.call(this,Mt,750)||this;return e.assertDeepEqual=n,e.hotObservables=[],e.coldObservables=[],e.flushTests=[],e.runMode=!1,e}if(!Wc)throw Error("RxJS could not find any global context (window, self, global)");var qc,Xc,Kc,Gc=w(function(n,e){return n.response}),Qc=(e(lu,Kc=Gn),lu.prototype._subscribe=function(n){return new Jc(n,this.request)},lu.create=(cu.get=xn,cu.post=Sn,cu.delete=In,cu.put=Tn,cu.patch=Cn,cu.getJSON=Pn,cu),lu),Jc=(e(au,Xc=qn),au.prototype.next=function(n){this.done=!0;var e,t=this.xhr,i=this.request,o=this.destination;try{e=new nu(n,t,i)}catch(n){return o.error(n)}o.next(e)},au.prototype.send=function(){var n=this.request,e=(a=this.request).user,t=a.method,i=a.url,o=a.async,r=a.password,s=a.headers,a=a.body;try{var l=this.xhr=n.createXHR();this.setupEvents(l,n),e?l.open(t,i,o,e,r):l.open(t,i,o),o&&(l.timeout=n.timeout,l.responseType=n.responseType),"withCredentials"in l&&(l.withCredentials=!!n.withCredentials),this.setHeaders(l,s),a?l.send(a):l.send()}catch(n){this.error(n)}},au.prototype.serializeBody=function(e,n){if(!e||"string"==typeof e||Wc.FormData&&e instanceof Wc.FormData)return e;var t;switch(!n||-1!==(t=n.indexOf(";"))&&(n=n.substring(0,t)),n){case"application/x-www-form-urlencoded":return Object.keys(e).map(function(n){return encodeURIComponent(n)+"="+encodeURIComponent(e[n])}).join("&");case"application/json":return JSON.stringify(e);default:return e}},au.prototype.setHeaders=function(n,e){for(var t in e)e.hasOwnProperty(t)&&n.setRequestHeader(t,e[t])},au.prototype.getHeader=function(n,e){for(var t in n)if(t.toLowerCase()===e.toLowerCase())return n[t]},au.prototype.setupEvents=function(n,e){function r(n){var e,t=r.subscriber,i=r.progressSubscriber,o=r.request;i&&i.error(n);try{e=new tu(this,o)}catch(n){e=n}t.error(e)}function t(n){}function s(e){var n=s.subscriber,t=s.progressSubscriber,i=s.request;if(4===this.readyState){var o=1223===this.status?204:this.status,r="text"===this.responseType?this.response||this.responseText:this.response;if((o=0===o?r?200:0:o)<400)t&&t.complete(),n.next(e),n.complete();else{t&&t.error(e),e=void 0;try{e=new eu("ajax error "+o,this,i)}catch(n){e=n}n.error(e)}}}var i,a,o=e.progressSubscriber;(n.ontimeout=r).request=e,r.subscriber=this,r.progressSubscriber=o,n.upload&&"withCredentials"in n&&(o&&(i=function(n){i.progressSubscriber.next(n)},Wc.XDomainRequest?n.onprogress=i:n.upload.onprogress=i,i.progressSubscriber=o),(n.onerror=a=function(n){var e,t=a.progressSubscriber,i=a.subscriber,o=a.request;t&&t.error(n);try{e=new eu("ajax error",this,o)}catch(n){e=n}i.error(e)}).request=e,a.subscriber=this,a.progressSubscriber=o),(n.onreadystatechange=t).subscriber=this,t.progressSubscriber=o,t.request=e,(n.onload=s).subscriber=this,s.progressSubscriber=o,s.request=e},au.prototype.unsubscribe=function(){var n=this.xhr;!this.done&&n&&4!==n.readyState&&"function"==typeof n.abort&&n.abort(),Xc.prototype.unsubscribe.call(this)},au),nu=function(n,e,t){this.originalEvent=n,this.xhr=e,this.request=t,this.status=e.status,this.responseType=e.responseType||t.responseType,this.response=En(this.responseType,e)},eu=(su.prototype=Object.create(Error.prototype),su),tu=function(n,e){return eu.call(this,"ajax timeout",n,e),this.name="AjaxTimeoutError",this},Et=Object.freeze({ajax:Qc.create,AjaxResponse:nu,AjaxError:eu,AjaxTimeoutError:tu}),iu={url:"",deserializer:function(n){return JSON.parse(n.data)},serializer:function(n){return JSON.stringify(n)}},ou=(e(ru,qc=te),ru.prototype.lift=function(n){var e=new ru(this._config,this.destination);return e.operator=n,e.source=this,e},ru.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new yt),this._output=new ee},ru.prototype.multiplex=function(t,i,o){var r=this;return new Gn(function(e){try{r.next(t())}catch(n){e.error(n)}var n=r.subscribe(function(n){try{o(n)&&e.next(n)}catch(n){e.error(n)}},function(n){return e.error(n)},function(){return e.complete()});return function(){try{r.next(i())}catch(n){e.error(n)}n.unsubscribe()}})},ru.prototype._connectSocket=function(){var t=this,n=(o=this._config).WebSocketCtor,e=o.protocol,i=o.url,o=o.binaryType,r=this._output,s=null;try{this._socket=s=e?new n(i,e):new n(i),o&&(this._socket.binaryType=o)}catch(n){return void r.error(n)}var a=new Wn(function(){t._socket=null,s&&1===s.readyState&&s.close()});s.onopen=function(n){var e;t._socket?((e=t._config.openObserver)&&e.next(n),n=t.destination,t.destination=qn.create(function(n){if(1===s.readyState)try{var e=t._config.serializer;s.send(e(n))}catch(n){t.destination.error(n)}},function(n){var e=t._config.closingObserver;e&&e.next(void 0),n&&n.code?s.close(n.code,n.reason):r.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),t._resetState()},function(){var n=t._config.closingObserver;n&&n.next(void 0),s.close(),t._resetState()}),n&&n instanceof yt&&a.add(n.subscribe(t.destination))):(s.close(),t._resetState())},s.onerror=function(n){t._resetState(),r.error(n)},s.onclose=function(n){t._resetState();var e=t._config.closeObserver;e&&e.next(n),n.wasClean?r.complete():r.error(n)},s.onmessage=function(n){try{var e=t._config.deserializer;r.next(e(n))}catch(n){r.error(n)}}},ru.prototype._subscribe=function(n){var e=this,t=this.source;return t?t.subscribe(n):(this._socket||this._connectSocket(),this._output.subscribe(n),n.add(function(){var n=e._socket;0===e._output.observers.length&&(n&&1===n.readyState&&n.close(),e._resetState())}),n)},ru.prototype.unsubscribe=function(){var n=this._socket;n&&1===n.readyState&&n.close(),this._resetState(),qc.prototype.unsubscribe.call(this)},ru),Dt=Object.freeze({webSocket:function(n){return new ou(n)},WebSocketSubject:ou}),je=Object.freeze({fromFetch:function(r,s){return new Gn(function(e){var n=new AbortController,t=n.signal,i=!0,o=!1;return s=s?(s.signal&&(s.signal.aborted?n.abort():s.signal.addEventListener("abort",function(){t.aborted||n.abort()})),jn({},s,{signal:t})):{signal:t},fetch(r,s).then(function(n){i=!1,e.next(n),e.complete()}).catch(function(n){i=!1,o||e.error(n)}),function(){o=!0,i&&n.abort()}})}});function ru(n,e){var t=qc.call(this)||this;if(n instanceof Gn)t.destination=e,t.source=n;else{if(e=t._config=jn({},iu),t._output=new ee,"string"==typeof n)e.url=n;else for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);if(!e.WebSocketCtor&&WebSocket)e.WebSocketCtor=WebSocket;else if(!e.WebSocketCtor)throw Error("no WebSocket constructor can be found");t.destination=new yt}return t}function su(n,e,t){return Error.call(this),this.message=n,this.name="AjaxError",this.xhr=e,this.request=t,this.status=e.status,this.responseType=e.responseType||t.responseType,this.response=En(this.responseType,e),this}function au(n,e){(n=Xc.call(this,n)||this).request=e,n.done=!1;var t=e.headers=e.headers||{};return e.crossDomain||n.getHeader(t,"X-Requested-With")||(t["X-Requested-With"]="XMLHttpRequest"),n.getHeader(t,"Content-Type")||Wc.FormData&&e.body instanceof Wc.FormData||void 0===e.body||(t["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),e.body=n.serializeBody(e.body,n.getHeader(e.headers,"Content-Type")),n.send(),n}function lu(n){var e=Kc.call(this)||this,t={async:!0,createXHR:function(){var n;if(this.crossDomain)if(Wc.XMLHttpRequest)n=new Wc.XMLHttpRequest;else{if(!Wc.XDomainRequest)throw Error("CORS is not supported by your browser");n=new Wc.XDomainRequest}else if(Wc.XMLHttpRequest)n=new Wc.XMLHttpRequest;else{var e=void 0;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=0;i<3;i++)try{e=t[i],new Wc.ActiveXObject(e);break}catch(n){}n=new Wc.ActiveXObject(e)}catch(n){throw Error("XMLHttpRequest is not supported by your browser")}}return n},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof n)t.url=n;else for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return e.request=t,e}function cu(n){return new lu(n)}n.operators=la,n.testing=Re,n.ajax=Et,n.webSocket=Dt,n.fetch=je,n.Observable=Gn,n.ConnectableObservable=re,n.GroupedObservable=ze,n.observable=Kn,n.Subject=ee,n.BehaviorSubject=$e,n.ReplaySubject=yt,n.AsyncSubject=xt,n.asapScheduler=kt,n.asyncScheduler=Ot,n.queueScheduler=He,n.animationFrameScheduler=At,n.VirtualTimeScheduler=Nt,n.VirtualAction=Mt,n.Scheduler=Ze,n.Subscription=Wn,n.Subscriber=qn,n.Notification=vt,n.pipe=t,n.noop=o,n.identity=y,n.isObservable=function(n){return!!n&&(n instanceof Gn||"function"==typeof n.lift&&"function"==typeof n.subscribe)},n.ArgumentOutOfRangeError=Lt,n.EmptyError=zt,n.ObjectUnsubscribedError=Qn,n.UnsubscriptionError=Vn,n.TimeoutError=Ft,n.bindCallback=function t(r,i,s){if(i){if(!f(i))return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t(r,s).apply(void 0,n).pipe(w(function(n){return Un(n)?i.apply(void 0,n):i(n)}))};s=i}return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t,i=this,o={context:i,subject:t,callbackFunc:r,scheduler:s};return new Gn(function(n){if(s)return s.schedule(x,0,{args:e,subscriber:n,params:o});if(!t){t=new xt;try{r.apply(i,e.concat([function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];t.next(n.length<=1?n[0]:n),t.complete()}]))}catch(n){c(t)?t.error(n):console.warn(n)}}return t.subscribe(n)})}},n.bindNodeCallback=function t(r,i,s){if(i){if(!f(i))return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t(r,s).apply(void 0,n).pipe(w(function(n){return Un(n)?i.apply(void 0,n):i(n)}))};s=i}return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var o={subject:void 0,args:i,callbackFunc:r,scheduler:s,context:this};return new Gn(function(n){var e=o.context,t=o.subject;if(s)return s.schedule(I,0,{params:o,subscriber:n,context:e});if(!t){t=o.subject=new xt;try{r.apply(e,i.concat([function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];(e=n.shift())?t.error(e):(t.next(n.length<=1?n[0]:n),t.complete())}]))}catch(n){c(t)?t.error(n):console.warn(n)}}return t.subscribe(n)})}},n.combineLatest=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=e=null;return f(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),m(n=1===n.length&&Un(n[0])?n[0]:n,t).lift(new Po(e))},n.concat=M,n.defer=L,n.empty=p,n.forkJoin=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(1===n.length){var t=n[0];if(Un(t))return z(t,null);if(a(t)&&Object.getPrototypeOf(t)===Object.prototype)return z((n=Object.keys(t)).map(function(n){return t[n]}),n)}if("function"!=typeof n[n.length-1])return z(n,null);var i=n.pop();return z(n=1===n.length&&Un(n[0])?n[0]:n,null).pipe(w(function(n){return i.apply(void 0,n)}))},n.from=O,n.fromEvent=function n(t,i,o,e){return s(o)&&(e=o,o=void 0),e?n(t,i,o).pipe(w(function(n){return Un(n)?e.apply(void 0,n):e(n)})):new Gn(function(e){!function n(e,t,i,o,r){var s;if(e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener)e.addEventListener(t,i,r),s=function(){return e.removeEventListener(t,i,r)};else if(e&&"function"==typeof e.on&&"function"==typeof e.off)e.on(t,i),s=function(){return e.off(t,i)};else if(e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener)e.addListener(t,i),s=function(){return e.removeListener(t,i)};else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var a=0,l=e.length;a<l;a++)n(e[a],t,i,o,r)}o.add(s)}(t,i,function(n){1<arguments.length?e.next(Array.prototype.slice.call(arguments)):e.next(n)},e,o)})},n.fromEventPattern=function n(i,o,e){return e?n(i,o).pipe(w(function(n){return Un(n)?e.apply(void 0,n):e(n)})):new Gn(function(t){function n(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t.next(1===n.length?n[0]:n)}var e;try{e=i(n)}catch(n){return void t.error(n)}if(s(o))return function(){return o(n,e)}})},n.generate=function(n,i,o,e,r){var s,a;return 1==arguments.length?(a=n.initialState,i=n.condition,o=n.iterate,s=n.resultSelector||y,r=n.scheduler):void 0===e||f(e)?(a=n,s=y,r=e):(a=n,s=e),new Gn(function(e){var n=a;if(r)return r.schedule(F,0,{subscriber:e,iterate:o,condition:i,resultSelector:s,state:n});for(;;){if(i){var t=void 0;try{t=i(n)}catch(n){e.error(n);break}if(!t){e.complete();break}}t=void 0;try{t=s(n)}catch(n){e.error(n);break}if(e.next(t),e.closed)break;try{n=o(n)}catch(n){e.error(n);break}}})},n.iif=function(n,e,t){return void 0===e&&(e=Ue),void 0===t&&(t=Ue),L(function(){return n()?e:t})},n.interval=function(e,t){return void 0===t&&(t=Ot),(!$(e=void 0===e?0:e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=Ot),new Gn(function(n){return n.add(t.schedule(R,e,{subscriber:n,counter:0,period:e})),n})},n.merge=j,n.never=function(){return Do},n.of=v,n.onErrorResumeNext=Z,n.pairs=function(o,i){return new Gn(i?function(n){var e=Object.keys(o),t=new Wn;return t.add(i.schedule(B,0,{keys:e,index:0,subscriber:n,subscription:t,obj:o})),t}:function(n){for(var e=Object.keys(o),t=0;t<e.length&&!n.closed;t++){var i=e[t];o.hasOwnProperty(i)&&n.next([i,o[i]])}n.complete()})},n.partition=function(n,e,t){return[U(e,t)(new Gn(To(n))),U(H(e,t))(new Gn(To(n)))]},n.race=V,n.range=function(i,o,r){return void 0===i&&(i=0),new Gn(function(n){void 0===o&&(o=i,i=0);var e=0,t=i;if(r)return r.schedule(W,0,{index:e,count:o,start:i,subscriber:n});for(;;){if(e++>=o){n.complete();break}if(n.next(t++),n.closed)break}})},n.throwError=g,n.timer=Y,n.using=function(o,r){return new Gn(function(e){var n,t;try{n=o()}catch(n){return void e.error(n)}try{t=r(n)}catch(n){return void e.error(n)}var i=(t?O(t):Ue).subscribe(e);return function(){i.unsubscribe(),n&&n.unsubscribe()}})},n.zip=X,n.scheduled=k,n.EMPTY=Ue,n.NEVER=Do,n.config=Bn,Object.defineProperty(n,"__esModule",{value:!0})},"object"===du(i)&&void 0!==t?e(i):"function"==typeof define&&define.amd?define("rxjs",["exports"],e):e(n.rxjs={})}.call(this,n(7))},170:function(n,e,t){t(159);var i=t(32).FAKE;t(159);t(0);t(3).directive("fakeBannerTop",function(){return{scope:{},template:'\n        <div class="top-ads">\n                             <div class="container">\n                                 <div class="top-ads__content">\n                                      <div class="top-ads__content">\n                                          <iframe\n        src="https://adi.admicro.vn/adt/banners/nam2015/4043/min_html5/lamlethi/2019_12_20/980x90/980x90/980x90.html?url=%2F%2Flg1.logging.admicro.vn%2Fcpx%3Fcov%3D1%26tpn%3D1%26dmn%3Dhttps%253A%252F%252Fdantri.com.vn%252F%26cmpg%3D1299406%26items%3D571824%26zid%3D221%26cid%3D-1%26lsn%3D1578650407288%26ce%3D1%26lc%3D4%26cr%3D1488218349%26ui%3D5788218349712089472%26re%3Dhttps%253A%252F%252Ftiki.vn%252Fhop-qua-tet-neptune-2-chai-neptune-gold-1l-1-goi-hat-nem-vi-heo-250g-p7954228.html&admid=ads_zone221_banner571824"\n        width="980"\n        height="90"\n        frameborder="0"\n        scrolling="no"\n      ></iframe>\n                                         </div>\n                                   \n                                 </div>\n                             </div>\n                         </div>\n        ',link:function(){}}}).directive("fakeAdsRightTop",[function(){return{template:'\n        <div>\n        <a href="">\n        <img style="width: 100%" src="https://icdn.dantri.com.vn/2019/12/16/ecopark-532-x-110-1576468716289.png" alt="">\n    </a>\n\n    <div class="highlight-ads__title">\n        <span>Quảng cáo</span>\n    </div>\n\n    <a href="">\n        <img style="width: 100%" src="https://adi.admicro.vn/adt/banners/nam2015/4763/Vietjet/336x140.jpg" alt="">\n    </a>\n    <a href="">\n        <img style="width: 100%" src="https://adi.admicro.vn/images/2018/09/336x140_1536911257.jpg" alt="">\n    </a>\n        </div>\n        ',link:function(){}}}]).directive("fakeHomeRightTop",function(){return{template:'\n        <div class="col col--highlight-ads">\n        <a href="">\n            <img style="width: 100%" src="https://icdn.dantri.com.vn/2019/12/16/ecopark-532-x-110-1576468716289.png" alt="">\n        </a>\n\n        <div class="highlight-ads__title">\n            <span>Quảng cáo</span>\n        </div>\n\n        <a href="">\n            <img style="width: 100%" src="https://adi.admicro.vn/adt/banners/nam2015/4763/Vietjet/336x140.jpg" alt="">\n        </a>\n        <a href="">\n            <img style="width: 100%" src="https://adi.admicro.vn/images/2019/06/336x280_1570693627.jpg" alt="">\n        </a>\n        <a href="">\n            <img style="width: 100%" src="https://adi.admicro.vn/images/2018/09/336x140_1536911257.jpg" alt="">\n        </a>\n    </div>\n        '}}).service("fakeAds",["adsSlot","$compile","$rootScope",function(n,e,t){return n.getSlots().forEach(function(n){switch(n.id){case"xds-top-before":case"xds-2":case"xds-right-top":break;case"xds-secondary":n.addHandler(i,function(){return $(n.el).append('\n            <div class="ads-sticky" data-margin-top="16">\n        <iframe src="https://adi.admicro.vn/adt/banners/nam2015/4043/min_html5/lamlethi/2019_12_18/336x600-3/336x600/336x600.html?url=%2F%2Flg1.logging.admicro.vn%2Fcpx%3Fcov%3D1%26tpn%3D1%26dmn%3Dhttps%253A%252F%252Fdantri.com.vn%252F%26cmpg%3D1299406%26items%3D571825%26zid%3D222%26cid%3D-1%26lsn%3D1578650407288%26ce%3D1%26lc%3D4%26cr%3D1488218349%26ui%3D5788218349712089472%26re%3Dhttps%253A%252F%252Ftiki.vn%252Fhop-qua-tet-neptune-2-chai-neptune-gold-1l-1-goi-hat-nem-vi-heo-250g-p7954228.html&amp;admid=ads_zone222_banner571825" width="300" frameborder="0" scrolling="no" height="600"></iframe>\n      </div>\n            '),!0});break;default:n.addHandler(i,function(){return!0})}}),function(){}}])},171:function(n,e,t){t(172),t(3).run(function(){var n=$('<div id="fb-root"></div><script async defer crossorigin="anonymous" src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v6.0"><\/script>');$("body").append(n)}).directive("fbBtn",["$interpolate","config",function(o,r){return{scope:{id:"@",url:"@"},link:function(n,e,t){var i="";switch(n.url=n.url||"".concat(r.WebDomain,"/news-").concat(n.id,".htm"),n.url&&-1===n.url.indexOf("http")&&(n.url=r.WebDomain+n.url),t.type){case"share":i='\n                <a  target="_blank" title="Chia sẻ lên Facebook" href="https://www.facebook.com/sharer/sharer.php?u={{link}}&amp;src=sdkpreparse" \n                 class="dt-social__item dt-social__item--facebook">\n                  <i class="dt-icon icon-facebook"></i>\n                </a>';break;case"like":i='\n                <div  class="fb-like like-btn" data-href="{{url}}" data-layout="box_count"  data-action="like" data-width="87" data-size="large" data-share="false"></div>';break;case"likeshare":i='<div class="fb-like" data-href="{{url}}" data-width="" data-layout="box_count" data-action="like" data-size="large" data-share="true"></div>';break;case"likeshare-row":i='<div class="fb-like" data-href="{{url}}" data-layout="button_count" data-action="like" data-share="true" data-size="large"></div>';break;case"share-mobile":i='<div class="share-mobile">\n              <a href="https://www.facebook.com/sharer/sharer.php?u={{link}}&amp;src=sdkpreparse" class="dt-social__item dt-social__item--facebook">\n                  <i class="fi-icon icon-facebook-f"></i>\n              </a>\n              </div>'}n.link=encodeURIComponent(n.url);n=o(i)(n);e.replaceWith(n)}}}])},172:function(n,e,t){},187:function(n,e){n.exports='<div class=pswp tabindex=-1 role=dialog aria-hidden=true> <div class=pswp__bg></div> <div class=pswp__scroll-wrap> <div class=pswp__container> <div class=pswp__item></div> <div class=pswp__item></div> <div class=pswp__item></div> </div> <div class="pswp__ui pswp__ui--hidden"> <div class=pswp__top-bar> <div class=pswp__counter></div> <button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" title=Share></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button> <div class=pswp__preloader> <div class=pswp__preloader__icn> <div class=pswp__preloader__cut> <div class=pswp__preloader__donut></div> </div> </div> </div> </div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"> <div class=pswp__share-tooltip></div> </div> <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button> <div class=pswp__caption> <div class=pswp__caption__center></div> </div> </div> </div> </div> '},190:function(n,e){n.exports='<section ng-show="articles && articles.length" ng-class="isMobile?\'dt-section dt-section--gradient\':\'dt-section dt-section--primary dt-section--fit mt-4\'"> <header class=dt-section__header> <div ng-class="!isMobile?\'text-uppercase\':\'\'" class=dt-section__title> Có thể bạn quan tâm </div> </header> <div class=dt-section__body> <ul class="dt-list dt-list--grid dt-list--grid-3"> <li ng-repeat="(index,article) in articles"> <div ng-class="isMobile?\'news-item news-item--left2right\':\'news-item news-item--normal\'"> <a data-cate-id={{article.categoryId}} class=news-item__avatar ng-href={{article.localPath}} ng-attr-title={{article.title}}> <div class="dt-thumbnail dt-thumbnail--3x2"> <img ng-src={{article.imagePath}} ng-alt={{article.title}}> </div> </a> <div class=news-item__content> <h3 class=news-item__title> <a data-utm=Article|Box_CTBQT|{{index}} data-cate-id={{article.categoryId}} ng-href={{article.localPath}} ng-alt={{article.title}}>{{article.title}}</a> </h3> </div> </div> </li> </ul> </div> </section>a'},377:function(n,e,t){t(3).service("weblog",["$http","$q","$rootScope","config",function(n,e,t,i){var o=e.defer(),r=t.$watch(function(){return window.webLog},function(n){void 0!==n&&(o.resolve(n),r())});return o.promise}])},378:function(n,e,t){var a=t(155),l=t(364);n.exports=t(3).directive("commentWidget",["config",function(s){return{scope:{objectId:"@",zoneId:"@"},template:'<iframe  ng-src="{{src}}" width="100%" height="{{height}}" scrolling="no" frameborder="0" />',replace:!0,link:function(e,n,t){var i=a.parse(s.CommentsDomain),o=a.parse(window.location.href);o.pathname="/comment2.htm",o.search="?"+l.stringify({objecttype:"1",objectid:e.objectId}),o.host=i.host,e.src=a.format(o),e.height="300";var r=$q.defer();r.promise.then(angular.noop,angular.noop,function(n){e.height!=n&&(e.height=n)});$(window).on("message",function(n){var e=n.originalEvent.origin;if(a.parse(e).hostname===i.hostname){n=n.originalEvent.data;if(n.action&&"resetHeight"===n.action)r.notify(n.params.height)}})}}}])},379:function(n,e,t){t(9)(t(380))},380:function(n,e){n.exports='function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\n/*!\n * Bootstrap v3.4.1 (https://getbootstrap.com/)\n * Copyright 2011-2019 Twitter, Inc.\n * Licensed under the MIT license\n */\nif ("undefined" == typeof jQuery) throw new Error("Bootstrap\'s JavaScript requires jQuery");\n!function (t) {\n  "use strict";\n\n  var e = jQuery.fn.jquery.split(" ")[0].split(".");\n  if (e[0] < 2 && e[1] < 9 || 1 == e[0] && 9 == e[1] && e[2] < 1 || 3 < e[0]) throw new Error("Bootstrap\'s JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4");\n}(), function (n) {\n  "use strict";\n\n  n.fn.emulateTransitionEnd = function (t) {\n    var e = !1,\n        i = this;\n    n(this).one("bsTransitionEnd", function () {\n      e = !0;\n    });\n    return setTimeout(function () {\n      e || n(i).trigger(n.support.transition.end);\n    }, t), this;\n  }, n(function () {\n    n.support.transition = function o() {\n      var t = document.createElement("bootstrap"),\n          e = {\n        WebkitTransition: "webkitTransitionEnd",\n        MozTransition: "transitionend",\n        OTransition: "oTransitionEnd otransitionend",\n        transition: "transitionend"\n      };\n\n      for (var i in e) {\n        if (t.style[i] !== undefined) return {\n          end: e[i]\n        };\n      }\n\n      return !1;\n    }(), n.support.transition && (n.event.special.bsTransitionEnd = {\n      bindType: n.support.transition.end,\n      delegateType: n.support.transition.end,\n      handle: function handle(t) {\n        if (n(t.target).is(this)) return t.handleObj.handler.apply(this, arguments);\n      }\n    });\n  });\n}(jQuery), function (s) {\n  "use strict";\n\n  var e = \'[data-dismiss="alert"]\',\n      a = function a(t) {\n    s(t).on("click", e, this.close);\n  };\n\n  a.VERSION = "3.4.1", a.TRANSITION_DURATION = 150, a.prototype.close = function (t) {\n    var e = s(this),\n        i = e.attr("data-target");\n    i || (i = (i = e.attr("href")) && i.replace(/.*(?=#[^\\s]*$)/, "")), i = "#" === i ? [] : i;\n    var o = s(document).find(i);\n\n    function n() {\n      o.detach().trigger("closed.bs.alert").remove();\n    }\n\n    t && t.preventDefault(), o.length || (o = e.closest(".alert")), o.trigger(t = s.Event("close.bs.alert")), t.isDefaultPrevented() || (o.removeClass("in"), s.support.transition && o.hasClass("fade") ? o.one("bsTransitionEnd", n).emulateTransitionEnd(a.TRANSITION_DURATION) : n());\n  };\n  var t = s.fn.alert;\n  s.fn.alert = function o(i) {\n    return this.each(function () {\n      var t = s(this),\n          e = t.data("bs.alert");\n      e || t.data("bs.alert", e = new a(this)), "string" == typeof i && e[i].call(t);\n    });\n  }, s.fn.alert.Constructor = a, s.fn.alert.noConflict = function () {\n    return s.fn.alert = t, this;\n  }, s(document).on("click.bs.alert.data-api", e, a.prototype.close);\n}(jQuery), function (s) {\n  "use strict";\n\n  var n = function n(t, e) {\n    this.$element = s(t), this.options = s.extend({}, n.DEFAULTS, e), this.isLoading = !1;\n  };\n\n  function i(o) {\n    return this.each(function () {\n      var t = s(this),\n          e = t.data("bs.button"),\n          i = "object" == _typeof(o) && o;\n      e || t.data("bs.button", e = new n(this, i)), "toggle" == o ? e.toggle() : o && e.setState(o);\n    });\n  }\n\n  n.VERSION = "3.4.1", n.DEFAULTS = {\n    loadingText: "loading..."\n  }, n.prototype.setState = function (t) {\n    var e = "disabled",\n        i = this.$element,\n        o = i.is("input") ? "val" : "html",\n        n = i.data();\n    t += "Text", null == n.resetText && i.data("resetText", i[o]()), setTimeout(s.proxy(function () {\n      i[o](null == n[t] ? this.options[t] : n[t]), "loadingText" == t ? (this.isLoading = !0, i.addClass(e).attr(e, e).prop(e, !0)) : this.isLoading && (this.isLoading = !1, i.removeClass(e).removeAttr(e).prop(e, !1));\n    }, this), 0);\n  }, n.prototype.toggle = function () {\n    var t = !0,\n        e = this.$element.closest(\'[data-toggle="buttons"]\');\n\n    if (e.length) {\n      var i = this.$element.find("input");\n      "radio" == i.prop("type") ? (i.prop("checked") && (t = !1), e.find(".active").removeClass("active"), this.$element.addClass("active")) : "checkbox" == i.prop("type") && (i.prop("checked") !== this.$element.hasClass("active") && (t = !1), this.$element.toggleClass("active")), i.prop("checked", this.$element.hasClass("active")), t && i.trigger("change");\n    } else this.$element.attr("aria-pressed", !this.$element.hasClass("active")), this.$element.toggleClass("active");\n  };\n  var t = s.fn.button;\n  s.fn.button = i, s.fn.button.Constructor = n, s.fn.button.noConflict = function () {\n    return s.fn.button = t, this;\n  }, s(document).on("click.bs.button.data-api", \'[data-toggle^="button"]\', function (t) {\n    var e = s(t.target).closest(".btn");\n    i.call(e, "toggle"), s(t.target).is(\'input[type="radio"], input[type="checkbox"]\') || (t.preventDefault(), e.is("input,button") ? e.trigger("focus") : e.find("input:visible,button:visible").first().trigger("focus"));\n  }).on("focus.bs.button.data-api blur.bs.button.data-api", \'[data-toggle^="button"]\', function (t) {\n    s(t.target).closest(".btn").toggleClass("focus", /^focus(in)?$/.test(t.type));\n  });\n}(jQuery), function (p) {\n  "use strict";\n\n  var c = function c(t, e) {\n    this.$element = p(t), this.$indicators = this.$element.find(".carousel-indicators"), this.options = e, this.paused = null, this.sliding = null, this.interval = null, this.$active = null, this.$items = null, this.options.keyboard && this.$element.on("keydown.bs.carousel", p.proxy(this.keydown, this)), "hover" == this.options.pause && !("ontouchstart" in document.documentElement) && this.$element.on("mouseenter.bs.carousel", p.proxy(this.pause, this)).on("mouseleave.bs.carousel", p.proxy(this.cycle, this));\n  };\n\n  function r(n) {\n    return this.each(function () {\n      var t = p(this),\n          e = t.data("bs.carousel"),\n          i = p.extend({}, c.DEFAULTS, t.data(), "object" == _typeof(n) && n),\n          o = "string" == typeof n ? n : i.slide;\n      e || t.data("bs.carousel", e = new c(this, i)), "number" == typeof n ? e.to(n) : o ? e[o]() : i.interval && e.pause().cycle();\n    });\n  }\n\n  c.VERSION = "3.4.1", c.TRANSITION_DURATION = 600, c.DEFAULTS = {\n    interval: 5e3,\n    pause: "hover",\n    wrap: !0,\n    keyboard: !0\n  }, c.prototype.keydown = function (t) {\n    if (!/input|textarea/i.test(t.target.tagName)) {\n      switch (t.which) {\n        case 37:\n          this.prev();\n          break;\n\n        case 39:\n          this.next();\n          break;\n\n        default:\n          return;\n      }\n\n      t.preventDefault();\n    }\n  }, c.prototype.cycle = function (t) {\n    return t || (this.paused = !1), this.interval && clearInterval(this.interval), this.options.interval && !this.paused && (this.interval = setInterval(p.proxy(this.next, this), this.options.interval)), this;\n  }, c.prototype.getItemIndex = function (t) {\n    return this.$items = t.parent().children(".item"), this.$items.index(t || this.$active);\n  }, c.prototype.getItemForDirection = function (t, e) {\n    var i = this.getItemIndex(e);\n    if (("prev" == t && 0 === i || "next" == t && i == this.$items.length - 1) && !this.options.wrap) return e;\n    var o = (i + ("prev" == t ? -1 : 1)) % this.$items.length;\n    return this.$items.eq(o);\n  }, c.prototype.to = function (t) {\n    var e = this,\n        i = this.getItemIndex(this.$active = this.$element.find(".item.active"));\n    if (!(t > this.$items.length - 1 || t < 0)) return this.sliding ? this.$element.one("slid.bs.carousel", function () {\n      e.to(t);\n    }) : i == t ? this.pause().cycle() : this.slide(i < t ? "next" : "prev", this.$items.eq(t));\n  }, c.prototype.pause = function (t) {\n    return t || (this.paused = !0), this.$element.find(".next, .prev").length && p.support.transition && (this.$element.trigger(p.support.transition.end), this.cycle(!0)), this.interval = clearInterval(this.interval), this;\n  }, c.prototype.next = function () {\n    if (!this.sliding) return this.slide("next");\n  }, c.prototype.prev = function () {\n    if (!this.sliding) return this.slide("prev");\n  }, c.prototype.slide = function (t, e) {\n    var i = this.$element.find(".item.active"),\n        o = e || this.getItemForDirection(t, i),\n        n = this.interval,\n        s = "next" == t ? "left" : "right",\n        a = this;\n    if (o.hasClass("active")) return this.sliding = !1;\n    var r = o[0],\n        l = p.Event("slide.bs.carousel", {\n      relatedTarget: r,\n      direction: s\n    });\n\n    if (this.$element.trigger(l), !l.isDefaultPrevented()) {\n      if (this.sliding = !0, n && this.pause(), this.$indicators.length) {\n        this.$indicators.find(".active").removeClass("active");\n        var h = p(this.$indicators.children()[this.getItemIndex(o)]);\n        h && h.addClass("active");\n      }\n\n      var d = p.Event("slid.bs.carousel", {\n        relatedTarget: r,\n        direction: s\n      });\n      return p.support.transition && this.$element.hasClass("slide") ? (o.addClass(t), "object" == _typeof(o) && o.length && o[0].offsetWidth, i.addClass(s), o.addClass(s), i.one("bsTransitionEnd", function () {\n        o.removeClass([t, s].join(" ")).addClass("active"), i.removeClass(["active", s].join(" ")), a.sliding = !1, setTimeout(function () {\n          a.$element.trigger(d);\n        }, 0);\n      }).emulateTransitionEnd(c.TRANSITION_DURATION)) : (i.removeClass("active"), o.addClass("active"), this.sliding = !1, this.$element.trigger(d)), n && this.cycle(), this;\n    }\n  };\n  var t = p.fn.carousel;\n  p.fn.carousel = r, p.fn.carousel.Constructor = c, p.fn.carousel.noConflict = function () {\n    return p.fn.carousel = t, this;\n  };\n\n  var e = function e(t) {\n    var e = p(this),\n        i = e.attr("href");\n    i && (i = i.replace(/.*(?=#[^\\s]+$)/, ""));\n    var o = e.attr("data-target") || i,\n        n = p(document).find(o);\n\n    if (n.hasClass("carousel")) {\n      var s = p.extend({}, n.data(), e.data()),\n          a = e.attr("data-slide-to");\n      a && (s.interval = !1), r.call(n, s), a && n.data("bs.carousel").to(a), t.preventDefault();\n    }\n  };\n\n  p(document).on("click.bs.carousel.data-api", "[data-slide]", e).on("click.bs.carousel.data-api", "[data-slide-to]", e), p(window).on("load", function () {\n    p(\'[data-ride="carousel"]\').each(function () {\n      var t = p(this);\n      r.call(t, t.data());\n    });\n  });\n}(jQuery), function (a) {\n  "use strict";\n\n  var r = function r(t, e) {\n    this.$element = a(t), this.options = a.extend({}, r.DEFAULTS, e), this.$trigger = a(\'[data-toggle="collapse"][href="#\' + t.id + \'"],[data-toggle="collapse"][data-target="#\' + t.id + \'"]\'), this.transitioning = null, this.options.parent ? this.$parent = this.getParent() : this.addAriaAndCollapsedClass(this.$element, this.$trigger), this.options.toggle && this.toggle();\n  };\n\n  function n(t) {\n    var e,\n        i = t.attr("data-target") || (e = t.attr("href")) && e.replace(/.*(?=#[^\\s]+$)/, "");\n    return a(document).find(i);\n  }\n\n  function l(o) {\n    return this.each(function () {\n      var t = a(this),\n          e = t.data("bs.collapse"),\n          i = a.extend({}, r.DEFAULTS, t.data(), "object" == _typeof(o) && o);\n      !e && i.toggle && /show|hide/.test(o) && (i.toggle = !1), e || t.data("bs.collapse", e = new r(this, i)), "string" == typeof o && e[o]();\n    });\n  }\n\n  r.VERSION = "3.4.1", r.TRANSITION_DURATION = 350, r.DEFAULTS = {\n    toggle: !0\n  }, r.prototype.dimension = function () {\n    return this.$element.hasClass("width") ? "width" : "height";\n  }, r.prototype.show = function () {\n    if (!this.transitioning && !this.$element.hasClass("in")) {\n      var t,\n          e = this.$parent && this.$parent.children(".panel").children(".in, .collapsing");\n\n      if (!(e && e.length && (t = e.data("bs.collapse")) && t.transitioning)) {\n        var i = a.Event("show.bs.collapse");\n\n        if (this.$element.trigger(i), !i.isDefaultPrevented()) {\n          e && e.length && (l.call(e, "hide"), t || e.data("bs.collapse", null));\n          var o = this.dimension();\n          this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded", !0), this.$trigger.removeClass("collapsed").attr("aria-expanded", !0), this.transitioning = 1;\n\n          var n = function n() {\n            this.$element.removeClass("collapsing").addClass("collapse in")[o](""), this.transitioning = 0, this.$element.trigger("shown.bs.collapse");\n          };\n\n          if (!a.support.transition) return n.call(this);\n          var s = a.camelCase(["scroll", o].join("-"));\n          this.$element.one("bsTransitionEnd", a.proxy(n, this)).emulateTransitionEnd(r.TRANSITION_DURATION)[o](this.$element[0][s]);\n        }\n      }\n    }\n  }, r.prototype.hide = function () {\n    if (!this.transitioning && this.$element.hasClass("in")) {\n      var t = a.Event("hide.bs.collapse");\n\n      if (this.$element.trigger(t), !t.isDefaultPrevented()) {\n        var e = this.dimension();\n        this.$element[e](this.$element[e]())[0].offsetHeight, this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded", !1), this.$trigger.addClass("collapsed").attr("aria-expanded", !1), this.transitioning = 1;\n\n        var i = function i() {\n          this.transitioning = 0, this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse");\n        };\n\n        if (!a.support.transition) return i.call(this);\n        this.$element[e](0).one("bsTransitionEnd", a.proxy(i, this)).emulateTransitionEnd(r.TRANSITION_DURATION);\n      }\n    }\n  }, r.prototype.toggle = function () {\n    this[this.$element.hasClass("in") ? "hide" : "show"]();\n  }, r.prototype.getParent = function () {\n    return a(document).find(this.options.parent).find(\'[data-toggle="collapse"][data-parent="\' + this.options.parent + \'"]\').each(a.proxy(function (t, e) {\n      var i = a(e);\n      this.addAriaAndCollapsedClass(n(i), i);\n    }, this)).end();\n  }, r.prototype.addAriaAndCollapsedClass = function (t, e) {\n    var i = t.hasClass("in");\n    t.attr("aria-expanded", i), e.toggleClass("collapsed", !i).attr("aria-expanded", i);\n  };\n  var t = a.fn.collapse;\n  a.fn.collapse = l, a.fn.collapse.Constructor = r, a.fn.collapse.noConflict = function () {\n    return a.fn.collapse = t, this;\n  }, a(document).on("click.bs.collapse.data-api", \'[data-toggle="collapse"]\', function (t) {\n    var e = a(this);\n    e.attr("data-target") || t.preventDefault();\n    var i = n(e),\n        o = i.data("bs.collapse") ? "toggle" : e.data();\n    l.call(i, o);\n  });\n}(jQuery), function (a) {\n  "use strict";\n\n  var r = \'[data-toggle="dropdown"]\',\n      o = function o(t) {\n    a(t).on("click.bs.dropdown", this.toggle);\n  };\n\n  function l(t) {\n    var e = t.attr("data-target");\n    e || (e = (e = t.attr("href")) && /#[A-Za-z]/.test(e) && e.replace(/.*(?=#[^\\s]*$)/, ""));\n    var i = "#" !== e ? a(document).find(e) : null;\n    return i && i.length ? i : t.parent();\n  }\n\n  function s(o) {\n    o && 3 === o.which || (a(".dropdown-backdrop").remove(), a(r).each(function () {\n      var t = a(this),\n          e = l(t),\n          i = {\n        relatedTarget: this\n      };\n      e.hasClass("open") && (o && "click" == o.type && /input|textarea/i.test(o.target.tagName) && a.contains(e[0], o.target) || (e.trigger(o = a.Event("hide.bs.dropdown", i)), o.isDefaultPrevented() || (t.attr("aria-expanded", "false"), e.removeClass("open").trigger(a.Event("hidden.bs.dropdown", i)))));\n    }));\n  }\n\n  o.VERSION = "3.4.1", o.prototype.toggle = function (t) {\n    var e = a(this);\n\n    if (!e.is(".disabled, :disabled")) {\n      var i = l(e),\n          o = i.hasClass("open");\n\n      if (s(), !o) {\n        "ontouchstart" in document.documentElement && !i.closest(".navbar-nav").length && a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click", s);\n        var n = {\n          relatedTarget: this\n        };\n        if (i.trigger(t = a.Event("show.bs.dropdown", n)), t.isDefaultPrevented()) return;\n        e.trigger("focus").attr("aria-expanded", "true"), i.toggleClass("open").trigger(a.Event("shown.bs.dropdown", n));\n      }\n\n      return !1;\n    }\n  }, o.prototype.keydown = function (t) {\n    if (/(38|40|27|32)/.test(t.which) && !/input|textarea/i.test(t.target.tagName)) {\n      var e = a(this);\n\n      if (t.preventDefault(), t.stopPropagation(), !e.is(".disabled, :disabled")) {\n        var i = l(e),\n            o = i.hasClass("open");\n        if (!o && 27 != t.which || o && 27 == t.which) return 27 == t.which && i.find(r).trigger("focus"), e.trigger("click");\n        var n = i.find(".dropdown-menu li:not(.disabled):visible a");\n\n        if (n.length) {\n          var s = n.index(t.target);\n          38 == t.which && 0 < s && s--, 40 == t.which && s < n.length - 1 && s++, ~s || (s = 0), n.eq(s).trigger("focus");\n        }\n      }\n    }\n  };\n  var t = a.fn.dropdown;\n  a.fn.dropdown = function e(i) {\n    return this.each(function () {\n      var t = a(this),\n          e = t.data("bs.dropdown");\n      e || t.data("bs.dropdown", e = new o(this)), "string" == typeof i && e[i].call(t);\n    });\n  }, a.fn.dropdown.Constructor = o, a.fn.dropdown.noConflict = function () {\n    return a.fn.dropdown = t, this;\n  }, a(document).on("click.bs.dropdown.data-api", s).on("click.bs.dropdown.data-api", ".dropdown form", function (t) {\n    t.stopPropagation();\n  }).on("click.bs.dropdown.data-api", r, o.prototype.toggle).on("keydown.bs.dropdown.data-api", r, o.prototype.keydown).on("keydown.bs.dropdown.data-api", ".dropdown-menu", o.prototype.keydown);\n}(jQuery), function (a) {\n  "use strict";\n\n  var s = function s(t, e) {\n    this.options = e, this.$body = a(document.body), this.$element = a(t), this.$dialog = this.$element.find(".modal-dialog"), this.$backdrop = null, this.isShown = null, this.originalBodyPad = null, this.scrollbarWidth = 0, this.ignoreBackdropClick = !1, this.fixedContent = ".navbar-fixed-top, .navbar-fixed-bottom", this.options.remote && this.$element.find(".modal-content").load(this.options.remote, a.proxy(function () {\n      this.$element.trigger("loaded.bs.modal");\n    }, this));\n  };\n\n  function r(o, n) {\n    return this.each(function () {\n      var t = a(this),\n          e = t.data("bs.modal"),\n          i = a.extend({}, s.DEFAULTS, t.data(), "object" == _typeof(o) && o);\n      e || t.data("bs.modal", e = new s(this, i)), "string" == typeof o ? e[o](n) : i.show && e.show(n);\n    });\n  }\n\n  s.VERSION = "3.4.1", s.TRANSITION_DURATION = 300, s.BACKDROP_TRANSITION_DURATION = 150, s.DEFAULTS = {\n    backdrop: !0,\n    keyboard: !0,\n    show: !0\n  }, s.prototype.toggle = function (t) {\n    return this.isShown ? this.hide() : this.show(t);\n  }, s.prototype.show = function (i) {\n    var o = this,\n        t = a.Event("show.bs.modal", {\n      relatedTarget: i\n    });\n    this.$element.trigger(t), this.isShown || t.isDefaultPrevented() || (this.isShown = !0, this.checkScrollbar(), this.setScrollbar(), this.$body.addClass("modal-open"), this.escape(), this.resize(), this.$element.on("click.dismiss.bs.modal", \'[data-dismiss="modal"]\', a.proxy(this.hide, this)), this.$dialog.on("mousedown.dismiss.bs.modal", function () {\n      o.$element.one("mouseup.dismiss.bs.modal", function (t) {\n        a(t.target).is(o.$element) && (o.ignoreBackdropClick = !0);\n      });\n    }), this.backdrop(function () {\n      var t = a.support.transition && o.$element.hasClass("fade");\n      o.$element.parent().length || o.$element.appendTo(o.$body), o.$element.show().scrollTop(0), o.adjustDialog(), t && o.$element[0].offsetWidth, o.$element.addClass("in"), o.enforceFocus();\n      var e = a.Event("shown.bs.modal", {\n        relatedTarget: i\n      });\n      t ? o.$dialog.one("bsTransitionEnd", function () {\n        o.$element.trigger("focus").trigger(e);\n      }).emulateTransitionEnd(s.TRANSITION_DURATION) : o.$element.trigger("focus").trigger(e);\n    }));\n  }, s.prototype.hide = function (t) {\n    t && t.preventDefault(), t = a.Event("hide.bs.modal"), this.$element.trigger(t), this.isShown && !t.isDefaultPrevented() && (this.isShown = !1, this.escape(), this.resize(), a(document).off("focusin.bs.modal"), this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"), this.$dialog.off("mousedown.dismiss.bs.modal"), a.support.transition && this.$element.hasClass("fade") ? this.$element.one("bsTransitionEnd", a.proxy(this.hideModal, this)).emulateTransitionEnd(s.TRANSITION_DURATION) : this.hideModal());\n  }, s.prototype.enforceFocus = function () {\n    a(document).off("focusin.bs.modal").on("focusin.bs.modal", a.proxy(function (t) {\n      document === t.target || this.$element[0] === t.target || this.$element.has(t.target).length || this.$element.trigger("focus");\n    }, this));\n  }, s.prototype.escape = function () {\n    this.isShown && this.options.keyboard ? this.$element.on("keydown.dismiss.bs.modal", a.proxy(function (t) {\n      27 == t.which && this.hide();\n    }, this)) : this.isShown || this.$element.off("keydown.dismiss.bs.modal");\n  }, s.prototype.resize = function () {\n    this.isShown ? a(window).on("resize.bs.modal", a.proxy(this.handleUpdate, this)) : a(window).off("resize.bs.modal");\n  }, s.prototype.hideModal = function () {\n    var t = this;\n    this.$element.hide(), this.backdrop(function () {\n      t.$body.removeClass("modal-open"), t.resetAdjustments(), t.resetScrollbar(), t.$element.trigger("hidden.bs.modal");\n    });\n  }, s.prototype.removeBackdrop = function () {\n    this.$backdrop && this.$backdrop.remove(), this.$backdrop = null;\n  }, s.prototype.backdrop = function (t) {\n    var e = this,\n        i = this.$element.hasClass("fade") ? "fade" : "";\n\n    if (this.isShown && this.options.backdrop) {\n      var o = a.support.transition && i;\n      if (this.$backdrop = a(document.createElement("div")).addClass("modal-backdrop " + i).appendTo(this.$body), this.$element.on("click.dismiss.bs.modal", a.proxy(function (t) {\n        this.ignoreBackdropClick ? this.ignoreBackdropClick = !1 : t.target === t.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus() : this.hide());\n      }, this)), o && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !t) return;\n      o ? this.$backdrop.one("bsTransitionEnd", t).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION) : t();\n    } else if (!this.isShown && this.$backdrop) {\n      this.$backdrop.removeClass("in");\n\n      var n = function n() {\n        e.removeBackdrop(), t && t();\n      };\n\n      a.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one("bsTransitionEnd", n).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION) : n();\n    } else t && t();\n  }, s.prototype.handleUpdate = function () {\n    this.adjustDialog();\n  }, s.prototype.adjustDialog = function () {\n    var t = this.$element[0].scrollHeight > document.documentElement.clientHeight;\n    this.$element.css({\n      paddingLeft: !this.bodyIsOverflowing && t ? this.scrollbarWidth : "",\n      paddingRight: this.bodyIsOverflowing && !t ? this.scrollbarWidth : ""\n    });\n  }, s.prototype.resetAdjustments = function () {\n    this.$element.css({\n      paddingLeft: "",\n      paddingRight: ""\n    });\n  }, s.prototype.checkScrollbar = function () {\n    var t = window.innerWidth;\n\n    if (!t) {\n      var e = document.documentElement.getBoundingClientRect();\n      t = e.right - Math.abs(e.left);\n    }\n\n    this.bodyIsOverflowing = document.body.clientWidth < t, this.scrollbarWidth = this.measureScrollbar();\n  }, s.prototype.setScrollbar = function () {\n    var t = parseInt(this.$body.css("padding-right") || 0, 10);\n    this.originalBodyPad = document.body.style.paddingRight || "";\n    var n = this.scrollbarWidth;\n    this.bodyIsOverflowing && (this.$body.css("padding-right", t + n), a(this.fixedContent).each(function (t, e) {\n      var i = e.style.paddingRight,\n          o = a(e).css("padding-right");\n      a(e).data("padding-right", i).css("padding-right", parseFloat(o) + n + "px");\n    }));\n  }, s.prototype.resetScrollbar = function () {\n    this.$body.css("padding-right", this.originalBodyPad), a(this.fixedContent).each(function (t, e) {\n      var i = a(e).data("padding-right");\n      a(e).removeData("padding-right"), e.style.paddingRight = i || "";\n    });\n  }, s.prototype.measureScrollbar = function () {\n    var t = document.createElement("div");\n    t.className = "modal-scrollbar-measure", this.$body.append(t);\n    var e = t.offsetWidth - t.clientWidth;\n    return this.$body[0].removeChild(t), e;\n  };\n  var t = a.fn.modal;\n  a.fn.modal = r, a.fn.modal.Constructor = s, a.fn.modal.noConflict = function () {\n    return a.fn.modal = t, this;\n  }, a(document).on("click.bs.modal.data-api", \'[data-toggle="modal"]\', function (t) {\n    var e = a(this),\n        i = e.attr("href"),\n        o = e.attr("data-target") || i && i.replace(/.*(?=#[^\\s]+$)/, ""),\n        n = a(document).find(o),\n        s = n.data("bs.modal") ? "toggle" : a.extend({\n      remote: !/#/.test(i) && i\n    }, n.data(), e.data());\n    e.is("a") && t.preventDefault(), n.one("show.bs.modal", function (t) {\n      t.isDefaultPrevented() || n.one("hidden.bs.modal", function () {\n        e.is(":visible") && e.trigger("focus");\n      });\n    }), r.call(n, s, this);\n  });\n}(jQuery), function (g) {\n  "use strict";\n\n  var o = ["sanitize", "whiteList", "sanitizeFn"],\n      a = ["background", "cite", "href", "itemtype", "longdesc", "poster", "src", "xlink:href"],\n      t = {\n    "*": ["class", "dir", "id", "lang", "role", /^aria-[\\w-]*$/i],\n    a: ["target", "href", "title", "rel"],\n    area: [],\n    b: [],\n    br: [],\n    col: [],\n    code: [],\n    div: [],\n    em: [],\n    hr: [],\n    h1: [],\n    h2: [],\n    h3: [],\n    h4: [],\n    h5: [],\n    h6: [],\n    i: [],\n    img: ["src", "alt", "title", "width", "height"],\n    li: [],\n    ol: [],\n    p: [],\n    pre: [],\n    s: [],\n    small: [],\n    span: [],\n    sub: [],\n    sup: [],\n    strong: [],\n    u: [],\n    ul: []\n  },\n      r = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,\n      l = /^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;\n\n  function u(t, e) {\n    var i = t.nodeName.toLowerCase();\n    if (-1 !== g.inArray(i, e)) return -1 === g.inArray(i, a) || Boolean(t.nodeValue.match(r) || t.nodeValue.match(l));\n\n    for (var o = g(e).filter(function (t, e) {\n      return e instanceof RegExp;\n    }), n = 0, s = o.length; n < s; n++) {\n      if (i.match(o[n])) return !0;\n    }\n\n    return !1;\n  }\n\n  function n(t, e, i) {\n    if (0 === t.length) return t;\n    if (i && "function" == typeof i) return i(t);\n    if (!document.implementation || !document.implementation.createHTMLDocument) return t;\n    var o = document.implementation.createHTMLDocument("sanitization");\n    o.body.innerHTML = t;\n\n    for (var n = g.map(e, function (t, e) {\n      return e;\n    }), s = g(o.body).find("*"), a = 0, r = s.length; a < r; a++) {\n      var l = s[a],\n          h = l.nodeName.toLowerCase();\n      if (-1 !== g.inArray(h, n)) for (var d = g.map(l.attributes, function (t) {\n        return t;\n      }), p = [].concat(e["*"] || [], e[h] || []), c = 0, f = d.length; c < f; c++) {\n        u(d[c], p) || l.removeAttribute(d[c].nodeName);\n      } else l.parentNode.removeChild(l);\n    }\n\n    return o.body.innerHTML;\n  }\n\n  var m = function m(t, e) {\n    this.type = null, this.options = null, this.enabled = null, this.timeout = null, this.hoverState = null, this.$element = null, this.inState = null, this.init("tooltip", t, e);\n  };\n\n  m.VERSION = "3.4.1", m.TRANSITION_DURATION = 150, m.DEFAULTS = {\n    animation: !0,\n    placement: "top",\n    selector: !1,\n    template: \'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>\',\n    trigger: "hover focus",\n    title: "",\n    delay: 0,\n    html: !1,\n    container: !1,\n    viewport: {\n      selector: "body",\n      padding: 0\n    },\n    sanitize: !0,\n    sanitizeFn: null,\n    whiteList: t\n  }, m.prototype.init = function (t, e, i) {\n    if (this.enabled = !0, this.type = t, this.$element = g(e), this.options = this.getOptions(i), this.$viewport = this.options.viewport && g(document).find(g.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : this.options.viewport.selector || this.options.viewport), this.inState = {\n      click: !1,\n      hover: !1,\n      focus: !1\n    }, this.$element[0] instanceof document.constructor && !this.options.selector) throw new Error("`selector` option must be specified when initializing " + this.type + " on the window.document object!");\n\n    for (var o = this.options.trigger.split(" "), n = o.length; n--;) {\n      var s = o[n];\n      if ("click" == s) this.$element.on("click." + this.type, this.options.selector, g.proxy(this.toggle, this));else if ("manual" != s) {\n        var a = "hover" == s ? "mouseenter" : "focusin",\n            r = "hover" == s ? "mouseleave" : "focusout";\n        this.$element.on(a + "." + this.type, this.options.selector, g.proxy(this.enter, this)), this.$element.on(r + "." + this.type, this.options.selector, g.proxy(this.leave, this));\n      }\n    }\n\n    this.options.selector ? this._options = g.extend({}, this.options, {\n      trigger: "manual",\n      selector: ""\n    }) : this.fixTitle();\n  }, m.prototype.getDefaults = function () {\n    return m.DEFAULTS;\n  }, m.prototype.getOptions = function (t) {\n    var e = this.$element.data();\n\n    for (var i in e) {\n      e.hasOwnProperty(i) && -1 !== g.inArray(i, o) && delete e[i];\n    }\n\n    return (t = g.extend({}, this.getDefaults(), e, t)).delay && "number" == typeof t.delay && (t.delay = {\n      show: t.delay,\n      hide: t.delay\n    }), t.sanitize && (t.template = n(t.template, t.whiteList, t.sanitizeFn)), t;\n  }, m.prototype.getDelegateOptions = function () {\n    var i = {},\n        o = this.getDefaults();\n    return this._options && g.each(this._options, function (t, e) {\n      o[t] != e && (i[t] = e);\n    }), i;\n  }, m.prototype.enter = function (t) {\n    var e = t instanceof this.constructor ? t : g(t.currentTarget).data("bs." + this.type);\n    if (e || (e = new this.constructor(t.currentTarget, this.getDelegateOptions()), g(t.currentTarget).data("bs." + this.type, e)), t instanceof g.Event && (e.inState["focusin" == t.type ? "focus" : "hover"] = !0), e.tip().hasClass("in") || "in" == e.hoverState) e.hoverState = "in";else {\n      if (clearTimeout(e.timeout), e.hoverState = "in", !e.options.delay || !e.options.delay.show) return e.show();\n      e.timeout = setTimeout(function () {\n        "in" == e.hoverState && e.show();\n      }, e.options.delay.show);\n    }\n  }, m.prototype.isInStateTrue = function () {\n    for (var t in this.inState) {\n      if (this.inState[t]) return !0;\n    }\n\n    return !1;\n  }, m.prototype.leave = function (t) {\n    var e = t instanceof this.constructor ? t : g(t.currentTarget).data("bs." + this.type);\n\n    if (e || (e = new this.constructor(t.currentTarget, this.getDelegateOptions()), g(t.currentTarget).data("bs." + this.type, e)), t instanceof g.Event && (e.inState["focusout" == t.type ? "focus" : "hover"] = !1), !e.isInStateTrue()) {\n      if (clearTimeout(e.timeout), e.hoverState = "out", !e.options.delay || !e.options.delay.hide) return e.hide();\n      e.timeout = setTimeout(function () {\n        "out" == e.hoverState && e.hide();\n      }, e.options.delay.hide);\n    }\n  }, m.prototype.show = function () {\n    var t = g.Event("show.bs." + this.type);\n\n    if (this.hasContent() && this.enabled) {\n      this.$element.trigger(t);\n      var e = g.contains(this.$element[0].ownerDocument.documentElement, this.$element[0]);\n      if (t.isDefaultPrevented() || !e) return;\n      var i = this,\n          o = this.tip(),\n          n = this.getUID(this.type);\n      this.setContent(), o.attr("id", n), this.$element.attr("aria-describedby", n), this.options.animation && o.addClass("fade");\n      var s = "function" == typeof this.options.placement ? this.options.placement.call(this, o[0], this.$element[0]) : this.options.placement,\n          a = /\\s?auto?\\s?/i,\n          r = a.test(s);\n      r && (s = s.replace(a, "") || "top"), o.detach().css({\n        top: 0,\n        left: 0,\n        display: "block"\n      }).addClass(s).data("bs." + this.type, this), this.options.container ? o.appendTo(g(document).find(this.options.container)) : o.insertAfter(this.$element), this.$element.trigger("inserted.bs." + this.type);\n      var l = this.getPosition(),\n          h = o[0].offsetWidth,\n          d = o[0].offsetHeight;\n\n      if (r) {\n        var p = s,\n            c = this.getPosition(this.$viewport);\n        s = "bottom" == s && l.bottom + d > c.bottom ? "top" : "top" == s && l.top - d < c.top ? "bottom" : "right" == s && l.right + h > c.width ? "left" : "left" == s && l.left - h < c.left ? "right" : s, o.removeClass(p).addClass(s);\n      }\n\n      var f = this.getCalculatedOffset(s, l, h, d);\n      this.applyPlacement(f, s);\n\n      var u = function u() {\n        var t = i.hoverState;\n        i.$element.trigger("shown.bs." + i.type), i.hoverState = null, "out" == t && i.leave(i);\n      };\n\n      g.support.transition && this.$tip.hasClass("fade") ? o.one("bsTransitionEnd", u).emulateTransitionEnd(m.TRANSITION_DURATION) : u();\n    }\n  }, m.prototype.applyPlacement = function (t, e) {\n    var i = this.tip(),\n        o = i[0].offsetWidth,\n        n = i[0].offsetHeight,\n        s = parseInt(i.css("margin-top"), 10),\n        a = parseInt(i.css("margin-left"), 10);\n    isNaN(s) && (s = 0), isNaN(a) && (a = 0), t.top += s, t.left += a, g.offset.setOffset(i[0], g.extend({\n      using: function using(t) {\n        i.css({\n          top: Math.round(t.top),\n          left: Math.round(t.left)\n        });\n      }\n    }, t), 0), i.addClass("in");\n    var r = i[0].offsetWidth,\n        l = i[0].offsetHeight;\n    "top" == e && l != n && (t.top = t.top + n - l);\n    var h = this.getViewportAdjustedDelta(e, t, r, l);\n    h.left ? t.left += h.left : t.top += h.top;\n    var d = /top|bottom/.test(e),\n        p = d ? 2 * h.left - o + r : 2 * h.top - n + l,\n        c = d ? "offsetWidth" : "offsetHeight";\n    i.offset(t), this.replaceArrow(p, i[0][c], d);\n  }, m.prototype.replaceArrow = function (t, e, i) {\n    this.arrow().css(i ? "left" : "top", 50 * (1 - t / e) + "%").css(i ? "top" : "left", "");\n  }, m.prototype.setContent = function () {\n    var t = this.tip(),\n        e = this.getTitle();\n    this.options.html ? (this.options.sanitize && (e = n(e, this.options.whiteList, this.options.sanitizeFn)), t.find(".tooltip-inner").html(e)) : t.find(".tooltip-inner").text(e), t.removeClass("fade in top bottom left right");\n  }, m.prototype.hide = function (t) {\n    var e = this,\n        i = g(this.$tip),\n        o = g.Event("hide.bs." + this.type);\n\n    function n() {\n      "in" != e.hoverState && i.detach(), e.$element && e.$element.removeAttr("aria-describedby").trigger("hidden.bs." + e.type), t && t();\n    }\n\n    if (this.$element.trigger(o), !o.isDefaultPrevented()) return i.removeClass("in"), g.support.transition && i.hasClass("fade") ? i.one("bsTransitionEnd", n).emulateTransitionEnd(m.TRANSITION_DURATION) : n(), this.hoverState = null, this;\n  }, m.prototype.fixTitle = function () {\n    var t = this.$element;\n    (t.attr("title") || "string" != typeof t.attr("data-original-title")) && t.attr("data-original-title", t.attr("title") || "").attr("title", "");\n  }, m.prototype.hasContent = function () {\n    return this.getTitle();\n  }, m.prototype.getPosition = function (t) {\n    var e = (t = t || this.$element)[0],\n        i = "BODY" == e.tagName,\n        o = e.getBoundingClientRect();\n    null == o.width && (o = g.extend({}, o, {\n      width: o.right - o.left,\n      height: o.bottom - o.top\n    }));\n    var n = window.SVGElement && e instanceof window.SVGElement,\n        s = i ? {\n      top: 0,\n      left: 0\n    } : n ? null : t.offset(),\n        a = {\n      scroll: i ? document.documentElement.scrollTop || document.body.scrollTop : t.scrollTop()\n    },\n        r = i ? {\n      width: g(window).width(),\n      height: g(window).height()\n    } : null;\n    return g.extend({}, o, a, r, s);\n  }, m.prototype.getCalculatedOffset = function (t, e, i, o) {\n    return "bottom" == t ? {\n      top: e.top + e.height,\n      left: e.left + e.width / 2 - i / 2\n    } : "top" == t ? {\n      top: e.top - o,\n      left: e.left + e.width / 2 - i / 2\n    } : "left" == t ? {\n      top: e.top + e.height / 2 - o / 2,\n      left: e.left - i\n    } : {\n      top: e.top + e.height / 2 - o / 2,\n      left: e.left + e.width\n    };\n  }, m.prototype.getViewportAdjustedDelta = function (t, e, i, o) {\n    var n = {\n      top: 0,\n      left: 0\n    };\n    if (!this.$viewport) return n;\n    var s = this.options.viewport && this.options.viewport.padding || 0,\n        a = this.getPosition(this.$viewport);\n\n    if (/right|left/.test(t)) {\n      var r = e.top - s - a.scroll,\n          l = e.top + s - a.scroll + o;\n      r < a.top ? n.top = a.top - r : l > a.top + a.height && (n.top = a.top + a.height - l);\n    } else {\n      var h = e.left - s,\n          d = e.left + s + i;\n      h < a.left ? n.left = a.left - h : d > a.right && (n.left = a.left + a.width - d);\n    }\n\n    return n;\n  }, m.prototype.getTitle = function () {\n    var t = this.$element,\n        e = this.options;\n    return t.attr("data-original-title") || ("function" == typeof e.title ? e.title.call(t[0]) : e.title);\n  }, m.prototype.getUID = function (t) {\n    for (; t += ~~(1e6 * Math.random()), document.getElementById(t);) {\n      ;\n    }\n\n    return t;\n  }, m.prototype.tip = function () {\n    if (!this.$tip && (this.$tip = g(this.options.template), 1 != this.$tip.length)) throw new Error(this.type + " `template` option must consist of exactly 1 top-level element!");\n    return this.$tip;\n  }, m.prototype.arrow = function () {\n    return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow");\n  }, m.prototype.enable = function () {\n    this.enabled = !0;\n  }, m.prototype.disable = function () {\n    this.enabled = !1;\n  }, m.prototype.toggleEnabled = function () {\n    this.enabled = !this.enabled;\n  }, m.prototype.toggle = function (t) {\n    var e = this;\n    t && ((e = g(t.currentTarget).data("bs." + this.type)) || (e = new this.constructor(t.currentTarget, this.getDelegateOptions()), g(t.currentTarget).data("bs." + this.type, e))), t ? (e.inState.click = !e.inState.click, e.isInStateTrue() ? e.enter(e) : e.leave(e)) : e.tip().hasClass("in") ? e.leave(e) : e.enter(e);\n  }, m.prototype.destroy = function () {\n    var t = this;\n    clearTimeout(this.timeout), this.hide(function () {\n      t.$element.off("." + t.type).removeData("bs." + t.type), t.$tip && t.$tip.detach(), t.$tip = null, t.$arrow = null, t.$viewport = null, t.$element = null;\n    });\n  }, m.prototype.sanitizeHtml = function (t) {\n    return n(t, this.options.whiteList, this.options.sanitizeFn);\n  };\n  var e = g.fn.tooltip;\n  g.fn.tooltip = function i(o) {\n    return this.each(function () {\n      var t = g(this),\n          e = t.data("bs.tooltip"),\n          i = "object" == _typeof(o) && o;\n      !e && /destroy|hide/.test(o) || (e || t.data("bs.tooltip", e = new m(this, i)), "string" == typeof o && e[o]());\n    });\n  }, g.fn.tooltip.Constructor = m, g.fn.tooltip.noConflict = function () {\n    return g.fn.tooltip = e, this;\n  };\n}(jQuery), function (n) {\n  "use strict";\n\n  var s = function s(t, e) {\n    this.init("popover", t, e);\n  };\n\n  if (!n.fn.tooltip) throw new Error("Popover requires tooltip.js");\n  s.VERSION = "3.4.1", s.DEFAULTS = n.extend({}, n.fn.tooltip.Constructor.DEFAULTS, {\n    placement: "right",\n    trigger: "click",\n    content: "",\n    template: \'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>\'\n  }), ((s.prototype = n.extend({}, n.fn.tooltip.Constructor.prototype)).constructor = s).prototype.getDefaults = function () {\n    return s.DEFAULTS;\n  }, s.prototype.setContent = function () {\n    var t = this.tip(),\n        e = this.getTitle(),\n        i = this.getContent();\n\n    if (this.options.html) {\n      var o = _typeof(i);\n\n      this.options.sanitize && (e = this.sanitizeHtml(e), "string" === o && (i = this.sanitizeHtml(i))), t.find(".popover-title").html(e), t.find(".popover-content").children().detach().end()["string" === o ? "html" : "append"](i);\n    } else t.find(".popover-title").text(e), t.find(".popover-content").children().detach().end().text(i);\n\n    t.removeClass("fade top bottom left right in"), t.find(".popover-title").html() || t.find(".popover-title").hide();\n  }, s.prototype.hasContent = function () {\n    return this.getTitle() || this.getContent();\n  }, s.prototype.getContent = function () {\n    var t = this.$element,\n        e = this.options;\n    return t.attr("data-content") || ("function" == typeof e.content ? e.content.call(t[0]) : e.content);\n  }, s.prototype.arrow = function () {\n    return this.$arrow = this.$arrow || this.tip().find(".arrow");\n  };\n  var t = n.fn.popover;\n  n.fn.popover = function e(o) {\n    return this.each(function () {\n      var t = n(this),\n          e = t.data("bs.popover"),\n          i = "object" == _typeof(o) && o;\n      !e && /destroy|hide/.test(o) || (e || t.data("bs.popover", e = new s(this, i)), "string" == typeof o && e[o]());\n    });\n  }, n.fn.popover.Constructor = s, n.fn.popover.noConflict = function () {\n    return n.fn.popover = t, this;\n  };\n}(jQuery), function (s) {\n  "use strict";\n\n  function n(t, e) {\n    this.$body = s(document.body), this.$scrollElement = s(t).is(document.body) ? s(window) : s(t), this.options = s.extend({}, n.DEFAULTS, e), this.selector = (this.options.target || "") + " .nav li > a", this.offsets = [], this.targets = [], this.activeTarget = null, this.scrollHeight = 0, this.$scrollElement.on("scroll.bs.scrollspy", s.proxy(this.process, this)), this.refresh(), this.process();\n  }\n\n  function e(o) {\n    return this.each(function () {\n      var t = s(this),\n          e = t.data("bs.scrollspy"),\n          i = "object" == _typeof(o) && o;\n      e || t.data("bs.scrollspy", e = new n(this, i)), "string" == typeof o && e[o]();\n    });\n  }\n\n  n.VERSION = "3.4.1", n.DEFAULTS = {\n    offset: 10\n  }, n.prototype.getScrollHeight = function () {\n    return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight);\n  }, n.prototype.refresh = function () {\n    var t = this,\n        o = "offset",\n        n = 0;\n    this.offsets = [], this.targets = [], this.scrollHeight = this.getScrollHeight(), s.isWindow(this.$scrollElement[0]) || (o = "position", n = this.$scrollElement.scrollTop()), this.$body.find(this.selector).map(function () {\n      var t = s(this),\n          e = t.data("target") || t.attr("href"),\n          i = /^#./.test(e) && s(e);\n      return i && i.length && i.is(":visible") && [[i[o]().top + n, e]] || null;\n    }).sort(function (t, e) {\n      return t[0] - e[0];\n    }).each(function () {\n      t.offsets.push(this[0]), t.targets.push(this[1]);\n    });\n  }, n.prototype.process = function () {\n    var t,\n        e = this.$scrollElement.scrollTop() + this.options.offset,\n        i = this.getScrollHeight(),\n        o = this.options.offset + i - this.$scrollElement.height(),\n        n = this.offsets,\n        s = this.targets,\n        a = this.activeTarget;\n    if (this.scrollHeight != i && this.refresh(), o <= e) return a != (t = s[s.length - 1]) && this.activate(t);\n    if (a && e < n[0]) return this.activeTarget = null, this.clear();\n\n    for (t = n.length; t--;) {\n      a != s[t] && e >= n[t] && (n[t + 1] === undefined || e < n[t + 1]) && this.activate(s[t]);\n    }\n  }, n.prototype.activate = function (t) {\n    this.activeTarget = t, this.clear();\n    var e = this.selector + \'[data-target="\' + t + \'"],\' + this.selector + \'[href="\' + t + \'"]\',\n        i = s(e).parents("li").addClass("active");\n    i.parent(".dropdown-menu").length && (i = i.closest("li.dropdown").addClass("active")), i.trigger("activate.bs.scrollspy");\n  }, n.prototype.clear = function () {\n    s(this.selector).parentsUntil(this.options.target, ".active").removeClass("active");\n  };\n  var t = s.fn.scrollspy;\n  s.fn.scrollspy = e, s.fn.scrollspy.Constructor = n, s.fn.scrollspy.noConflict = function () {\n    return s.fn.scrollspy = t, this;\n  }, s(window).on("load.bs.scrollspy.data-api", function () {\n    s(\'[data-spy="scroll"]\').each(function () {\n      var t = s(this);\n      e.call(t, t.data());\n    });\n  });\n}(jQuery), function (r) {\n  "use strict";\n\n  var a = function a(t) {\n    this.element = r(t);\n  };\n\n  function e(i) {\n    return this.each(function () {\n      var t = r(this),\n          e = t.data("bs.tab");\n      e || t.data("bs.tab", e = new a(this)), "string" == typeof i && e[i]();\n    });\n  }\n\n  a.VERSION = "3.4.1", a.TRANSITION_DURATION = 150, a.prototype.show = function () {\n    var t = this.element,\n        e = t.closest("ul:not(.dropdown-menu)"),\n        i = t.data("target");\n\n    if (i || (i = (i = t.attr("href")) && i.replace(/.*(?=#[^\\s]*$)/, "")), !t.parent("li").hasClass("active")) {\n      var o = e.find(".active:last a"),\n          n = r.Event("hide.bs.tab", {\n        relatedTarget: t[0]\n      }),\n          s = r.Event("show.bs.tab", {\n        relatedTarget: o[0]\n      });\n\n      if (o.trigger(n), t.trigger(s), !s.isDefaultPrevented() && !n.isDefaultPrevented()) {\n        var a = r(document).find(i);\n        this.activate(t.closest("li"), e), this.activate(a, a.parent(), function () {\n          o.trigger({\n            type: "hidden.bs.tab",\n            relatedTarget: t[0]\n          }), t.trigger({\n            type: "shown.bs.tab",\n            relatedTarget: o[0]\n          });\n        });\n      }\n    }\n  }, a.prototype.activate = function (t, e, i) {\n    var o = e.find("> .active"),\n        n = i && r.support.transition && (o.length && o.hasClass("fade") || !!e.find("> .fade").length);\n\n    function s() {\n      o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find(\'[data-toggle="tab"]\').attr("aria-expanded", !1), t.addClass("active").find(\'[data-toggle="tab"]\').attr("aria-expanded", !0), n ? (t[0].offsetWidth, t.addClass("in")) : t.removeClass("fade"), t.parent(".dropdown-menu").length && t.closest("li.dropdown").addClass("active").end().find(\'[data-toggle="tab"]\').attr("aria-expanded", !0), i && i();\n    }\n\n    o.length && n ? o.one("bsTransitionEnd", s).emulateTransitionEnd(a.TRANSITION_DURATION) : s(), o.removeClass("in");\n  };\n  var t = r.fn.tab;\n  r.fn.tab = e, r.fn.tab.Constructor = a, r.fn.tab.noConflict = function () {\n    return r.fn.tab = t, this;\n  };\n\n  var i = function i(t) {\n    t.preventDefault(), e.call(r(this), "show");\n  };\n\n  r(document).on("click.bs.tab.data-api", \'[data-toggle="tab"]\', i).on("click.bs.tab.data-api", \'[data-toggle="pill"]\', i);\n}(jQuery), function (l) {\n  "use strict";\n\n  var h = function h(t, e) {\n    this.options = l.extend({}, h.DEFAULTS, e);\n    var i = this.options.target === h.DEFAULTS.target ? l(this.options.target) : l(document).find(this.options.target);\n    this.$target = i.on("scroll.bs.affix.data-api", l.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", l.proxy(this.checkPositionWithEventLoop, this)), this.$element = l(t), this.affixed = null, this.unpin = null, this.pinnedOffset = null, this.checkPosition();\n  };\n\n  function i(o) {\n    return this.each(function () {\n      var t = l(this),\n          e = t.data("bs.affix"),\n          i = "object" == _typeof(o) && o;\n      e || t.data("bs.affix", e = new h(this, i)), "string" == typeof o && e[o]();\n    });\n  }\n\n  h.VERSION = "3.4.1", h.RESET = "affix affix-top affix-bottom", h.DEFAULTS = {\n    offset: 0,\n    target: window\n  }, h.prototype.getState = function (t, e, i, o) {\n    var n = this.$target.scrollTop(),\n        s = this.$element.offset(),\n        a = this.$target.height();\n    if (null != i && "top" == this.affixed) return n < i && "top";\n    if ("bottom" == this.affixed) return null != i ? !(n + this.unpin <= s.top) && "bottom" : !(n + a <= t - o) && "bottom";\n    var r = null == this.affixed,\n        l = r ? n : s.top;\n    return null != i && n <= i ? "top" : null != o && t - o <= l + (r ? a : e) && "bottom";\n  }, h.prototype.getPinnedOffset = function () {\n    if (this.pinnedOffset) return this.pinnedOffset;\n    this.$element.removeClass(h.RESET).addClass("affix");\n    var t = this.$target.scrollTop(),\n        e = this.$element.offset();\n    return this.pinnedOffset = e.top - t;\n  }, h.prototype.checkPositionWithEventLoop = function () {\n    setTimeout(l.proxy(this.checkPosition, this), 1);\n  }, h.prototype.checkPosition = function () {\n    if (this.$element.is(":visible")) {\n      var t = this.$element.height(),\n          e = this.options.offset,\n          i = e.top,\n          o = e.bottom,\n          n = Math.max(l(document).height(), l(document.body).height());\n      "object" != _typeof(e) && (o = i = e), "function" == typeof i && (i = e.top(this.$element)), "function" == typeof o && (o = e.bottom(this.$element));\n      var s = this.getState(n, t, i, o);\n\n      if (this.affixed != s) {\n        null != this.unpin && this.$element.css("top", "");\n        var a = "affix" + (s ? "-" + s : ""),\n            r = l.Event(a + ".bs.affix");\n        if (this.$element.trigger(r), r.isDefaultPrevented()) return;\n        this.affixed = s, this.unpin = "bottom" == s ? this.getPinnedOffset() : null, this.$element.removeClass(h.RESET).addClass(a).trigger(a.replace("affix", "affixed") + ".bs.affix");\n      }\n\n      "bottom" == s && this.$element.offset({\n        top: n - t - o\n      });\n    }\n  };\n  var t = l.fn.affix;\n  l.fn.affix = i, l.fn.affix.Constructor = h, l.fn.affix.noConflict = function () {\n    return l.fn.affix = t, this;\n  }, l(window).on("load", function () {\n    l(\'[data-spy="affix"]\').each(function () {\n      var t = l(this),\n          e = t.data();\n      e.offset = e.offset || {}, null != e.offsetBottom && (e.offset.bottom = e.offsetBottom), null != e.offsetTop && (e.offset.top = e.offsetTop), i.call(t, e);\n    });\n  });\n}(jQuery);'},381:function(n,e,t){t(3).run(["$q",function(n){$("iframe").each(function(){var n,e,t=$(this).attr("src");t&&-1<t.indexOf("youtube.com")&&(e=(e=(n=t.split("/"))[n.length-1]).split("?")[0],n="https://img.youtube.com/vi/".concat(e,"/hqdefault.jpg"),-1===t.indexOf("?rel")&&(t+="?rel=0"),t=$('<div poster="'.concat(n,'" data-src="').concat(t,'" you-tube="true" video-id="').concat(e,'"></div>')),(e=$(this).parent()).hide(),e.after(t))})}])},382:function(n,e,t){t(383),t(385),t(387),t(388),t(3).run(["externalScript",function(n){$(".before-after").each(function(n){var t=$(this);t.css("margin","0 0 1rem;"),$(this).find("img").each(function(n){var e=$(this).attr("src");$(this).attr("src",e),$(this).appendTo(t),n&&$(this).hide()}),$(this).find(".image").remove()});var e=$(".before-after img"),t=e.length;t&&e.load(function(){--t||($(".before-after img").show(),$(".before-after").each(function(){var n=$(this).attr("data-orientation"),e=$(this).attr("data-before-label"),t=$(this).attr("data-after-label"),i={};n&&(i.orientation=n),e&&(i.before_label=t),t&&(i.after_label=t),$(this).twentytwenty(i),$(this).find(".twentytwenty-before-label").attr("data-content",e),$(this).find(".twentytwenty-after-label").attr("data-content",t)}))})}])},383:function(n,e,t){t(9)(t(384))},384:function(n,e){n.exports="// DOM.event.move\n//\n// 2.0.0\n//\n// Stephen Band\n//\n// Triggers 'movestart', 'move' and 'moveend' events after\n// mousemoves following a mousedown cross a distance threshold,\n// similar to the native 'dragstart', 'drag' and 'dragend' events.\n// Move events are throttled to animation frames. Move event objects\n// have the properties:\n//\n// pageX:\n// pageY:     Page coordinates of pointer.\n// startX:\n// startY:    Page coordinates of pointer at movestart.\n// distX:\n// distY:     Distance the pointer has moved since movestart.\n// deltaX:\n// deltaY:    Distance the finger has moved since last event.\n// velocityX:\n// velocityY: Average velocity over last few events.\n(function (fn) {\n  if (typeof define === 'function' && define.amd) {\n    define([], fn);\n  } else if (typeof module !== \"undefined\" && module !== null && module.exports) {\n    module.exports = fn;\n  } else {\n    fn();\n  }\n})(function () {\n  var assign = Object.assign || window.jQuery && jQuery.extend; // Number of pixels a pressed pointer travels before movestart\n  // event is fired.\n\n  var threshold = 8; // Shim for requestAnimationFrame, falling back to timer. See:\n  // see http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n\n  var requestFrame = function () {\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (fn, element) {\n      return window.setTimeout(function () {\n        fn();\n      }, 25);\n    };\n  }(); // Shim for customEvent\n  // see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#Polyfill\n\n\n  (function () {\n    if (typeof window.CustomEvent === \"function\") return false;\n\n    function CustomEvent(event, params) {\n      params = params || {\n        bubbles: false,\n        cancelable: false,\n        detail: undefined\n      };\n      var evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n      return evt;\n    }\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent;\n  })();\n\n  var ignoreTags = {\n    textarea: true,\n    input: true,\n    select: true,\n    button: true\n  };\n  var mouseevents = {\n    move: 'mousemove',\n    cancel: 'mouseup dragstart',\n    end: 'mouseup'\n  };\n  var touchevents = {\n    move: 'touchmove',\n    cancel: 'touchend',\n    end: 'touchend'\n  };\n  var rspaces = /\\s+/; // DOM Events\n\n  var eventOptions = {\n    bubbles: true,\n    cancelable: true\n  };\n  var eventsSymbol = typeof Symbol === \"function\" ? Symbol('events') : {};\n\n  function createEvent(type) {\n    return new CustomEvent(type, eventOptions);\n  }\n\n  function getEvents(node) {\n    return node[eventsSymbol] || (node[eventsSymbol] = {});\n  }\n\n  function on(node, types, fn, data, selector) {\n    types = types.split(rspaces);\n    var events = getEvents(node);\n    var i = types.length;\n    var handlers, type;\n\n    function handler(e) {\n      fn(e, data);\n    }\n\n    while (i--) {\n      type = types[i];\n      handlers = events[type] || (events[type] = []);\n      handlers.push([fn, handler]);\n      node.addEventListener(type, handler);\n    }\n  }\n\n  function off(node, types, fn, selector) {\n    types = types.split(rspaces);\n    var events = getEvents(node);\n    var i = types.length;\n    var type, handlers, k;\n\n    if (!events) {\n      return;\n    }\n\n    while (i--) {\n      type = types[i];\n      handlers = events[type];\n\n      if (!handlers) {\n        continue;\n      }\n\n      k = handlers.length;\n\n      while (k--) {\n        if (handlers[k][0] === fn) {\n          node.removeEventListener(type, handlers[k][1]);\n          handlers.splice(k, 1);\n        }\n      }\n    }\n  }\n\n  function trigger(node, type, properties) {\n    // Don't cache events. It prevents you from triggering an event of a\n    // given type from inside the handler of another event of that type.\n    var event = createEvent(type);\n\n    if (properties) {\n      assign(event, properties);\n    }\n\n    node.dispatchEvent(event);\n  } // Constructors\n\n\n  function Timer(fn) {\n    var callback = fn,\n        active = false,\n        running = false;\n\n    function trigger(time) {\n      if (active) {\n        callback();\n        requestFrame(trigger);\n        running = true;\n        active = false;\n      } else {\n        running = false;\n      }\n    }\n\n    this.kick = function (fn) {\n      active = true;\n\n      if (!running) {\n        trigger();\n      }\n    };\n\n    this.end = function (fn) {\n      var cb = callback;\n\n      if (!fn) {\n        return;\n      } // If the timer is not running, simply call the end callback.\n\n\n      if (!running) {\n        fn();\n      } // If the timer is running, and has been kicked lately, then\n      // queue up the current callback and the end callback, otherwise\n      // just the end callback.\n      else {\n          callback = active ? function () {\n            cb();\n            fn();\n          } : fn;\n          active = true;\n        }\n    };\n  } // Functions\n\n\n  function noop() {}\n\n  function preventDefault(e) {\n    e.preventDefault();\n  }\n\n  function isIgnoreTag(e) {\n    return !!ignoreTags[e.target.tagName.toLowerCase()];\n  }\n\n  function isPrimaryButton(e) {\n    // Ignore mousedowns on any button other than the left (or primary)\n    // mouse button, or when a modifier key is pressed.\n    return e.which === 1 && !e.ctrlKey && !e.altKey;\n  }\n\n  function identifiedTouch(touchList, id) {\n    var i, l;\n\n    if (touchList.identifiedTouch) {\n      return touchList.identifiedTouch(id);\n    } // touchList.identifiedTouch() does not exist in\n    // webkit yet… we must do the search ourselves...\n\n\n    i = -1;\n    l = touchList.length;\n\n    while (++i < l) {\n      if (touchList[i].identifier === id) {\n        return touchList[i];\n      }\n    }\n  }\n\n  function changedTouch(e, data) {\n    var touch = identifiedTouch(e.changedTouches, data.identifier); // This isn't the touch you're looking for.\n\n    if (!touch) {\n      return;\n    } // Chrome Android (at least) includes touches that have not\n    // changed in e.changedTouches. That's a bit annoying. Check\n    // that this touch has changed.\n\n\n    if (touch.pageX === data.pageX && touch.pageY === data.pageY) {\n      return;\n    }\n\n    return touch;\n  } // Handlers that decide when the first movestart is triggered\n\n\n  function mousedown(e) {\n    // Ignore non-primary buttons\n    if (!isPrimaryButton(e)) {\n      return;\n    } // Ignore form and interactive elements\n\n\n    if (isIgnoreTag(e)) {\n      return;\n    }\n\n    on(document, mouseevents.move, mousemove, e);\n    on(document, mouseevents.cancel, mouseend, e);\n  }\n\n  function mousemove(e, data) {\n    checkThreshold(e, data, e, removeMouse);\n  }\n\n  function mouseend(e, data) {\n    removeMouse();\n  }\n\n  function removeMouse() {\n    off(document, mouseevents.move, mousemove);\n    off(document, mouseevents.cancel, mouseend);\n  }\n\n  function touchstart(e) {\n    // Don't get in the way of interaction with form elements\n    if (ignoreTags[e.target.tagName.toLowerCase()]) {\n      return;\n    }\n\n    var touch = e.changedTouches[0]; // iOS live updates the touch objects whereas Android gives us copies.\n    // That means we can't trust the touchstart object to stay the same,\n    // so we must copy the data. This object acts as a template for\n    // movestart, move and moveend event objects.\n\n    var data = {\n      target: touch.target,\n      pageX: touch.pageX,\n      pageY: touch.pageY,\n      identifier: touch.identifier,\n      // The only way to make handlers individually unbindable is by\n      // making them unique.\n      touchmove: function touchmove(e, data) {\n        _touchmove(e, data);\n      },\n      touchend: function touchend(e, data) {\n        _touchend(e, data);\n      }\n    };\n    on(document, touchevents.move, data.touchmove, data);\n    on(document, touchevents.cancel, data.touchend, data);\n  }\n\n  function _touchmove(e, data) {\n    var touch = changedTouch(e, data);\n\n    if (!touch) {\n      return;\n    }\n\n    checkThreshold(e, data, touch, removeTouch);\n  }\n\n  function _touchend(e, data) {\n    var touch = identifiedTouch(e.changedTouches, data.identifier);\n\n    if (!touch) {\n      return;\n    }\n\n    removeTouch(data);\n  }\n\n  function removeTouch(data) {\n    off(document, touchevents.move, data.touchmove);\n    off(document, touchevents.cancel, data.touchend);\n  }\n\n  function checkThreshold(e, data, touch, fn) {\n    var distX = touch.pageX - data.pageX;\n    var distY = touch.pageY - data.pageY; // Do nothing if the threshold has not been crossed.\n\n    if (distX * distX + distY * distY < threshold * threshold) {\n      return;\n    }\n\n    triggerStart(e, data, touch, distX, distY, fn);\n  }\n\n  function triggerStart(e, data, touch, distX, distY, fn) {\n    var touches = e.targetTouches;\n    var time = e.timeStamp - data.timeStamp; // Create a movestart object with some special properties that\n    // are passed only to the movestart handlers.\n\n    var template = {\n      altKey: e.altKey,\n      ctrlKey: e.ctrlKey,\n      shiftKey: e.shiftKey,\n      startX: data.pageX,\n      startY: data.pageY,\n      distX: distX,\n      distY: distY,\n      deltaX: distX,\n      deltaY: distY,\n      pageX: touch.pageX,\n      pageY: touch.pageY,\n      velocityX: distX / time,\n      velocityY: distY / time,\n      identifier: data.identifier,\n      targetTouches: touches,\n      finger: touches ? touches.length : 1,\n      enableMove: function enableMove() {\n        this.moveEnabled = true;\n        this.enableMove = noop;\n        e.preventDefault();\n      }\n    }; // Trigger the movestart event.\n\n    trigger(data.target, 'movestart', template); // Unbind handlers that tracked the touch or mouse up till now.\n\n    fn(data);\n  } // Handlers that control what happens following a movestart\n\n\n  function activeMousemove(e, data) {\n    var timer = data.timer;\n    data.touch = e;\n    data.timeStamp = e.timeStamp;\n    timer.kick();\n  }\n\n  function activeMouseend(e, data) {\n    var target = data.target;\n    var event = data.event;\n    var timer = data.timer;\n    removeActiveMouse();\n    endEvent(target, event, timer, function () {\n      // Unbind the click suppressor, waiting until after mouseup\n      // has been handled.\n      setTimeout(function () {\n        off(target, 'click', preventDefault);\n      }, 0);\n    });\n  }\n\n  function removeActiveMouse() {\n    off(document, mouseevents.move, activeMousemove);\n    off(document, mouseevents.end, activeMouseend);\n  }\n\n  function activeTouchmove(e, data) {\n    var event = data.event;\n    var timer = data.timer;\n    var touch = changedTouch(e, event);\n\n    if (!touch) {\n      return;\n    } // Stop the interface from gesturing\n\n\n    e.preventDefault();\n    event.targetTouches = e.targetTouches;\n    data.touch = touch;\n    data.timeStamp = e.timeStamp;\n    timer.kick();\n  }\n\n  function activeTouchend(e, data) {\n    var target = data.target;\n    var event = data.event;\n    var timer = data.timer;\n    var touch = identifiedTouch(e.changedTouches, event.identifier); // This isn't the touch you're looking for.\n\n    if (!touch) {\n      return;\n    }\n\n    removeActiveTouch(data);\n    endEvent(target, event, timer);\n  }\n\n  function removeActiveTouch(data) {\n    off(document, touchevents.move, data.activeTouchmove);\n    off(document, touchevents.end, data.activeTouchend);\n  } // Logic for triggering move and moveend events\n\n\n  function updateEvent(event, touch, timeStamp) {\n    var time = timeStamp - event.timeStamp;\n    event.distX = touch.pageX - event.startX;\n    event.distY = touch.pageY - event.startY;\n    event.deltaX = touch.pageX - event.pageX;\n    event.deltaY = touch.pageY - event.pageY; // Average the velocity of the last few events using a decay\n    // curve to even out spurious jumps in values.\n\n    event.velocityX = 0.3 * event.velocityX + 0.7 * event.deltaX / time;\n    event.velocityY = 0.3 * event.velocityY + 0.7 * event.deltaY / time;\n    event.pageX = touch.pageX;\n    event.pageY = touch.pageY;\n  }\n\n  function endEvent(target, event, timer, fn) {\n    timer.end(function () {\n      trigger(target, 'moveend', event);\n      return fn && fn();\n    });\n  } // Set up the DOM\n\n\n  function movestart(e) {\n    if (e.defaultPrevented) {\n      return;\n    }\n\n    if (!e.moveEnabled) {\n      return;\n    }\n\n    var event = {\n      startX: e.startX,\n      startY: e.startY,\n      pageX: e.pageX,\n      pageY: e.pageY,\n      distX: e.distX,\n      distY: e.distY,\n      deltaX: e.deltaX,\n      deltaY: e.deltaY,\n      velocityX: e.velocityX,\n      velocityY: e.velocityY,\n      identifier: e.identifier,\n      targetTouches: e.targetTouches,\n      finger: e.finger\n    };\n    var data = {\n      target: e.target,\n      event: event,\n      timer: new Timer(update),\n      touch: undefined,\n      timeStamp: e.timeStamp\n    };\n\n    function update(time) {\n      updateEvent(event, data.touch, data.timeStamp);\n      trigger(data.target, 'move', event);\n    }\n\n    if (e.identifier === undefined) {\n      // We're dealing with a mouse event.\n      // Stop clicks from propagating during a move\n      on(e.target, 'click', preventDefault);\n      on(document, mouseevents.move, activeMousemove, data);\n      on(document, mouseevents.end, activeMouseend, data);\n    } else {\n      // In order to unbind correct handlers they have to be unique\n      data.activeTouchmove = function (e, data) {\n        activeTouchmove(e, data);\n      };\n\n      data.activeTouchend = function (e, data) {\n        activeTouchend(e, data);\n      }; // We're dealing with a touch.\n\n\n      on(document, touchevents.move, data.activeTouchmove, data);\n      on(document, touchevents.end, data.activeTouchend, data);\n    }\n  }\n\n  on(document, 'mousedown', mousedown);\n  on(document, 'touchstart', touchstart);\n  on(document, 'movestart', movestart); // jQuery special events\n  //\n  // jQuery event objects are copies of DOM event objects. They need\n  // a little help copying the move properties across.\n\n  if (!window.jQuery) {\n    return;\n  }\n\n  var properties = \"startX startY pageX pageY distX distY deltaX deltaY velocityX velocityY\".split(' ');\n\n  function enableMove1(e) {\n    e.enableMove();\n  }\n\n  function enableMove2(e) {\n    e.enableMove();\n  }\n\n  function enableMove3(e) {\n    e.enableMove();\n  }\n\n  function add(handleObj) {\n    var handler = handleObj.handler;\n\n    handleObj.handler = function (e) {\n      // Copy move properties across from originalEvent\n      var i = properties.length;\n      var property;\n\n      while (i--) {\n        property = properties[i];\n        e[property] = e.originalEvent[property];\n      }\n\n      handler.apply(this, arguments);\n    };\n  }\n\n  jQuery.event.special.movestart = {\n    setup: function setup() {\n      // Movestart must be enabled to allow other move events\n      on(this, 'movestart', enableMove1); // Do listen to DOM events\n\n      return false;\n    },\n    teardown: function teardown() {\n      off(this, 'movestart', enableMove1);\n      return false;\n    },\n    add: add\n  };\n  jQuery.event.special.move = {\n    setup: function setup() {\n      on(this, 'movestart', enableMove2);\n      return false;\n    },\n    teardown: function teardown() {\n      off(this, 'movestart', enableMove2);\n      return false;\n    },\n    add: add\n  };\n  jQuery.event.special.moveend = {\n    setup: function setup() {\n      on(this, 'movestart', enableMove3);\n      return false;\n    },\n    teardown: function teardown() {\n      off(this, 'movestart', enableMove3);\n      return false;\n    },\n    add: add\n  };\n});"},385:function(n,e,t){t(9)(t(386))},386:function(n,e){n.exports='(function ($) {\n  $.fn.twentytwenty = function (options) {\n    var options = $.extend({\n      default_offset_pct: 0.5,\n      orientation: \'horizontal\',\n      before_label: \'Before\',\n      after_label: \'After\',\n      no_overlay: false,\n      move_slider_on_hover: false,\n      move_with_handle_only: true,\n      click_to_move: false\n    }, options);\n    return this.each(function () {\n      var sliderPct = options.default_offset_pct;\n      var container = $(this);\n      var sliderOrientation = options.orientation;\n      var beforeDirection = sliderOrientation === \'vertical\' ? \'down\' : \'left\';\n      var afterDirection = sliderOrientation === \'vertical\' ? \'up\' : \'right\';\n      container.wrap("<div class=\'twentytwenty-wrapper twentytwenty-" + sliderOrientation + "\'></div>");\n\n      if (!options.no_overlay) {\n        container.append("<div class=\'twentytwenty-overlay\'></div>");\n        var overlay = container.find(".twentytwenty-overlay");\n\n        if (sliderOrientation === "vertical") {\n          overlay.append("<div class=\'twentytwenty-before-label\'><span>" + options.before_label + "</span></div>");\n          overlay.append("<div class=\'twentytwenty-after-label\'><span>" + options.after_label + "</span></div>");\n          var before = overlay.find(".twentytwenty-before-label span");\n          var after = overlay.find(".twentytwenty-after-label span");\n          before.css({\n            marginLeft: before.width() / 2 * -1 - 20\n          });\n          after.css({\n            marginLeft: after.width() / 2 * -1 - 20\n          });\n        } else {\n          overlay.append("<div class=\'twentytwenty-before-label\' data-content=\'" + options.before_label + "\'></div>");\n          overlay.append("<div class=\'twentytwenty-after-label\' data-content=\'" + options.after_label + "\'></div>");\n        }\n      }\n\n      var beforeImg = container.find("img:first");\n      var afterImg = container.find("img:last");\n      container.append("<div class=\'twentytwenty-handle\'></div>");\n      var slider = container.find(".twentytwenty-handle");\n      slider.append("<span class=\'twentytwenty-" + beforeDirection + "-arrow\'></span>");\n      slider.append("<span class=\'twentytwenty-" + afterDirection + "-arrow\'></span>");\n      container.addClass("twentytwenty-container");\n      beforeImg.addClass("twentytwenty-before");\n      afterImg.addClass("twentytwenty-after");\n\n      var calcOffset = function calcOffset(dimensionPct) {\n        var w = beforeImg.width();\n        var h = beforeImg.height();\n        return {\n          w: w + "px",\n          h: h + "px",\n          cw: dimensionPct * w + "px",\n          ch: dimensionPct * h + "px"\n        };\n      };\n\n      var adjustContainer = function adjustContainer(offset) {\n        if (sliderOrientation === \'vertical\') {\n          beforeImg.css("clip", "rect(0," + offset.w + "," + offset.ch + ",0)");\n          afterImg.css("clip", "rect(" + offset.ch + "," + offset.w + "," + offset.h + ",0)");\n        } else {\n          beforeImg.css("clip", "rect(0," + offset.cw + "," + offset.h + ",0)");\n          afterImg.css("clip", "rect(0," + offset.w + "," + offset.h + "," + offset.cw + ")");\n        }\n\n        container.css("height", offset.h);\n      };\n\n      var adjustSlider = function adjustSlider(pct) {\n        var offset = calcOffset(pct);\n        slider.css(sliderOrientation === "vertical" ? "top" : "left", sliderOrientation === "vertical" ? offset.ch : offset.cw);\n        adjustContainer(offset);\n      }; // Return the number specified or the min/max number if it outside the range given.\n\n\n      var minMaxNumber = function minMaxNumber(num, min, max) {\n        return Math.max(min, Math.min(max, num));\n      }; // Calculate the slider percentage based on the position.\n\n\n      var getSliderPercentage = function getSliderPercentage(positionX, positionY) {\n        var sliderPercentage = sliderOrientation === \'vertical\' ? (positionY - offsetY) / imgHeight : (positionX - offsetX) / imgWidth;\n        return minMaxNumber(sliderPercentage, 0, 1);\n      };\n\n      $(window).on("resize.twentytwenty", function (e) {\n        adjustSlider(sliderPct);\n      });\n      var offsetX = 0;\n      var offsetY = 0;\n      var imgWidth = 0;\n      var imgHeight = 0;\n\n      var onMoveStart = function onMoveStart(e) {\n        if ((e.distX > e.distY && e.distX < -e.distY || e.distX < e.distY && e.distX > -e.distY) && sliderOrientation !== \'vertical\') {\n          e.preventDefault();\n        } else if ((e.distX < e.distY && e.distX < -e.distY || e.distX > e.distY && e.distX > -e.distY) && sliderOrientation === \'vertical\') {\n          e.preventDefault();\n        }\n\n        container.addClass("active");\n        offsetX = container.offset().left;\n        offsetY = container.offset().top;\n        imgWidth = beforeImg.width();\n        imgHeight = beforeImg.height();\n      };\n\n      var onMove = function onMove(e) {\n        if (container.hasClass("active")) {\n          sliderPct = getSliderPercentage(e.pageX, e.pageY);\n          adjustSlider(sliderPct);\n        }\n      };\n\n      var onMoveEnd = function onMoveEnd() {\n        container.removeClass("active");\n      };\n\n      var moveTarget = options.move_with_handle_only ? slider : container;\n      moveTarget.on("movestart", onMoveStart);\n      moveTarget.on("move", onMove);\n      moveTarget.on("moveend", onMoveEnd);\n\n      if (options.move_slider_on_hover) {\n        container.on("mouseenter", onMoveStart);\n        container.on("mousemove", onMove);\n        container.on("mouseleave", onMoveEnd);\n      }\n\n      slider.on("touchmove", function (e) {\n        e.preventDefault();\n      });\n      container.find("img").on("mousedown", function (event) {\n        event.preventDefault();\n      });\n\n      if (options.click_to_move) {\n        container.on(\'click\', function (e) {\n          offsetX = container.offset().left;\n          offsetY = container.offset().top;\n          imgWidth = beforeImg.width();\n          imgHeight = beforeImg.height();\n          sliderPct = getSliderPercentage(e.pageX, e.pageY);\n          adjustSlider(sliderPct);\n        });\n      }\n\n      $(window).trigger("resize.twentytwenty");\n    });\n  };\n})(jQuery);'},387:function(n,e,t){},388:function(n,e,t){},705:function(n,e,t){t(706),t(3).run(function(){var n=$('<script src="https://sp.zalo.me/plugins/sdk.js"><\/script>');$("body").append(n)}).directive("zaloBtn",["$interpolate","config",function(i,n){return{scope:{id:"@",url:"@"},link:function(n,e,t){n=i('<div class="zalo-btn">\n<div class="zalo-share-button" data-href="" data-oaid="3788459333857608754" \ndata-layout="4" data-color="blue" data-customize=false></div></div>')(n);e.replaceWith(n)}}}])},706:function(n,e,t){},707:function(n,e,t){t(33),t(377),t(3).directive("recommendNews",["$http","$q","config","weblog",function(i,n,u,o){return{restrict:"EA",transclude:!0,replace:!0,scope:{articles:"=?",isMobile:"=?"},template:t(190),link:function(e,n,t){var c=t.isMobile?"208_138":"418_278";o.then(function(n){(n=(n=n.store.getItem("__wuid"))||"default")&&i.get("https://webapi.dantri.com.vn/Recommendation/GetRecommendedArticlesByUserId?userId=".concat(n)).then(function(n){var e,t=n.data;for(e in t){var i=t[e];i.imagePath="".concat(u.ImageDomain,"/zoom/").concat(c).concat(i.imagePath)}var o=window.location.pathname;if(3<t.length){for(var r=[],s=0;s<3;s++){var a=t.length,l=Math.floor(Math.random()*(a-1)),a=t[l];a.localPath!=o&&(r.push(a),t.splice(l,1))}return r}return t}).then(function(n){n.forEach(function(n,e){n.localPath="".concat(n.localPath,"#dt_source=Article&dt_campaign=Box_CTBQT&dt_medium=").concat(e+1)}),e.articles=n})})}}}])},708:function(n,e,o){o.e(33).then(o.t.bind(null,754,7)),o.e(33).then(o.t.bind(null,755,7)),o.e(33).then(o.t.bind(null,756,7)),o(709),o(711),o(3).directive("imagePreview",["$http","config","$rootScope",function(n,e,t){return{restrict:"EA",transclude:!0,replace:!0,scope:{articles:"=?"},template:o(187),link:function(n,e,t){var o=[],r=$("figure>img");r.on("click",function(){var n=event.target.getAttribute("data-original"),e=0;for(i=0;i<o.length;i++)if(o[i].src==n){e=i;break}var t=document.querySelectorAll(".pswp")[0];new PhotoSwipe(t,PhotoSwipeUI_Default,o,{index:e,getThumbBoundsFn:function(n){var e=document.querySelectorAll(".pswp-img")[n],n=window.pageYOffset||document.documentElement.scrollTop,e=e.getBoundingClientRect();return{x:e.left,y:e.top+n,w:e.width}}}).init()}),$(document).ready(function(){r.addClass("pswp-img"),o=r.map(function(n,e){var t="";e.parentElement.querySelector("figcaption")?t=e.parentElement.querySelector("figcaption").textContent:e.parentElement.parentElement.querySelector("figcaption")&&(t=e.parentElement.parentElement.querySelector("figcaption").textContent);var i={src:e.getAttribute("data-original"),w:e.getAttribute("data-width"),h:e.getAttribute("data-height"),title:t};return i.src||($(e).attr("data-original",$(e).attr("src")),$(e).attr("data-width",$(e).width()),$(e).attr("data-height",$(e).height()),i={src:e.getAttribute("data-original"),w:e.getAttribute("data-width"),h:e.getAttribute("data-height"),title:t}),i}),r.map(function(n,e){var t=e.parentElement;$(t).addClass("img-wrapper"),$("<div class='image-instruction-background'></div><p style='font-size: 13px;font-family: Arial;' class='img-instruction'>Nhấn để phóng to ảnh</p>").insertAfter(e)})})}}}])},709:function(n,e,t){t(9)(t(710))},710:function(n,e){n.exports="function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*! PhotoSwipe - v4.1.3 - 2019-01-08\r\n* http://photoswipe.com\r\n* Copyright (c) 2019 Dmitry Semenov; */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(factory);\n  } else if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === 'object') {\n    module.exports = factory();\n  } else {\n    root.PhotoSwipe = factory();\n  }\n})(this, function () {\n  'use strict';\n\n  var PhotoSwipe = function PhotoSwipe(template, UiClass, items, options) {\n    /*>>framework-bridge*/\n\n    /**\r\n     *\r\n     * Set of generic functions used by gallery.\r\n     * \r\n     * You're free to modify anything here as long as functionality is kept.\r\n     * \r\n     */\n    var framework = {\n      features: null,\n      bind: function bind(target, type, listener, unbind) {\n        var methodName = (unbind ? 'remove' : 'add') + 'EventListener';\n        type = type.split(' ');\n\n        for (var i = 0; i < type.length; i++) {\n          if (type[i]) {\n            target[methodName](type[i], listener, false);\n          }\n        }\n      },\n      isArray: function isArray(obj) {\n        return obj instanceof Array;\n      },\n      createEl: function createEl(classes, tag) {\n        var el = document.createElement(tag || 'div');\n\n        if (classes) {\n          el.className = classes;\n        }\n\n        return el;\n      },\n      getScrollY: function getScrollY() {\n        var yOffset = window.pageYOffset;\n        return yOffset !== undefined ? yOffset : document.documentElement.scrollTop;\n      },\n      unbind: function unbind(target, type, listener) {\n        framework.bind(target, type, listener, true);\n      },\n      removeClass: function removeClass(el, className) {\n        var reg = new RegExp('(\\\\s|^)' + className + '(\\\\s|$)');\n        el.className = el.className.replace(reg, ' ').replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n      },\n      addClass: function addClass(el, className) {\n        if (!framework.hasClass(el, className)) {\n          el.className += (el.className ? ' ' : '') + className;\n        }\n      },\n      hasClass: function hasClass(el, className) {\n        return el.className && new RegExp('(^|\\\\s)' + className + '(\\\\s|$)').test(el.className);\n      },\n      getChildByClass: function getChildByClass(parentEl, childClassName) {\n        var node = parentEl.firstChild;\n\n        while (node) {\n          if (framework.hasClass(node, childClassName)) {\n            return node;\n          }\n\n          node = node.nextSibling;\n        }\n      },\n      arraySearch: function arraySearch(array, value, key) {\n        var i = array.length;\n\n        while (i--) {\n          if (array[i][key] === value) {\n            return i;\n          }\n        }\n\n        return -1;\n      },\n      extend: function extend(o1, o2, preventOverwrite) {\n        for (var prop in o2) {\n          if (o2.hasOwnProperty(prop)) {\n            if (preventOverwrite && o1.hasOwnProperty(prop)) {\n              continue;\n            }\n\n            o1[prop] = o2[prop];\n          }\n        }\n      },\n      easing: {\n        sine: {\n          out: function out(k) {\n            return Math.sin(k * (Math.PI / 2));\n          },\n          inOut: function inOut(k) {\n            return -(Math.cos(Math.PI * k) - 1) / 2;\n          }\n        },\n        cubic: {\n          out: function out(k) {\n            return --k * k * k + 1;\n          }\n        }\n        /*\r\n        \telastic: {\r\n        \t\tout: function ( k ) {\r\n        \t\t\t\t\tvar s, a = 0.1, p = 0.4;\r\n        \t\t\tif ( k === 0 ) return 0;\r\n        \t\t\tif ( k === 1 ) return 1;\r\n        \t\t\tif ( !a || a < 1 ) { a = 1; s = p / 4; }\r\n        \t\t\telse s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\r\n        \t\t\treturn ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );\r\n        \t\t\t\t},\r\n        \t},\r\n        \tback: {\r\n        \t\tout: function ( k ) {\r\n        \t\t\tvar s = 1.70158;\r\n        \t\t\treturn --k * k * ( ( s + 1 ) * k + s ) + 1;\r\n        \t\t}\r\n        \t}\r\n        */\n\n      },\n\n      /**\r\n       * \r\n       * @return {object}\r\n       * \r\n       * {\r\n       *  raf : request animation frame function\r\n       *  caf : cancel animation frame function\r\n       *  transfrom : transform property key (with vendor), or null if not supported\r\n       *  oldIE : IE8 or below\r\n       * }\r\n       * \r\n       */\n      detectFeatures: function detectFeatures() {\n        if (framework.features) {\n          return framework.features;\n        }\n\n        var helperEl = framework.createEl(),\n            helperStyle = helperEl.style,\n            vendor = '',\n            features = {}; // IE8 and below\n\n        features.oldIE = document.all && !document.addEventListener;\n        features.touch = 'ontouchstart' in window;\n\n        if (window.requestAnimationFrame) {\n          features.raf = window.requestAnimationFrame;\n          features.caf = window.cancelAnimationFrame;\n        }\n\n        features.pointerEvent = !!window.PointerEvent || navigator.msPointerEnabled; // fix false-positive detection of old Android in new IE\n        // (IE11 ua string contains \"Android 4.0\")\n\n        if (!features.pointerEvent) {\n          var ua = navigator.userAgent; // Detect if device is iPhone or iPod and if it's older than iOS 8\n          // http://stackoverflow.com/a/14223920\n          // \n          // This detection is made because of buggy top/bottom toolbars\n          // that don't trigger window.resize event.\n          // For more info refer to _isFixedPosition variable in core.js\n\n          if (/iP(hone|od)/.test(navigator.platform)) {\n            var v = navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n\n            if (v && v.length > 0) {\n              v = parseInt(v[1], 10);\n\n              if (v >= 1 && v < 8) {\n                features.isOldIOSPhone = true;\n              }\n            }\n          } // Detect old Android (before KitKat)\n          // due to bugs related to position:fixed\n          // http://stackoverflow.com/questions/7184573/pick-up-the-android-version-in-the-browser-by-javascript\n\n\n          var match = ua.match(/Android\\s([0-9\\.]*)/);\n          var androidversion = match ? match[1] : 0;\n          androidversion = parseFloat(androidversion);\n\n          if (androidversion >= 1) {\n            if (androidversion < 4.4) {\n              features.isOldAndroid = true; // for fixed position bug & performance\n            }\n\n            features.androidVersion = androidversion; // for touchend bug\n          }\n\n          features.isMobileOpera = /opera mini|opera mobi/i.test(ua); // p.s. yes, yes, UA sniffing is bad, propose your solution for above bugs.\n        }\n\n        var styleChecks = ['transform', 'perspective', 'animationName'],\n            vendors = ['', 'webkit', 'Moz', 'ms', 'O'],\n            styleCheckItem,\n            styleName;\n\n        for (var i = 0; i < 4; i++) {\n          vendor = vendors[i];\n\n          for (var a = 0; a < 3; a++) {\n            styleCheckItem = styleChecks[a]; // uppercase first letter of property name, if vendor is present\n\n            styleName = vendor + (vendor ? styleCheckItem.charAt(0).toUpperCase() + styleCheckItem.slice(1) : styleCheckItem);\n\n            if (!features[styleCheckItem] && styleName in helperStyle) {\n              features[styleCheckItem] = styleName;\n            }\n          }\n\n          if (vendor && !features.raf) {\n            vendor = vendor.toLowerCase();\n            features.raf = window[vendor + 'RequestAnimationFrame'];\n\n            if (features.raf) {\n              features.caf = window[vendor + 'CancelAnimationFrame'] || window[vendor + 'CancelRequestAnimationFrame'];\n            }\n          }\n        }\n\n        if (!features.raf) {\n          var lastTime = 0;\n\n          features.raf = function (fn) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function () {\n              fn(currTime + timeToCall);\n            }, timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n          };\n\n          features.caf = function (id) {\n            clearTimeout(id);\n          };\n        } // Detect SVG support\n\n\n        features.svg = !!document.createElementNS && !!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;\n        framework.features = features;\n        return features;\n      }\n    };\n    framework.detectFeatures(); // Override addEventListener for old versions of IE\n\n    if (framework.features.oldIE) {\n      framework.bind = function (target, type, listener, unbind) {\n        type = type.split(' ');\n\n        var methodName = (unbind ? 'detach' : 'attach') + 'Event',\n            evName,\n            _handleEv = function _handleEv() {\n          listener.handleEvent.call(listener);\n        };\n\n        for (var i = 0; i < type.length; i++) {\n          evName = type[i];\n\n          if (evName) {\n            if (_typeof(listener) === 'object' && listener.handleEvent) {\n              if (!unbind) {\n                listener['oldIE' + evName] = _handleEv;\n              } else {\n                if (!listener['oldIE' + evName]) {\n                  return false;\n                }\n              }\n\n              target[methodName]('on' + evName, listener['oldIE' + evName]);\n            } else {\n              target[methodName]('on' + evName, listener);\n            }\n          }\n        }\n      };\n    }\n    /*>>framework-bridge*/\n\n    /*>>core*/\n    //function(template, UiClass, items, options)\n\n\n    var self = this;\n    /**\r\n     * Static vars, don't change unless you know what you're doing.\r\n     */\n\n    var DOUBLE_TAP_RADIUS = 25,\n        NUM_HOLDERS = 3;\n    /**\r\n     * Options\r\n     */\n\n    var _options = {\n      allowPanToNext: true,\n      spacing: 0.12,\n      bgOpacity: 1,\n      mouseUsed: false,\n      loop: true,\n      pinchToClose: true,\n      closeOnScroll: true,\n      closeOnVerticalDrag: true,\n      verticalDragRange: 0.75,\n      hideAnimationDuration: 333,\n      showAnimationDuration: 333,\n      showHideOpacity: false,\n      focus: true,\n      escKey: true,\n      arrowKeys: true,\n      mainScrollEndFriction: 0.35,\n      panEndFriction: 0.35,\n      isClickableElement: function isClickableElement(el) {\n        return el.tagName === 'A';\n      },\n      getDoubleTapZoom: function getDoubleTapZoom(isMouseClick, item) {\n        if (isMouseClick) {\n          return 1;\n        } else {\n          return item.initialZoomLevel < 0.7 ? 1 : 1.33;\n        }\n      },\n      maxSpreadZoom: 1.33,\n      modal: true,\n      // not fully implemented yet\n      scaleMode: 'fit' // TODO\n\n    };\n    framework.extend(_options, options);\n    /**\r\n     * Private helper variables & functions\r\n     */\n\n    var _getEmptyPoint = function _getEmptyPoint() {\n      return {\n        x: 0,\n        y: 0\n      };\n    };\n\n    var _isOpen,\n        _isDestroying,\n        _closedByScroll,\n        _currentItemIndex,\n        _containerStyle,\n        _containerShiftIndex,\n        _currPanDist = _getEmptyPoint(),\n        _startPanOffset = _getEmptyPoint(),\n        _panOffset = _getEmptyPoint(),\n        _upMoveEvents,\n        // drag move, drag end & drag cancel events array\n    _downEvents,\n        // drag start events array\n    _globalEventHandlers,\n        _viewportSize = {},\n        _currZoomLevel,\n        _startZoomLevel,\n        _translatePrefix,\n        _translateSufix,\n        _updateSizeInterval,\n        _itemsNeedUpdate,\n        _currPositionIndex = 0,\n        _offset = {},\n        _slideSize = _getEmptyPoint(),\n        // size of slide area, including spacing\n    _itemHolders,\n        _prevItemIndex,\n        _indexDiff = 0,\n        // difference of indexes since last content update\n    _dragStartEvent,\n        _dragMoveEvent,\n        _dragEndEvent,\n        _dragCancelEvent,\n        _transformKey,\n        _pointerEventEnabled,\n        _isFixedPosition = true,\n        _likelyTouchDevice,\n        _modules = [],\n        _requestAF,\n        _cancelAF,\n        _initalClassName,\n        _initalWindowScrollY,\n        _oldIE,\n        _currentWindowScrollY,\n        _features,\n        _windowVisibleSize = {},\n        _renderMaxResolution = false,\n        _orientationChangeTimeout,\n        // Registers PhotoSWipe module (History, Controller ...)\n    _registerModule = function _registerModule(name, module) {\n      framework.extend(self, module.publicMethods);\n\n      _modules.push(name);\n    },\n        _getLoopedId = function _getLoopedId(index) {\n      var numSlides = _getNumItems();\n\n      if (index > numSlides - 1) {\n        return index - numSlides;\n      } else if (index < 0) {\n        return numSlides + index;\n      }\n\n      return index;\n    },\n        // Micro bind/trigger\n    _listeners = {},\n        _listen = function _listen(name, fn) {\n      if (!_listeners[name]) {\n        _listeners[name] = [];\n      }\n\n      return _listeners[name].push(fn);\n    },\n        _shout = function _shout(name) {\n      var listeners = _listeners[name];\n\n      if (listeners) {\n        var args = Array.prototype.slice.call(arguments);\n        args.shift();\n\n        for (var i = 0; i < listeners.length; i++) {\n          listeners[i].apply(self, args);\n        }\n      }\n    },\n        _getCurrentTime = function _getCurrentTime() {\n      return new Date().getTime();\n    },\n        _applyBgOpacity = function _applyBgOpacity(opacity) {\n      _bgOpacity = opacity;\n      self.bg.style.opacity = opacity * _options.bgOpacity;\n    },\n        _applyZoomTransform = function _applyZoomTransform(styleObj, x, y, zoom, item) {\n      if (!_renderMaxResolution || item && item !== self.currItem) {\n        zoom = zoom / (item ? item.fitRatio : self.currItem.fitRatio);\n      }\n\n      styleObj[_transformKey] = _translatePrefix + x + 'px, ' + y + 'px' + _translateSufix + ' scale(' + zoom + ')';\n    },\n        _applyCurrentZoomPan = function _applyCurrentZoomPan(allowRenderResolution) {\n      if (_currZoomElementStyle) {\n        if (allowRenderResolution) {\n          if (_currZoomLevel > self.currItem.fitRatio) {\n            if (!_renderMaxResolution) {\n              _setImageSize(self.currItem, false, true);\n\n              _renderMaxResolution = true;\n            }\n          } else {\n            if (_renderMaxResolution) {\n              _setImageSize(self.currItem);\n\n              _renderMaxResolution = false;\n            }\n          }\n        }\n\n        _applyZoomTransform(_currZoomElementStyle, _panOffset.x, _panOffset.y, _currZoomLevel);\n      }\n    },\n        _applyZoomPanToItem = function _applyZoomPanToItem(item) {\n      if (item.container) {\n        _applyZoomTransform(item.container.style, item.initialPosition.x, item.initialPosition.y, item.initialZoomLevel, item);\n      }\n    },\n        _setTranslateX = function _setTranslateX(x, elStyle) {\n      elStyle[_transformKey] = _translatePrefix + x + 'px, 0px' + _translateSufix;\n    },\n        _moveMainScroll = function _moveMainScroll(x, dragging) {\n      if (!_options.loop && dragging) {\n        var newSlideIndexOffset = _currentItemIndex + (_slideSize.x * _currPositionIndex - x) / _slideSize.x,\n            delta = Math.round(x - _mainScrollPos.x);\n\n        if (newSlideIndexOffset < 0 && delta > 0 || newSlideIndexOffset >= _getNumItems() - 1 && delta < 0) {\n          x = _mainScrollPos.x + delta * _options.mainScrollEndFriction;\n        }\n      }\n\n      _mainScrollPos.x = x;\n\n      _setTranslateX(x, _containerStyle);\n    },\n        _calculatePanOffset = function _calculatePanOffset(axis, zoomLevel) {\n      var m = _midZoomPoint[axis] - _offset[axis];\n      return _startPanOffset[axis] + _currPanDist[axis] + m - m * (zoomLevel / _startZoomLevel);\n    },\n        _equalizePoints = function _equalizePoints(p1, p2) {\n      p1.x = p2.x;\n      p1.y = p2.y;\n\n      if (p2.id) {\n        p1.id = p2.id;\n      }\n    },\n        _roundPoint = function _roundPoint(p) {\n      p.x = Math.round(p.x);\n      p.y = Math.round(p.y);\n    },\n        _mouseMoveTimeout = null,\n        _onFirstMouseMove = function _onFirstMouseMove() {\n      // Wait until mouse move event is fired at least twice during 100ms\n      // We do this, because some mobile browsers trigger it on touchstart\n      if (_mouseMoveTimeout) {\n        framework.unbind(document, 'mousemove', _onFirstMouseMove);\n        framework.addClass(template, 'pswp--has_mouse');\n        _options.mouseUsed = true;\n\n        _shout('mouseUsed');\n      }\n\n      _mouseMoveTimeout = setTimeout(function () {\n        _mouseMoveTimeout = null;\n      }, 100);\n    },\n        _bindEvents = function _bindEvents() {\n      framework.bind(document, 'keydown', self);\n\n      if (_features.transform) {\n        // don't bind click event in browsers that don't support transform (mostly IE8)\n        framework.bind(self.scrollWrap, 'click', self);\n      }\n\n      if (!_options.mouseUsed) {\n        framework.bind(document, 'mousemove', _onFirstMouseMove);\n      }\n\n      framework.bind(window, 'resize scroll orientationchange', self);\n\n      _shout('bindEvents');\n    },\n        _unbindEvents = function _unbindEvents() {\n      framework.unbind(window, 'resize scroll orientationchange', self);\n      framework.unbind(window, 'scroll', _globalEventHandlers.scroll);\n      framework.unbind(document, 'keydown', self);\n      framework.unbind(document, 'mousemove', _onFirstMouseMove);\n\n      if (_features.transform) {\n        framework.unbind(self.scrollWrap, 'click', self);\n      }\n\n      if (_isDragging) {\n        framework.unbind(window, _upMoveEvents, self);\n      }\n\n      clearTimeout(_orientationChangeTimeout);\n\n      _shout('unbindEvents');\n    },\n        _calculatePanBounds = function _calculatePanBounds(zoomLevel, update) {\n      var bounds = _calculateItemSize(self.currItem, _viewportSize, zoomLevel);\n\n      if (update) {\n        _currPanBounds = bounds;\n      }\n\n      return bounds;\n    },\n        _getMinZoomLevel = function _getMinZoomLevel(item) {\n      if (!item) {\n        item = self.currItem;\n      }\n\n      return item.initialZoomLevel;\n    },\n        _getMaxZoomLevel = function _getMaxZoomLevel(item) {\n      if (!item) {\n        item = self.currItem;\n      }\n\n      return item.w > 0 ? _options.maxSpreadZoom : 1;\n    },\n        // Return true if offset is out of the bounds\n    _modifyDestPanOffset = function _modifyDestPanOffset(axis, destPanBounds, destPanOffset, destZoomLevel) {\n      if (destZoomLevel === self.currItem.initialZoomLevel) {\n        destPanOffset[axis] = self.currItem.initialPosition[axis];\n        return true;\n      } else {\n        destPanOffset[axis] = _calculatePanOffset(axis, destZoomLevel);\n\n        if (destPanOffset[axis] > destPanBounds.min[axis]) {\n          destPanOffset[axis] = destPanBounds.min[axis];\n          return true;\n        } else if (destPanOffset[axis] < destPanBounds.max[axis]) {\n          destPanOffset[axis] = destPanBounds.max[axis];\n          return true;\n        }\n      }\n\n      return false;\n    },\n        _setupTransforms = function _setupTransforms() {\n      if (_transformKey) {\n        // setup 3d transforms\n        var allow3dTransform = _features.perspective && !_likelyTouchDevice;\n        _translatePrefix = 'translate' + (allow3dTransform ? '3d(' : '(');\n        _translateSufix = _features.perspective ? ', 0px)' : ')';\n        return;\n      } // Override zoom/pan/move functions in case old browser is used (most likely IE)\n      // (so they use left/top/width/height, instead of CSS transform)\n\n\n      _transformKey = 'left';\n      framework.addClass(template, 'pswp--ie');\n\n      _setTranslateX = function _setTranslateX(x, elStyle) {\n        elStyle.left = x + 'px';\n      };\n\n      _applyZoomPanToItem = function _applyZoomPanToItem(item) {\n        var zoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\n            s = item.container.style,\n            w = zoomRatio * item.w,\n            h = zoomRatio * item.h;\n        s.width = w + 'px';\n        s.height = h + 'px';\n        s.left = item.initialPosition.x + 'px';\n        s.top = item.initialPosition.y + 'px';\n      };\n\n      _applyCurrentZoomPan = function _applyCurrentZoomPan() {\n        if (_currZoomElementStyle) {\n          var s = _currZoomElementStyle,\n              item = self.currItem,\n              zoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\n              w = zoomRatio * item.w,\n              h = zoomRatio * item.h;\n          s.width = w + 'px';\n          s.height = h + 'px';\n          s.left = _panOffset.x + 'px';\n          s.top = _panOffset.y + 'px';\n        }\n      };\n    },\n        _onKeyDown = function _onKeyDown(e) {\n      var keydownAction = '';\n\n      if (_options.escKey && e.keyCode === 27) {\n        keydownAction = 'close';\n      } else if (_options.arrowKeys) {\n        if (e.keyCode === 37) {\n          keydownAction = 'prev';\n        } else if (e.keyCode === 39) {\n          keydownAction = 'next';\n        }\n      }\n\n      if (keydownAction) {\n        // don't do anything if special key pressed to prevent from overriding default browser actions\n        // e.g. in Chrome on Mac cmd+arrow-left returns to previous page\n        if (!e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey) {\n          if (e.preventDefault) {\n            e.preventDefault();\n          } else {\n            e.returnValue = false;\n          }\n\n          self[keydownAction]();\n        }\n      }\n    },\n        _onGlobalClick = function _onGlobalClick(e) {\n      if (!e) {\n        return;\n      } // don't allow click event to pass through when triggering after drag or some other gesture\n\n\n      if (_moved || _zoomStarted || _mainScrollAnimating || _verticalDragInitiated) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    },\n        _updatePageScrollOffset = function _updatePageScrollOffset() {\n      self.setScrollOffset(0, framework.getScrollY());\n    }; // Micro animation engine\n\n\n    var _animations = {},\n        _numAnimations = 0,\n        _stopAnimation = function _stopAnimation(name) {\n      if (_animations[name]) {\n        if (_animations[name].raf) {\n          _cancelAF(_animations[name].raf);\n        }\n\n        _numAnimations--;\n        delete _animations[name];\n      }\n    },\n        _registerStartAnimation = function _registerStartAnimation(name) {\n      if (_animations[name]) {\n        _stopAnimation(name);\n      }\n\n      if (!_animations[name]) {\n        _numAnimations++;\n        _animations[name] = {};\n      }\n    },\n        _stopAllAnimations = function _stopAllAnimations() {\n      for (var prop in _animations) {\n        if (_animations.hasOwnProperty(prop)) {\n          _stopAnimation(prop);\n        }\n      }\n    },\n        _animateProp = function _animateProp(name, b, endProp, d, easingFn, onUpdate, onComplete) {\n      var startAnimTime = _getCurrentTime(),\n          t;\n\n      _registerStartAnimation(name);\n\n      var animloop = function animloop() {\n        if (_animations[name]) {\n          t = _getCurrentTime() - startAnimTime; // time diff\n          //b - beginning (start prop)\n          //d - anim duration\n\n          if (t >= d) {\n            _stopAnimation(name);\n\n            onUpdate(endProp);\n\n            if (onComplete) {\n              onComplete();\n            }\n\n            return;\n          }\n\n          onUpdate((endProp - b) * easingFn(t / d) + b);\n          _animations[name].raf = _requestAF(animloop);\n        }\n      };\n\n      animloop();\n    };\n\n    var publicMethods = {\n      // make a few local variables and functions public\n      shout: _shout,\n      listen: _listen,\n      viewportSize: _viewportSize,\n      options: _options,\n      isMainScrollAnimating: function isMainScrollAnimating() {\n        return _mainScrollAnimating;\n      },\n      getZoomLevel: function getZoomLevel() {\n        return _currZoomLevel;\n      },\n      getCurrentIndex: function getCurrentIndex() {\n        return _currentItemIndex;\n      },\n      isDragging: function isDragging() {\n        return _isDragging;\n      },\n      isZooming: function isZooming() {\n        return _isZooming;\n      },\n      setScrollOffset: function setScrollOffset(x, y) {\n        _offset.x = x;\n        _currentWindowScrollY = _offset.y = y;\n\n        _shout('updateScrollOffset', _offset);\n      },\n      applyZoomPan: function applyZoomPan(zoomLevel, panX, panY, allowRenderResolution) {\n        _panOffset.x = panX;\n        _panOffset.y = panY;\n        _currZoomLevel = zoomLevel;\n\n        _applyCurrentZoomPan(allowRenderResolution);\n      },\n      init: function init() {\n        if (_isOpen || _isDestroying) {\n          return;\n        }\n\n        var i;\n        self.framework = framework; // basic functionality\n\n        self.template = template; // root DOM element of PhotoSwipe\n\n        self.bg = framework.getChildByClass(template, 'pswp__bg');\n        _initalClassName = template.className;\n        _isOpen = true;\n        _features = framework.detectFeatures();\n        _requestAF = _features.raf;\n        _cancelAF = _features.caf;\n        _transformKey = _features.transform;\n        _oldIE = _features.oldIE;\n        self.scrollWrap = framework.getChildByClass(template, 'pswp__scroll-wrap');\n        self.container = framework.getChildByClass(self.scrollWrap, 'pswp__container');\n        _containerStyle = self.container.style; // for fast access\n        // Objects that hold slides (there are only 3 in DOM)\n\n        self.itemHolders = _itemHolders = [{\n          el: self.container.children[0],\n          wrap: 0,\n          index: -1\n        }, {\n          el: self.container.children[1],\n          wrap: 0,\n          index: -1\n        }, {\n          el: self.container.children[2],\n          wrap: 0,\n          index: -1\n        }]; // hide nearby item holders until initial zoom animation finishes (to avoid extra Paints)\n\n        _itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'none';\n\n        _setupTransforms(); // Setup global events\n\n\n        _globalEventHandlers = {\n          resize: self.updateSize,\n          // Fixes: iOS 10.3 resize event\n          // does not update scrollWrap.clientWidth instantly after resize\n          // https://github.com/dimsemenov/PhotoSwipe/issues/1315\n          orientationchange: function orientationchange() {\n            clearTimeout(_orientationChangeTimeout);\n            _orientationChangeTimeout = setTimeout(function () {\n              if (_viewportSize.x !== self.scrollWrap.clientWidth) {\n                self.updateSize();\n              }\n            }, 500);\n          },\n          scroll: _updatePageScrollOffset,\n          keydown: _onKeyDown,\n          click: _onGlobalClick\n        }; // disable show/hide effects on old browsers that don't support CSS animations or transforms, \n        // old IOS, Android and Opera mobile. Blackberry seems to work fine, even older models.\n\n        var oldPhone = _features.isOldIOSPhone || _features.isOldAndroid || _features.isMobileOpera;\n\n        if (!_features.animationName || !_features.transform || oldPhone) {\n          _options.showAnimationDuration = _options.hideAnimationDuration = 0;\n        } // init modules\n\n\n        for (i = 0; i < _modules.length; i++) {\n          self['init' + _modules[i]]();\n        } // init\n\n\n        if (UiClass) {\n          var ui = self.ui = new UiClass(self, framework);\n          ui.init();\n        }\n\n        _shout('firstUpdate');\n\n        _currentItemIndex = _currentItemIndex || _options.index || 0; // validate index\n\n        if (isNaN(_currentItemIndex) || _currentItemIndex < 0 || _currentItemIndex >= _getNumItems()) {\n          _currentItemIndex = 0;\n        }\n\n        self.currItem = _getItemAt(_currentItemIndex);\n\n        if (_features.isOldIOSPhone || _features.isOldAndroid) {\n          _isFixedPosition = false;\n        }\n\n        template.setAttribute('aria-hidden', 'false');\n\n        if (_options.modal) {\n          if (!_isFixedPosition) {\n            template.style.position = 'absolute';\n            template.style.top = framework.getScrollY() + 'px';\n          } else {\n            template.style.position = 'fixed';\n          }\n        }\n\n        if (_currentWindowScrollY === undefined) {\n          _shout('initialLayout');\n\n          _currentWindowScrollY = _initalWindowScrollY = framework.getScrollY();\n        } // add classes to root element of PhotoSwipe\n\n\n        var rootClasses = 'pswp--open ';\n\n        if (_options.mainClass) {\n          rootClasses += _options.mainClass + ' ';\n        }\n\n        if (_options.showHideOpacity) {\n          rootClasses += 'pswp--animate_opacity ';\n        }\n\n        rootClasses += _likelyTouchDevice ? 'pswp--touch' : 'pswp--notouch';\n        rootClasses += _features.animationName ? ' pswp--css_animation' : '';\n        rootClasses += _features.svg ? ' pswp--svg' : '';\n        framework.addClass(template, rootClasses);\n        self.updateSize(); // initial update\n\n        _containerShiftIndex = -1;\n        _indexDiff = null;\n\n        for (i = 0; i < NUM_HOLDERS; i++) {\n          _setTranslateX((i + _containerShiftIndex) * _slideSize.x, _itemHolders[i].el.style);\n        }\n\n        if (!_oldIE) {\n          framework.bind(self.scrollWrap, _downEvents, self); // no dragging for old IE\n        }\n\n        _listen('initialZoomInEnd', function () {\n          self.setContent(_itemHolders[0], _currentItemIndex - 1);\n          self.setContent(_itemHolders[2], _currentItemIndex + 1);\n          _itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'block';\n\n          if (_options.focus) {\n            // focus causes layout, \n            // which causes lag during the animation, \n            // that's why we delay it untill the initial zoom transition ends\n            template.focus();\n          }\n\n          _bindEvents();\n        }); // set content for center slide (first time)\n\n\n        self.setContent(_itemHolders[1], _currentItemIndex);\n        self.updateCurrItem();\n\n        _shout('afterInit');\n\n        if (!_isFixedPosition) {\n          // On all versions of iOS lower than 8.0, we check size of viewport every second.\n          // \n          // This is done to detect when Safari top & bottom bars appear, \n          // as this action doesn't trigger any events (like resize). \n          // \n          // On iOS8 they fixed this.\n          // \n          // 10 Nov 2014: iOS 7 usage ~40%. iOS 8 usage 56%.\n          _updateSizeInterval = setInterval(function () {\n            if (!_numAnimations && !_isDragging && !_isZooming && _currZoomLevel === self.currItem.initialZoomLevel) {\n              self.updateSize();\n            }\n          }, 1000);\n        }\n\n        framework.addClass(template, 'pswp--visible');\n      },\n      // Close the gallery, then destroy it\n      close: function close() {\n        if (!_isOpen) {\n          return;\n        }\n\n        _isOpen = false;\n        _isDestroying = true;\n\n        _shout('close');\n\n        _unbindEvents();\n\n        _showOrHide(self.currItem, null, true, self.destroy);\n      },\n      // destroys the gallery (unbinds events, cleans up intervals and timeouts to avoid memory leaks)\n      destroy: function destroy() {\n        _shout('destroy');\n\n        if (_showOrHideTimeout) {\n          clearTimeout(_showOrHideTimeout);\n        }\n\n        template.setAttribute('aria-hidden', 'true');\n        template.className = _initalClassName;\n\n        if (_updateSizeInterval) {\n          clearInterval(_updateSizeInterval);\n        }\n\n        framework.unbind(self.scrollWrap, _downEvents, self); // we unbind scroll event at the end, as closing animation may depend on it\n\n        framework.unbind(window, 'scroll', self);\n\n        _stopDragUpdateLoop();\n\n        _stopAllAnimations();\n\n        _listeners = null;\n      },\n\n      /**\r\n       * Pan image to position\r\n       * @param {Number} x     \r\n       * @param {Number} y     \r\n       * @param {Boolean} force Will ignore bounds if set to true.\r\n       */\n      panTo: function panTo(x, y, force) {\n        if (!force) {\n          if (x > _currPanBounds.min.x) {\n            x = _currPanBounds.min.x;\n          } else if (x < _currPanBounds.max.x) {\n            x = _currPanBounds.max.x;\n          }\n\n          if (y > _currPanBounds.min.y) {\n            y = _currPanBounds.min.y;\n          } else if (y < _currPanBounds.max.y) {\n            y = _currPanBounds.max.y;\n          }\n        }\n\n        _panOffset.x = x;\n        _panOffset.y = y;\n\n        _applyCurrentZoomPan();\n      },\n      handleEvent: function handleEvent(e) {\n        e = e || window.event;\n\n        if (_globalEventHandlers[e.type]) {\n          _globalEventHandlers[e.type](e);\n        }\n      },\n      goTo: function goTo(index) {\n        index = _getLoopedId(index);\n        var diff = index - _currentItemIndex;\n        _indexDiff = diff;\n        _currentItemIndex = index;\n        self.currItem = _getItemAt(_currentItemIndex);\n        _currPositionIndex -= diff;\n\n        _moveMainScroll(_slideSize.x * _currPositionIndex);\n\n        _stopAllAnimations();\n\n        _mainScrollAnimating = false;\n        self.updateCurrItem();\n      },\n      next: function next() {\n        self.goTo(_currentItemIndex + 1);\n      },\n      prev: function prev() {\n        self.goTo(_currentItemIndex - 1);\n      },\n      // update current zoom/pan objects\n      updateCurrZoomItem: function updateCurrZoomItem(emulateSetContent) {\n        if (emulateSetContent) {\n          _shout('beforeChange', 0);\n        } // itemHolder[1] is middle (current) item\n\n\n        if (_itemHolders[1].el.children.length) {\n          var zoomElement = _itemHolders[1].el.children[0];\n\n          if (framework.hasClass(zoomElement, 'pswp__zoom-wrap')) {\n            _currZoomElementStyle = zoomElement.style;\n          } else {\n            _currZoomElementStyle = null;\n          }\n        } else {\n          _currZoomElementStyle = null;\n        }\n\n        _currPanBounds = self.currItem.bounds;\n        _startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\n        _panOffset.x = _currPanBounds.center.x;\n        _panOffset.y = _currPanBounds.center.y;\n\n        if (emulateSetContent) {\n          _shout('afterChange');\n        }\n      },\n      invalidateCurrItems: function invalidateCurrItems() {\n        _itemsNeedUpdate = true;\n\n        for (var i = 0; i < NUM_HOLDERS; i++) {\n          if (_itemHolders[i].item) {\n            _itemHolders[i].item.needsUpdate = true;\n          }\n        }\n      },\n      updateCurrItem: function updateCurrItem(beforeAnimation) {\n        if (_indexDiff === 0) {\n          return;\n        }\n\n        var diffAbs = Math.abs(_indexDiff),\n            tempHolder;\n\n        if (beforeAnimation && diffAbs < 2) {\n          return;\n        }\n\n        self.currItem = _getItemAt(_currentItemIndex);\n        _renderMaxResolution = false;\n\n        _shout('beforeChange', _indexDiff);\n\n        if (diffAbs >= NUM_HOLDERS) {\n          _containerShiftIndex += _indexDiff + (_indexDiff > 0 ? -NUM_HOLDERS : NUM_HOLDERS);\n          diffAbs = NUM_HOLDERS;\n        }\n\n        for (var i = 0; i < diffAbs; i++) {\n          if (_indexDiff > 0) {\n            tempHolder = _itemHolders.shift();\n            _itemHolders[NUM_HOLDERS - 1] = tempHolder; // move first to last\n\n            _containerShiftIndex++;\n\n            _setTranslateX((_containerShiftIndex + 2) * _slideSize.x, tempHolder.el.style);\n\n            self.setContent(tempHolder, _currentItemIndex - diffAbs + i + 1 + 1);\n          } else {\n            tempHolder = _itemHolders.pop();\n\n            _itemHolders.unshift(tempHolder); // move last to first\n\n\n            _containerShiftIndex--;\n\n            _setTranslateX(_containerShiftIndex * _slideSize.x, tempHolder.el.style);\n\n            self.setContent(tempHolder, _currentItemIndex + diffAbs - i - 1 - 1);\n          }\n        } // reset zoom/pan on previous item\n\n\n        if (_currZoomElementStyle && Math.abs(_indexDiff) === 1) {\n          var prevItem = _getItemAt(_prevItemIndex);\n\n          if (prevItem.initialZoomLevel !== _currZoomLevel) {\n            _calculateItemSize(prevItem, _viewportSize);\n\n            _setImageSize(prevItem);\n\n            _applyZoomPanToItem(prevItem);\n          }\n        } // reset diff after update\n\n\n        _indexDiff = 0;\n        self.updateCurrZoomItem();\n        _prevItemIndex = _currentItemIndex;\n\n        _shout('afterChange');\n      },\n      updateSize: function updateSize(force) {\n        if (!_isFixedPosition && _options.modal) {\n          var windowScrollY = framework.getScrollY();\n\n          if (_currentWindowScrollY !== windowScrollY) {\n            template.style.top = windowScrollY + 'px';\n            _currentWindowScrollY = windowScrollY;\n          }\n\n          if (!force && _windowVisibleSize.x === window.innerWidth && _windowVisibleSize.y === window.innerHeight) {\n            return;\n          }\n\n          _windowVisibleSize.x = window.innerWidth;\n          _windowVisibleSize.y = window.innerHeight; //template.style.width = _windowVisibleSize.x + 'px';\n\n          template.style.height = _windowVisibleSize.y + 'px';\n        }\n\n        _viewportSize.x = self.scrollWrap.clientWidth;\n        _viewportSize.y = self.scrollWrap.clientHeight;\n\n        _updatePageScrollOffset();\n\n        _slideSize.x = _viewportSize.x + Math.round(_viewportSize.x * _options.spacing);\n        _slideSize.y = _viewportSize.y;\n\n        _moveMainScroll(_slideSize.x * _currPositionIndex);\n\n        _shout('beforeResize'); // even may be used for example to switch image sources\n        // don't re-calculate size on inital size update\n\n\n        if (_containerShiftIndex !== undefined) {\n          var holder, item, hIndex;\n\n          for (var i = 0; i < NUM_HOLDERS; i++) {\n            holder = _itemHolders[i];\n\n            _setTranslateX((i + _containerShiftIndex) * _slideSize.x, holder.el.style);\n\n            hIndex = _currentItemIndex + i - 1;\n\n            if (_options.loop && _getNumItems() > 2) {\n              hIndex = _getLoopedId(hIndex);\n            } // update zoom level on items and refresh source (if needsUpdate)\n\n\n            item = _getItemAt(hIndex); // re-render gallery item if `needsUpdate`,\n            // or doesn't have `bounds` (entirely new slide object)\n\n            if (item && (_itemsNeedUpdate || item.needsUpdate || !item.bounds)) {\n              self.cleanSlide(item);\n              self.setContent(holder, hIndex); // if \"center\" slide\n\n              if (i === 1) {\n                self.currItem = item;\n                self.updateCurrZoomItem(true);\n              }\n\n              item.needsUpdate = false;\n            } else if (holder.index === -1 && hIndex >= 0) {\n              // add content first time\n              self.setContent(holder, hIndex);\n            }\n\n            if (item && item.container) {\n              _calculateItemSize(item, _viewportSize);\n\n              _setImageSize(item);\n\n              _applyZoomPanToItem(item);\n            }\n          }\n\n          _itemsNeedUpdate = false;\n        }\n\n        _startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\n        _currPanBounds = self.currItem.bounds;\n\n        if (_currPanBounds) {\n          _panOffset.x = _currPanBounds.center.x;\n          _panOffset.y = _currPanBounds.center.y;\n\n          _applyCurrentZoomPan(true);\n        }\n\n        _shout('resize');\n      },\n      // Zoom current item to\n      zoomTo: function zoomTo(destZoomLevel, centerPoint, speed, easingFn, updateFn) {\n        /*\r\n        \tif(destZoomLevel === 'fit') {\r\n        \t\tdestZoomLevel = self.currItem.fitRatio;\r\n        \t} else if(destZoomLevel === 'fill') {\r\n        \t\tdestZoomLevel = self.currItem.fillRatio;\r\n        \t}\r\n        */\n        if (centerPoint) {\n          _startZoomLevel = _currZoomLevel;\n          _midZoomPoint.x = Math.abs(centerPoint.x) - _panOffset.x;\n          _midZoomPoint.y = Math.abs(centerPoint.y) - _panOffset.y;\n\n          _equalizePoints(_startPanOffset, _panOffset);\n        }\n\n        var destPanBounds = _calculatePanBounds(destZoomLevel, false),\n            destPanOffset = {};\n\n        _modifyDestPanOffset('x', destPanBounds, destPanOffset, destZoomLevel);\n\n        _modifyDestPanOffset('y', destPanBounds, destPanOffset, destZoomLevel);\n\n        var initialZoomLevel = _currZoomLevel;\n        var initialPanOffset = {\n          x: _panOffset.x,\n          y: _panOffset.y\n        };\n\n        _roundPoint(destPanOffset);\n\n        var onUpdate = function onUpdate(now) {\n          if (now === 1) {\n            _currZoomLevel = destZoomLevel;\n            _panOffset.x = destPanOffset.x;\n            _panOffset.y = destPanOffset.y;\n          } else {\n            _currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\n            _panOffset.x = (destPanOffset.x - initialPanOffset.x) * now + initialPanOffset.x;\n            _panOffset.y = (destPanOffset.y - initialPanOffset.y) * now + initialPanOffset.y;\n          }\n\n          if (updateFn) {\n            updateFn(now);\n          }\n\n          _applyCurrentZoomPan(now === 1);\n        };\n\n        if (speed) {\n          _animateProp('customZoomTo', 0, 1, speed, easingFn || framework.easing.sine.inOut, onUpdate);\n        } else {\n          onUpdate(1);\n        }\n      }\n    };\n    /*>>core*/\n\n    /*>>gestures*/\n\n    /**\r\n     * Mouse/touch/pointer event handlers.\r\n     * \r\n     * separated from @core.js for readability\r\n     */\n\n    var MIN_SWIPE_DISTANCE = 30,\n        DIRECTION_CHECK_OFFSET = 10; // amount of pixels to drag to determine direction of swipe\n\n    var _gestureStartTime,\n        _gestureCheckSpeedTime,\n        // pool of objects that are used during dragging of zooming\n    p = {},\n        // first point\n    p2 = {},\n        // second point (for zoom gesture)\n    delta = {},\n        _currPoint = {},\n        _startPoint = {},\n        _currPointers = [],\n        _startMainScrollPos = {},\n        _releaseAnimData,\n        _posPoints = [],\n        // array of points during dragging, used to determine type of gesture\n    _tempPoint = {},\n        _isZoomingIn,\n        _verticalDragInitiated,\n        _oldAndroidTouchEndTimeout,\n        _currZoomedItemIndex = 0,\n        _centerPoint = _getEmptyPoint(),\n        _lastReleaseTime = 0,\n        _isDragging,\n        // at least one pointer is down\n    _isMultitouch,\n        // at least two _pointers are down\n    _zoomStarted,\n        // zoom level changed during zoom gesture\n    _moved,\n        _dragAnimFrame,\n        _mainScrollShifted,\n        _currentPoints,\n        // array of current touch points\n    _isZooming,\n        _currPointsDistance,\n        _startPointsDistance,\n        _currPanBounds,\n        _mainScrollPos = _getEmptyPoint(),\n        _currZoomElementStyle,\n        _mainScrollAnimating,\n        // true, if animation after swipe gesture is running\n    _midZoomPoint = _getEmptyPoint(),\n        _currCenterPoint = _getEmptyPoint(),\n        _direction,\n        _isFirstMove,\n        _opacityChanged,\n        _bgOpacity,\n        _wasOverInitialZoom,\n        _isEqualPoints = function _isEqualPoints(p1, p2) {\n      return p1.x === p2.x && p1.y === p2.y;\n    },\n        _isNearbyPoints = function _isNearbyPoints(touch0, touch1) {\n      return Math.abs(touch0.x - touch1.x) < DOUBLE_TAP_RADIUS && Math.abs(touch0.y - touch1.y) < DOUBLE_TAP_RADIUS;\n    },\n        _calculatePointsDistance = function _calculatePointsDistance(p1, p2) {\n      _tempPoint.x = Math.abs(p1.x - p2.x);\n      _tempPoint.y = Math.abs(p1.y - p2.y);\n      return Math.sqrt(_tempPoint.x * _tempPoint.x + _tempPoint.y * _tempPoint.y);\n    },\n        _stopDragUpdateLoop = function _stopDragUpdateLoop() {\n      if (_dragAnimFrame) {\n        _cancelAF(_dragAnimFrame);\n\n        _dragAnimFrame = null;\n      }\n    },\n        _dragUpdateLoop = function _dragUpdateLoop() {\n      if (_isDragging) {\n        _dragAnimFrame = _requestAF(_dragUpdateLoop);\n\n        _renderMovement();\n      }\n    },\n        _canPan = function _canPan() {\n      return !(_options.scaleMode === 'fit' && _currZoomLevel === self.currItem.initialZoomLevel);\n    },\n        // find the closest parent DOM element\n    _closestElement = function _closestElement(el, fn) {\n      if (!el || el === document) {\n        return false;\n      } // don't search elements above pswp__scroll-wrap\n\n\n      if (el.getAttribute('class') && el.getAttribute('class').indexOf('pswp__scroll-wrap') > -1) {\n        return false;\n      }\n\n      if (fn(el)) {\n        return el;\n      }\n\n      return _closestElement(el.parentNode, fn);\n    },\n        _preventObj = {},\n        _preventDefaultEventBehaviour = function _preventDefaultEventBehaviour(e, isDown) {\n      _preventObj.prevent = !_closestElement(e.target, _options.isClickableElement);\n\n      _shout('preventDragEvent', e, isDown, _preventObj);\n\n      return _preventObj.prevent;\n    },\n        _convertTouchToPoint = function _convertTouchToPoint(touch, p) {\n      p.x = touch.pageX;\n      p.y = touch.pageY;\n      p.id = touch.identifier;\n      return p;\n    },\n        _findCenterOfPoints = function _findCenterOfPoints(p1, p2, pCenter) {\n      pCenter.x = (p1.x + p2.x) * 0.5;\n      pCenter.y = (p1.y + p2.y) * 0.5;\n    },\n        _pushPosPoint = function _pushPosPoint(time, x, y) {\n      if (time - _gestureCheckSpeedTime > 50) {\n        var o = _posPoints.length > 2 ? _posPoints.shift() : {};\n        o.x = x;\n        o.y = y;\n\n        _posPoints.push(o);\n\n        _gestureCheckSpeedTime = time;\n      }\n    },\n        _calculateVerticalDragOpacityRatio = function _calculateVerticalDragOpacityRatio() {\n      var yOffset = _panOffset.y - self.currItem.initialPosition.y; // difference between initial and current position\n\n      return 1 - Math.abs(yOffset / (_viewportSize.y / 2));\n    },\n        // points pool, reused during touch events\n    _ePoint1 = {},\n        _ePoint2 = {},\n        _tempPointsArr = [],\n        _tempCounter,\n        _getTouchPoints = function _getTouchPoints(e) {\n      // clean up previous points, without recreating array\n      while (_tempPointsArr.length > 0) {\n        _tempPointsArr.pop();\n      }\n\n      if (!_pointerEventEnabled) {\n        if (e.type.indexOf('touch') > -1) {\n          if (e.touches && e.touches.length > 0) {\n            _tempPointsArr[0] = _convertTouchToPoint(e.touches[0], _ePoint1);\n\n            if (e.touches.length > 1) {\n              _tempPointsArr[1] = _convertTouchToPoint(e.touches[1], _ePoint2);\n            }\n          }\n        } else {\n          _ePoint1.x = e.pageX;\n          _ePoint1.y = e.pageY;\n          _ePoint1.id = '';\n          _tempPointsArr[0] = _ePoint1; //_ePoint1;\n        }\n      } else {\n        _tempCounter = 0; // we can use forEach, as pointer events are supported only in modern browsers\n\n        _currPointers.forEach(function (p) {\n          if (_tempCounter === 0) {\n            _tempPointsArr[0] = p;\n          } else if (_tempCounter === 1) {\n            _tempPointsArr[1] = p;\n          }\n\n          _tempCounter++;\n        });\n      }\n\n      return _tempPointsArr;\n    },\n        _panOrMoveMainScroll = function _panOrMoveMainScroll(axis, delta) {\n      var panFriction,\n          overDiff = 0,\n          newOffset = _panOffset[axis] + delta[axis],\n          startOverDiff,\n          dir = delta[axis] > 0,\n          newMainScrollPosition = _mainScrollPos.x + delta.x,\n          mainScrollDiff = _mainScrollPos.x - _startMainScrollPos.x,\n          newPanPos,\n          newMainScrollPos; // calculate fdistance over the bounds and friction\n\n      if (newOffset > _currPanBounds.min[axis] || newOffset < _currPanBounds.max[axis]) {\n        panFriction = _options.panEndFriction; // Linear increasing of friction, so at 1/4 of viewport it's at max value. \n        // Looks not as nice as was expected. Left for history.\n        // panFriction = (1 - (_panOffset[axis] + delta[axis] + panBounds.min[axis]) / (_viewportSize[axis] / 4) );\n      } else {\n        panFriction = 1;\n      }\n\n      newOffset = _panOffset[axis] + delta[axis] * panFriction; // move main scroll or start panning\n\n      if (_options.allowPanToNext || _currZoomLevel === self.currItem.initialZoomLevel) {\n        if (!_currZoomElementStyle) {\n          newMainScrollPos = newMainScrollPosition;\n        } else if (_direction === 'h' && axis === 'x' && !_zoomStarted) {\n          if (dir) {\n            if (newOffset > _currPanBounds.min[axis]) {\n              panFriction = _options.panEndFriction;\n              overDiff = _currPanBounds.min[axis] - newOffset;\n              startOverDiff = _currPanBounds.min[axis] - _startPanOffset[axis];\n            } // drag right\n\n\n            if ((startOverDiff <= 0 || mainScrollDiff < 0) && _getNumItems() > 1) {\n              newMainScrollPos = newMainScrollPosition;\n\n              if (mainScrollDiff < 0 && newMainScrollPosition > _startMainScrollPos.x) {\n                newMainScrollPos = _startMainScrollPos.x;\n              }\n            } else {\n              if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n                newPanPos = newOffset;\n              }\n            }\n          } else {\n            if (newOffset < _currPanBounds.max[axis]) {\n              panFriction = _options.panEndFriction;\n              overDiff = newOffset - _currPanBounds.max[axis];\n              startOverDiff = _startPanOffset[axis] - _currPanBounds.max[axis];\n            }\n\n            if ((startOverDiff <= 0 || mainScrollDiff > 0) && _getNumItems() > 1) {\n              newMainScrollPos = newMainScrollPosition;\n\n              if (mainScrollDiff > 0 && newMainScrollPosition < _startMainScrollPos.x) {\n                newMainScrollPos = _startMainScrollPos.x;\n              }\n            } else {\n              if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n                newPanPos = newOffset;\n              }\n            }\n          } //\n\n        }\n\n        if (axis === 'x') {\n          if (newMainScrollPos !== undefined) {\n            _moveMainScroll(newMainScrollPos, true);\n\n            if (newMainScrollPos === _startMainScrollPos.x) {\n              _mainScrollShifted = false;\n            } else {\n              _mainScrollShifted = true;\n            }\n          }\n\n          if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n            if (newPanPos !== undefined) {\n              _panOffset.x = newPanPos;\n            } else if (!_mainScrollShifted) {\n              _panOffset.x += delta.x * panFriction;\n            }\n          }\n\n          return newMainScrollPos !== undefined;\n        }\n      }\n\n      if (!_mainScrollAnimating) {\n        if (!_mainScrollShifted) {\n          if (_currZoomLevel > self.currItem.fitRatio) {\n            _panOffset[axis] += delta[axis] * panFriction;\n          }\n        }\n      }\n    },\n        // Pointerdown/touchstart/mousedown handler\n    _onDragStart = function _onDragStart(e) {\n      // Allow dragging only via left mouse button.\n      // As this handler is not added in IE8 - we ignore e.which\n      // \n      // http://www.quirksmode.org/js/events_properties.html\n      // https://developer.mozilla.org/en-US/docs/Web/API/event.button\n      if (e.type === 'mousedown' && e.button > 0) {\n        return;\n      }\n\n      if (_initialZoomRunning) {\n        e.preventDefault();\n        return;\n      }\n\n      if (_oldAndroidTouchEndTimeout && e.type === 'mousedown') {\n        return;\n      }\n\n      if (_preventDefaultEventBehaviour(e, true)) {\n        e.preventDefault();\n      }\n\n      _shout('pointerDown');\n\n      if (_pointerEventEnabled) {\n        var pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\n        if (pointerIndex < 0) {\n          pointerIndex = _currPointers.length;\n        }\n\n        _currPointers[pointerIndex] = {\n          x: e.pageX,\n          y: e.pageY,\n          id: e.pointerId\n        };\n      }\n\n      var startPointsList = _getTouchPoints(e),\n          numPoints = startPointsList.length;\n\n      _currentPoints = null;\n\n      _stopAllAnimations(); // init drag\n\n\n      if (!_isDragging || numPoints === 1) {\n        _isDragging = _isFirstMove = true;\n        framework.bind(window, _upMoveEvents, self);\n        _isZoomingIn = _wasOverInitialZoom = _opacityChanged = _verticalDragInitiated = _mainScrollShifted = _moved = _isMultitouch = _zoomStarted = false;\n        _direction = null;\n\n        _shout('firstTouchStart', startPointsList);\n\n        _equalizePoints(_startPanOffset, _panOffset);\n\n        _currPanDist.x = _currPanDist.y = 0;\n\n        _equalizePoints(_currPoint, startPointsList[0]);\n\n        _equalizePoints(_startPoint, _currPoint); //_equalizePoints(_startMainScrollPos, _mainScrollPos);\n\n\n        _startMainScrollPos.x = _slideSize.x * _currPositionIndex;\n        _posPoints = [{\n          x: _currPoint.x,\n          y: _currPoint.y\n        }];\n        _gestureCheckSpeedTime = _gestureStartTime = _getCurrentTime(); //_mainScrollAnimationEnd(true);\n\n        _calculatePanBounds(_currZoomLevel, true); // Start rendering\n\n\n        _stopDragUpdateLoop();\n\n        _dragUpdateLoop();\n      } // init zoom\n\n\n      if (!_isZooming && numPoints > 1 && !_mainScrollAnimating && !_mainScrollShifted) {\n        _startZoomLevel = _currZoomLevel;\n        _zoomStarted = false; // true if zoom changed at least once\n\n        _isZooming = _isMultitouch = true;\n        _currPanDist.y = _currPanDist.x = 0;\n\n        _equalizePoints(_startPanOffset, _panOffset);\n\n        _equalizePoints(p, startPointsList[0]);\n\n        _equalizePoints(p2, startPointsList[1]);\n\n        _findCenterOfPoints(p, p2, _currCenterPoint);\n\n        _midZoomPoint.x = Math.abs(_currCenterPoint.x) - _panOffset.x;\n        _midZoomPoint.y = Math.abs(_currCenterPoint.y) - _panOffset.y;\n        _currPointsDistance = _startPointsDistance = _calculatePointsDistance(p, p2);\n      }\n    },\n        // Pointermove/touchmove/mousemove handler\n    _onDragMove = function _onDragMove(e) {\n      e.preventDefault();\n\n      if (_pointerEventEnabled) {\n        var pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\n        if (pointerIndex > -1) {\n          var p = _currPointers[pointerIndex];\n          p.x = e.pageX;\n          p.y = e.pageY;\n        }\n      }\n\n      if (_isDragging) {\n        var touchesList = _getTouchPoints(e);\n\n        if (!_direction && !_moved && !_isZooming) {\n          if (_mainScrollPos.x !== _slideSize.x * _currPositionIndex) {\n            // if main scroll position is shifted – direction is always horizontal\n            _direction = 'h';\n          } else {\n            var diff = Math.abs(touchesList[0].x - _currPoint.x) - Math.abs(touchesList[0].y - _currPoint.y); // check the direction of movement\n\n            if (Math.abs(diff) >= DIRECTION_CHECK_OFFSET) {\n              _direction = diff > 0 ? 'h' : 'v';\n              _currentPoints = touchesList;\n            }\n          }\n        } else {\n          _currentPoints = touchesList;\n        }\n      }\n    },\n        // \n    _renderMovement = function _renderMovement() {\n      if (!_currentPoints) {\n        return;\n      }\n\n      var numPoints = _currentPoints.length;\n\n      if (numPoints === 0) {\n        return;\n      }\n\n      _equalizePoints(p, _currentPoints[0]);\n\n      delta.x = p.x - _currPoint.x;\n      delta.y = p.y - _currPoint.y;\n\n      if (_isZooming && numPoints > 1) {\n        // Handle behaviour for more than 1 point\n        _currPoint.x = p.x;\n        _currPoint.y = p.y; // check if one of two points changed\n\n        if (!delta.x && !delta.y && _isEqualPoints(_currentPoints[1], p2)) {\n          return;\n        }\n\n        _equalizePoints(p2, _currentPoints[1]);\n\n        if (!_zoomStarted) {\n          _zoomStarted = true;\n\n          _shout('zoomGestureStarted');\n        } // Distance between two points\n\n\n        var pointsDistance = _calculatePointsDistance(p, p2);\n\n        var zoomLevel = _calculateZoomLevel(pointsDistance); // slightly over the of initial zoom level\n\n\n        if (zoomLevel > self.currItem.initialZoomLevel + self.currItem.initialZoomLevel / 15) {\n          _wasOverInitialZoom = true;\n        } // Apply the friction if zoom level is out of the bounds\n\n\n        var zoomFriction = 1,\n            minZoomLevel = _getMinZoomLevel(),\n            maxZoomLevel = _getMaxZoomLevel();\n\n        if (zoomLevel < minZoomLevel) {\n          if (_options.pinchToClose && !_wasOverInitialZoom && _startZoomLevel <= self.currItem.initialZoomLevel) {\n            // fade out background if zooming out\n            var minusDiff = minZoomLevel - zoomLevel;\n            var percent = 1 - minusDiff / (minZoomLevel / 1.2);\n\n            _applyBgOpacity(percent);\n\n            _shout('onPinchClose', percent);\n\n            _opacityChanged = true;\n          } else {\n            zoomFriction = (minZoomLevel - zoomLevel) / minZoomLevel;\n\n            if (zoomFriction > 1) {\n              zoomFriction = 1;\n            }\n\n            zoomLevel = minZoomLevel - zoomFriction * (minZoomLevel / 3);\n          }\n        } else if (zoomLevel > maxZoomLevel) {\n          // 1.5 - extra zoom level above the max. E.g. if max is x6, real max 6 + 1.5 = 7.5\n          zoomFriction = (zoomLevel - maxZoomLevel) / (minZoomLevel * 6);\n\n          if (zoomFriction > 1) {\n            zoomFriction = 1;\n          }\n\n          zoomLevel = maxZoomLevel + zoomFriction * minZoomLevel;\n        }\n\n        if (zoomFriction < 0) {\n          zoomFriction = 0;\n        } // distance between touch points after friction is applied\n\n\n        _currPointsDistance = pointsDistance; // _centerPoint - The point in the middle of two pointers\n\n        _findCenterOfPoints(p, p2, _centerPoint); // paning with two pointers pressed\n\n\n        _currPanDist.x += _centerPoint.x - _currCenterPoint.x;\n        _currPanDist.y += _centerPoint.y - _currCenterPoint.y;\n\n        _equalizePoints(_currCenterPoint, _centerPoint);\n\n        _panOffset.x = _calculatePanOffset('x', zoomLevel);\n        _panOffset.y = _calculatePanOffset('y', zoomLevel);\n        _isZoomingIn = zoomLevel > _currZoomLevel;\n        _currZoomLevel = zoomLevel;\n\n        _applyCurrentZoomPan();\n      } else {\n        // handle behaviour for one point (dragging or panning)\n        if (!_direction) {\n          return;\n        }\n\n        if (_isFirstMove) {\n          _isFirstMove = false; // subtract drag distance that was used during the detection direction  \n\n          if (Math.abs(delta.x) >= DIRECTION_CHECK_OFFSET) {\n            delta.x -= _currentPoints[0].x - _startPoint.x;\n          }\n\n          if (Math.abs(delta.y) >= DIRECTION_CHECK_OFFSET) {\n            delta.y -= _currentPoints[0].y - _startPoint.y;\n          }\n        }\n\n        _currPoint.x = p.x;\n        _currPoint.y = p.y; // do nothing if pointers position hasn't changed\n\n        if (delta.x === 0 && delta.y === 0) {\n          return;\n        }\n\n        if (_direction === 'v' && _options.closeOnVerticalDrag) {\n          if (!_canPan()) {\n            _currPanDist.y += delta.y;\n            _panOffset.y += delta.y;\n\n            var opacityRatio = _calculateVerticalDragOpacityRatio();\n\n            _verticalDragInitiated = true;\n\n            _shout('onVerticalDrag', opacityRatio);\n\n            _applyBgOpacity(opacityRatio);\n\n            _applyCurrentZoomPan();\n\n            return;\n          }\n        }\n\n        _pushPosPoint(_getCurrentTime(), p.x, p.y);\n\n        _moved = true;\n        _currPanBounds = self.currItem.bounds;\n\n        var mainScrollChanged = _panOrMoveMainScroll('x', delta);\n\n        if (!mainScrollChanged) {\n          _panOrMoveMainScroll('y', delta);\n\n          _roundPoint(_panOffset);\n\n          _applyCurrentZoomPan();\n        }\n      }\n    },\n        // Pointerup/pointercancel/touchend/touchcancel/mouseup event handler\n    _onDragRelease = function _onDragRelease(e) {\n      if (_features.isOldAndroid) {\n        if (_oldAndroidTouchEndTimeout && e.type === 'mouseup') {\n          return;\n        } // on Android (v4.1, 4.2, 4.3 & possibly older) \n        // ghost mousedown/up event isn't preventable via e.preventDefault,\n        // which causes fake mousedown event\n        // so we block mousedown/up for 600ms\n\n\n        if (e.type.indexOf('touch') > -1) {\n          clearTimeout(_oldAndroidTouchEndTimeout);\n          _oldAndroidTouchEndTimeout = setTimeout(function () {\n            _oldAndroidTouchEndTimeout = 0;\n          }, 600);\n        }\n      }\n\n      _shout('pointerUp');\n\n      if (_preventDefaultEventBehaviour(e, false)) {\n        e.preventDefault();\n      }\n\n      var releasePoint;\n\n      if (_pointerEventEnabled) {\n        var pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\n        if (pointerIndex > -1) {\n          releasePoint = _currPointers.splice(pointerIndex, 1)[0];\n\n          if (navigator.msPointerEnabled) {\n            var MSPOINTER_TYPES = {\n              4: 'mouse',\n              // event.MSPOINTER_TYPE_MOUSE\n              2: 'touch',\n              // event.MSPOINTER_TYPE_TOUCH \n              3: 'pen' // event.MSPOINTER_TYPE_PEN\n\n            };\n            releasePoint.type = MSPOINTER_TYPES[e.pointerType];\n\n            if (!releasePoint.type) {\n              releasePoint.type = e.pointerType || 'mouse';\n            }\n          } else {\n            releasePoint.type = e.pointerType || 'mouse';\n          }\n        }\n      }\n\n      var touchList = _getTouchPoints(e),\n          gestureType,\n          numPoints = touchList.length;\n\n      if (e.type === 'mouseup') {\n        numPoints = 0;\n      } // Do nothing if there were 3 touch points or more\n\n\n      if (numPoints === 2) {\n        _currentPoints = null;\n        return true;\n      } // if second pointer released\n\n\n      if (numPoints === 1) {\n        _equalizePoints(_startPoint, touchList[0]);\n      } // pointer hasn't moved, send \"tap release\" point\n\n\n      if (numPoints === 0 && !_direction && !_mainScrollAnimating) {\n        if (!releasePoint) {\n          if (e.type === 'mouseup') {\n            releasePoint = {\n              x: e.pageX,\n              y: e.pageY,\n              type: 'mouse'\n            };\n          } else if (e.changedTouches && e.changedTouches[0]) {\n            releasePoint = {\n              x: e.changedTouches[0].pageX,\n              y: e.changedTouches[0].pageY,\n              type: 'touch'\n            };\n          }\n        }\n\n        _shout('touchRelease', e, releasePoint);\n      } // Difference in time between releasing of two last touch points (zoom gesture)\n\n\n      var releaseTimeDiff = -1; // Gesture completed, no pointers left\n\n      if (numPoints === 0) {\n        _isDragging = false;\n        framework.unbind(window, _upMoveEvents, self);\n\n        _stopDragUpdateLoop();\n\n        if (_isZooming) {\n          // Two points released at the same time\n          releaseTimeDiff = 0;\n        } else if (_lastReleaseTime !== -1) {\n          releaseTimeDiff = _getCurrentTime() - _lastReleaseTime;\n        }\n      }\n\n      _lastReleaseTime = numPoints === 1 ? _getCurrentTime() : -1;\n\n      if (releaseTimeDiff !== -1 && releaseTimeDiff < 150) {\n        gestureType = 'zoom';\n      } else {\n        gestureType = 'swipe';\n      }\n\n      if (_isZooming && numPoints < 2) {\n        _isZooming = false; // Only second point released\n\n        if (numPoints === 1) {\n          gestureType = 'zoomPointerUp';\n        }\n\n        _shout('zoomGestureEnded');\n      }\n\n      _currentPoints = null;\n\n      if (!_moved && !_zoomStarted && !_mainScrollAnimating && !_verticalDragInitiated) {\n        // nothing to animate\n        return;\n      }\n\n      _stopAllAnimations();\n\n      if (!_releaseAnimData) {\n        _releaseAnimData = _initDragReleaseAnimationData();\n      }\n\n      _releaseAnimData.calculateSwipeSpeed('x');\n\n      if (_verticalDragInitiated) {\n        var opacityRatio = _calculateVerticalDragOpacityRatio();\n\n        if (opacityRatio < _options.verticalDragRange) {\n          self.close();\n        } else {\n          var initalPanY = _panOffset.y,\n              initialBgOpacity = _bgOpacity;\n\n          _animateProp('verticalDrag', 0, 1, 300, framework.easing.cubic.out, function (now) {\n            _panOffset.y = (self.currItem.initialPosition.y - initalPanY) * now + initalPanY;\n\n            _applyBgOpacity((1 - initialBgOpacity) * now + initialBgOpacity);\n\n            _applyCurrentZoomPan();\n          });\n\n          _shout('onVerticalDrag', 1);\n        }\n\n        return;\n      } // main scroll \n\n\n      if ((_mainScrollShifted || _mainScrollAnimating) && numPoints === 0) {\n        var itemChanged = _finishSwipeMainScrollGesture(gestureType, _releaseAnimData);\n\n        if (itemChanged) {\n          return;\n        }\n\n        gestureType = 'zoomPointerUp';\n      } // prevent zoom/pan animation when main scroll animation runs\n\n\n      if (_mainScrollAnimating) {\n        return;\n      } // Complete simple zoom gesture (reset zoom level if it's out of the bounds)  \n\n\n      if (gestureType !== 'swipe') {\n        _completeZoomGesture();\n\n        return;\n      } // Complete pan gesture if main scroll is not shifted, and it's possible to pan current image\n\n\n      if (!_mainScrollShifted && _currZoomLevel > self.currItem.fitRatio) {\n        _completePanGesture(_releaseAnimData);\n      }\n    },\n        // Returns object with data about gesture\n    // It's created only once and then reused\n    _initDragReleaseAnimationData = function _initDragReleaseAnimationData() {\n      // temp local vars\n      var lastFlickDuration, tempReleasePos; // s = this\n\n      var s = {\n        lastFlickOffset: {},\n        lastFlickDist: {},\n        lastFlickSpeed: {},\n        slowDownRatio: {},\n        slowDownRatioReverse: {},\n        speedDecelerationRatio: {},\n        speedDecelerationRatioAbs: {},\n        distanceOffset: {},\n        backAnimDestination: {},\n        backAnimStarted: {},\n        calculateSwipeSpeed: function calculateSwipeSpeed(axis) {\n          if (_posPoints.length > 1) {\n            lastFlickDuration = _getCurrentTime() - _gestureCheckSpeedTime + 50;\n            tempReleasePos = _posPoints[_posPoints.length - 2][axis];\n          } else {\n            lastFlickDuration = _getCurrentTime() - _gestureStartTime; // total gesture duration\n\n            tempReleasePos = _startPoint[axis];\n          }\n\n          s.lastFlickOffset[axis] = _currPoint[axis] - tempReleasePos;\n          s.lastFlickDist[axis] = Math.abs(s.lastFlickOffset[axis]);\n\n          if (s.lastFlickDist[axis] > 20) {\n            s.lastFlickSpeed[axis] = s.lastFlickOffset[axis] / lastFlickDuration;\n          } else {\n            s.lastFlickSpeed[axis] = 0;\n          }\n\n          if (Math.abs(s.lastFlickSpeed[axis]) < 0.1) {\n            s.lastFlickSpeed[axis] = 0;\n          }\n\n          s.slowDownRatio[axis] = 0.95;\n          s.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\n          s.speedDecelerationRatio[axis] = 1;\n        },\n        calculateOverBoundsAnimOffset: function calculateOverBoundsAnimOffset(axis, speed) {\n          if (!s.backAnimStarted[axis]) {\n            if (_panOffset[axis] > _currPanBounds.min[axis]) {\n              s.backAnimDestination[axis] = _currPanBounds.min[axis];\n            } else if (_panOffset[axis] < _currPanBounds.max[axis]) {\n              s.backAnimDestination[axis] = _currPanBounds.max[axis];\n            }\n\n            if (s.backAnimDestination[axis] !== undefined) {\n              s.slowDownRatio[axis] = 0.7;\n              s.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\n\n              if (s.speedDecelerationRatioAbs[axis] < 0.05) {\n                s.lastFlickSpeed[axis] = 0;\n                s.backAnimStarted[axis] = true;\n\n                _animateProp('bounceZoomPan' + axis, _panOffset[axis], s.backAnimDestination[axis], speed || 300, framework.easing.sine.out, function (pos) {\n                  _panOffset[axis] = pos;\n\n                  _applyCurrentZoomPan();\n                });\n              }\n            }\n          }\n        },\n        // Reduces the speed by slowDownRatio (per 10ms)\n        calculateAnimOffset: function calculateAnimOffset(axis) {\n          if (!s.backAnimStarted[axis]) {\n            s.speedDecelerationRatio[axis] = s.speedDecelerationRatio[axis] * (s.slowDownRatio[axis] + s.slowDownRatioReverse[axis] - s.slowDownRatioReverse[axis] * s.timeDiff / 10);\n            s.speedDecelerationRatioAbs[axis] = Math.abs(s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis]);\n            s.distanceOffset[axis] = s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis] * s.timeDiff;\n            _panOffset[axis] += s.distanceOffset[axis];\n          }\n        },\n        panAnimLoop: function panAnimLoop() {\n          if (_animations.zoomPan) {\n            _animations.zoomPan.raf = _requestAF(s.panAnimLoop);\n            s.now = _getCurrentTime();\n            s.timeDiff = s.now - s.lastNow;\n            s.lastNow = s.now;\n            s.calculateAnimOffset('x');\n            s.calculateAnimOffset('y');\n\n            _applyCurrentZoomPan();\n\n            s.calculateOverBoundsAnimOffset('x');\n            s.calculateOverBoundsAnimOffset('y');\n\n            if (s.speedDecelerationRatioAbs.x < 0.05 && s.speedDecelerationRatioAbs.y < 0.05) {\n              // round pan position\n              _panOffset.x = Math.round(_panOffset.x);\n              _panOffset.y = Math.round(_panOffset.y);\n\n              _applyCurrentZoomPan();\n\n              _stopAnimation('zoomPan');\n\n              return;\n            }\n          }\n        }\n      };\n      return s;\n    },\n        _completePanGesture = function _completePanGesture(animData) {\n      // calculate swipe speed for Y axis (paanning)\n      animData.calculateSwipeSpeed('y');\n      _currPanBounds = self.currItem.bounds;\n      animData.backAnimDestination = {};\n      animData.backAnimStarted = {}; // Avoid acceleration animation if speed is too low\n\n      if (Math.abs(animData.lastFlickSpeed.x) <= 0.05 && Math.abs(animData.lastFlickSpeed.y) <= 0.05) {\n        animData.speedDecelerationRatioAbs.x = animData.speedDecelerationRatioAbs.y = 0; // Run pan drag release animation. E.g. if you drag image and release finger without momentum.\n\n        animData.calculateOverBoundsAnimOffset('x');\n        animData.calculateOverBoundsAnimOffset('y');\n        return true;\n      } // Animation loop that controls the acceleration after pan gesture ends\n\n\n      _registerStartAnimation('zoomPan');\n\n      animData.lastNow = _getCurrentTime();\n      animData.panAnimLoop();\n    },\n        _finishSwipeMainScrollGesture = function _finishSwipeMainScrollGesture(gestureType, _releaseAnimData) {\n      var itemChanged;\n\n      if (!_mainScrollAnimating) {\n        _currZoomedItemIndex = _currentItemIndex;\n      }\n\n      var itemsDiff;\n\n      if (gestureType === 'swipe') {\n        var totalShiftDist = _currPoint.x - _startPoint.x,\n            isFastLastFlick = _releaseAnimData.lastFlickDist.x < 10; // if container is shifted for more than MIN_SWIPE_DISTANCE, \n        // and last flick gesture was in right direction\n\n        if (totalShiftDist > MIN_SWIPE_DISTANCE && (isFastLastFlick || _releaseAnimData.lastFlickOffset.x > 20)) {\n          // go to prev item\n          itemsDiff = -1;\n        } else if (totalShiftDist < -MIN_SWIPE_DISTANCE && (isFastLastFlick || _releaseAnimData.lastFlickOffset.x < -20)) {\n          // go to next item\n          itemsDiff = 1;\n        }\n      }\n\n      var nextCircle;\n\n      if (itemsDiff) {\n        _currentItemIndex += itemsDiff;\n\n        if (_currentItemIndex < 0) {\n          _currentItemIndex = _options.loop ? _getNumItems() - 1 : 0;\n          nextCircle = true;\n        } else if (_currentItemIndex >= _getNumItems()) {\n          _currentItemIndex = _options.loop ? 0 : _getNumItems() - 1;\n          nextCircle = true;\n        }\n\n        if (!nextCircle || _options.loop) {\n          _indexDiff += itemsDiff;\n          _currPositionIndex -= itemsDiff;\n          itemChanged = true;\n        }\n      }\n\n      var animateToX = _slideSize.x * _currPositionIndex;\n      var animateToDist = Math.abs(animateToX - _mainScrollPos.x);\n      var finishAnimDuration;\n\n      if (!itemChanged && animateToX > _mainScrollPos.x !== _releaseAnimData.lastFlickSpeed.x > 0) {\n        // \"return to current\" duration, e.g. when dragging from slide 0 to -1\n        finishAnimDuration = 333;\n      } else {\n        finishAnimDuration = Math.abs(_releaseAnimData.lastFlickSpeed.x) > 0 ? animateToDist / Math.abs(_releaseAnimData.lastFlickSpeed.x) : 333;\n        finishAnimDuration = Math.min(finishAnimDuration, 400);\n        finishAnimDuration = Math.max(finishAnimDuration, 250);\n      }\n\n      if (_currZoomedItemIndex === _currentItemIndex) {\n        itemChanged = false;\n      }\n\n      _mainScrollAnimating = true;\n\n      _shout('mainScrollAnimStart');\n\n      _animateProp('mainScroll', _mainScrollPos.x, animateToX, finishAnimDuration, framework.easing.cubic.out, _moveMainScroll, function () {\n        _stopAllAnimations();\n\n        _mainScrollAnimating = false;\n        _currZoomedItemIndex = -1;\n\n        if (itemChanged || _currZoomedItemIndex !== _currentItemIndex) {\n          self.updateCurrItem();\n        }\n\n        _shout('mainScrollAnimComplete');\n      });\n\n      if (itemChanged) {\n        self.updateCurrItem(true);\n      }\n\n      return itemChanged;\n    },\n        _calculateZoomLevel = function _calculateZoomLevel(touchesDistance) {\n      return 1 / _startPointsDistance * touchesDistance * _startZoomLevel;\n    },\n        // Resets zoom if it's out of bounds\n    _completeZoomGesture = function _completeZoomGesture() {\n      var destZoomLevel = _currZoomLevel,\n          minZoomLevel = _getMinZoomLevel(),\n          maxZoomLevel = _getMaxZoomLevel();\n\n      if (_currZoomLevel < minZoomLevel) {\n        destZoomLevel = minZoomLevel;\n      } else if (_currZoomLevel > maxZoomLevel) {\n        destZoomLevel = maxZoomLevel;\n      }\n\n      var destOpacity = 1,\n          onUpdate,\n          initialOpacity = _bgOpacity;\n\n      if (_opacityChanged && !_isZoomingIn && !_wasOverInitialZoom && _currZoomLevel < minZoomLevel) {\n        //_closedByScroll = true;\n        self.close();\n        return true;\n      }\n\n      if (_opacityChanged) {\n        onUpdate = function onUpdate(now) {\n          _applyBgOpacity((destOpacity - initialOpacity) * now + initialOpacity);\n        };\n      }\n\n      self.zoomTo(destZoomLevel, 0, 200, framework.easing.cubic.out, onUpdate);\n      return true;\n    };\n\n    _registerModule('Gestures', {\n      publicMethods: {\n        initGestures: function initGestures() {\n          // helper function that builds touch/pointer/mouse events\n          var addEventNames = function addEventNames(pref, down, move, up, cancel) {\n            _dragStartEvent = pref + down;\n            _dragMoveEvent = pref + move;\n            _dragEndEvent = pref + up;\n\n            if (cancel) {\n              _dragCancelEvent = pref + cancel;\n            } else {\n              _dragCancelEvent = '';\n            }\n          };\n\n          _pointerEventEnabled = _features.pointerEvent;\n\n          if (_pointerEventEnabled && _features.touch) {\n            // we don't need touch events, if browser supports pointer events\n            _features.touch = false;\n          }\n\n          if (_pointerEventEnabled) {\n            if (navigator.msPointerEnabled) {\n              // IE10 pointer events are case-sensitive\n              addEventNames('MSPointer', 'Down', 'Move', 'Up', 'Cancel');\n            } else {\n              addEventNames('pointer', 'down', 'move', 'up', 'cancel');\n            }\n          } else if (_features.touch) {\n            addEventNames('touch', 'start', 'move', 'end', 'cancel');\n            _likelyTouchDevice = true;\n          } else {\n            addEventNames('mouse', 'down', 'move', 'up');\n          }\n\n          _upMoveEvents = _dragMoveEvent + ' ' + _dragEndEvent + ' ' + _dragCancelEvent;\n          _downEvents = _dragStartEvent;\n\n          if (_pointerEventEnabled && !_likelyTouchDevice) {\n            _likelyTouchDevice = navigator.maxTouchPoints > 1 || navigator.msMaxTouchPoints > 1;\n          } // make variable public\n\n\n          self.likelyTouchDevice = _likelyTouchDevice;\n          _globalEventHandlers[_dragStartEvent] = _onDragStart;\n          _globalEventHandlers[_dragMoveEvent] = _onDragMove;\n          _globalEventHandlers[_dragEndEvent] = _onDragRelease; // the Kraken\n\n          if (_dragCancelEvent) {\n            _globalEventHandlers[_dragCancelEvent] = _globalEventHandlers[_dragEndEvent];\n          } // Bind mouse events on device with detected hardware touch support, in case it supports multiple types of input.\n\n\n          if (_features.touch) {\n            _downEvents += ' mousedown';\n            _upMoveEvents += ' mousemove mouseup';\n            _globalEventHandlers.mousedown = _globalEventHandlers[_dragStartEvent];\n            _globalEventHandlers.mousemove = _globalEventHandlers[_dragMoveEvent];\n            _globalEventHandlers.mouseup = _globalEventHandlers[_dragEndEvent];\n          }\n\n          if (!_likelyTouchDevice) {\n            // don't allow pan to next slide from zoomed state on Desktop\n            _options.allowPanToNext = false;\n          }\n        }\n      }\n    });\n    /*>>gestures*/\n\n    /*>>show-hide-transition*/\n\n    /**\r\n     * show-hide-transition.js:\r\n     *\r\n     * Manages initial opening or closing transition.\r\n     *\r\n     * If you're not planning to use transition for gallery at all,\r\n     * you may set options hideAnimationDuration and showAnimationDuration to 0,\r\n     * and just delete startAnimation function.\r\n     * \r\n     */\n\n\n    var _showOrHideTimeout,\n        _showOrHide = function _showOrHide(item, img, out, completeFn) {\n      if (_showOrHideTimeout) {\n        clearTimeout(_showOrHideTimeout);\n      }\n\n      _initialZoomRunning = true;\n      _initialContentSet = true; // dimensions of small thumbnail {x:,y:,w:}.\n      // Height is optional, as calculated based on large image.\n\n      var thumbBounds;\n\n      if (item.initialLayout) {\n        thumbBounds = item.initialLayout;\n        item.initialLayout = null;\n      } else {\n        thumbBounds = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\n      }\n\n      var duration = out ? _options.hideAnimationDuration : _options.showAnimationDuration;\n\n      var onComplete = function onComplete() {\n        _stopAnimation('initialZoom');\n\n        if (!out) {\n          _applyBgOpacity(1);\n\n          if (img) {\n            img.style.display = 'block';\n          }\n\n          framework.addClass(template, 'pswp--animated-in');\n\n          _shout('initialZoom' + (out ? 'OutEnd' : 'InEnd'));\n        } else {\n          self.template.removeAttribute('style');\n          self.bg.removeAttribute('style');\n        }\n\n        if (completeFn) {\n          completeFn();\n        }\n\n        _initialZoomRunning = false;\n      }; // if bounds aren't provided, just open gallery without animation\n\n\n      if (!duration || !thumbBounds || thumbBounds.x === undefined) {\n        _shout('initialZoom' + (out ? 'Out' : 'In'));\n\n        _currZoomLevel = item.initialZoomLevel;\n\n        _equalizePoints(_panOffset, item.initialPosition);\n\n        _applyCurrentZoomPan();\n\n        template.style.opacity = out ? 0 : 1;\n\n        _applyBgOpacity(1);\n\n        if (duration) {\n          setTimeout(function () {\n            onComplete();\n          }, duration);\n        } else {\n          onComplete();\n        }\n\n        return;\n      }\n\n      var startAnimation = function startAnimation() {\n        var closeWithRaf = _closedByScroll,\n            fadeEverything = !self.currItem.src || self.currItem.loadError || _options.showHideOpacity; // apply hw-acceleration to image\n\n        if (item.miniImg) {\n          item.miniImg.style.webkitBackfaceVisibility = 'hidden';\n        }\n\n        if (!out) {\n          _currZoomLevel = thumbBounds.w / item.w;\n          _panOffset.x = thumbBounds.x;\n          _panOffset.y = thumbBounds.y - _initalWindowScrollY;\n          self[fadeEverything ? 'template' : 'bg'].style.opacity = 0.001;\n\n          _applyCurrentZoomPan();\n        }\n\n        _registerStartAnimation('initialZoom');\n\n        if (out && !closeWithRaf) {\n          framework.removeClass(template, 'pswp--animated-in');\n        }\n\n        if (fadeEverything) {\n          if (out) {\n            framework[(closeWithRaf ? 'remove' : 'add') + 'Class'](template, 'pswp--animate_opacity');\n          } else {\n            setTimeout(function () {\n              framework.addClass(template, 'pswp--animate_opacity');\n            }, 30);\n          }\n        }\n\n        _showOrHideTimeout = setTimeout(function () {\n          _shout('initialZoom' + (out ? 'Out' : 'In'));\n\n          if (!out) {\n            // \"in\" animation always uses CSS transitions (instead of rAF).\n            // CSS transition work faster here, \n            // as developer may also want to animate other things, \n            // like ui on top of sliding area, which can be animated just via CSS\n            _currZoomLevel = item.initialZoomLevel;\n\n            _equalizePoints(_panOffset, item.initialPosition);\n\n            _applyCurrentZoomPan();\n\n            _applyBgOpacity(1);\n\n            if (fadeEverything) {\n              template.style.opacity = 1;\n            } else {\n              _applyBgOpacity(1);\n            }\n\n            _showOrHideTimeout = setTimeout(onComplete, duration + 20);\n          } else {\n            // \"out\" animation uses rAF only when PhotoSwipe is closed by browser scroll, to recalculate position\n            var destZoomLevel = thumbBounds.w / item.w,\n                initialPanOffset = {\n              x: _panOffset.x,\n              y: _panOffset.y\n            },\n                initialZoomLevel = _currZoomLevel,\n                initalBgOpacity = _bgOpacity,\n                onUpdate = function onUpdate(now) {\n              if (now === 1) {\n                _currZoomLevel = destZoomLevel;\n                _panOffset.x = thumbBounds.x;\n                _panOffset.y = thumbBounds.y - _currentWindowScrollY;\n              } else {\n                _currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\n                _panOffset.x = (thumbBounds.x - initialPanOffset.x) * now + initialPanOffset.x;\n                _panOffset.y = (thumbBounds.y - _currentWindowScrollY - initialPanOffset.y) * now + initialPanOffset.y;\n              }\n\n              _applyCurrentZoomPan();\n\n              if (fadeEverything) {\n                template.style.opacity = 1 - now;\n              } else {\n                _applyBgOpacity(initalBgOpacity - now * initalBgOpacity);\n              }\n            };\n\n            if (closeWithRaf) {\n              _animateProp('initialZoom', 0, 1, duration, framework.easing.cubic.out, onUpdate, onComplete);\n            } else {\n              onUpdate(1);\n              _showOrHideTimeout = setTimeout(onComplete, duration + 20);\n            }\n          }\n        }, out ? 25 : 90); // Main purpose of this delay is to give browser time to paint and\n        // create composite layers of PhotoSwipe UI parts (background, controls, caption, arrows).\n        // Which avoids lag at the beginning of scale transition.\n      };\n\n      startAnimation();\n    };\n    /*>>show-hide-transition*/\n\n    /*>>items-controller*/\n\n    /**\r\n    *\r\n    * Controller manages gallery items, their dimensions, and their content.\r\n    * \r\n    */\n\n\n    var _items,\n        _tempPanAreaSize = {},\n        _imagesToAppendPool = [],\n        _initialContentSet,\n        _initialZoomRunning,\n        _controllerDefaultOptions = {\n      index: 0,\n      errorMsg: '<div class=\"pswp__error-msg\"><a href=\"%url%\" target=\"_blank\">The image</a> could not be loaded.</div>',\n      forceProgressiveLoading: false,\n      // TODO\n      preload: [1, 1],\n      getNumItemsFn: function getNumItemsFn() {\n        return _items.length;\n      }\n    };\n\n    var _getItemAt,\n        _getNumItems,\n        _initialIsLoop,\n        _getZeroBounds = function _getZeroBounds() {\n      return {\n        center: {\n          x: 0,\n          y: 0\n        },\n        max: {\n          x: 0,\n          y: 0\n        },\n        min: {\n          x: 0,\n          y: 0\n        }\n      };\n    },\n        _calculateSingleItemPanBounds = function _calculateSingleItemPanBounds(item, realPanElementW, realPanElementH) {\n      var bounds = item.bounds; // position of element when it's centered\n\n      bounds.center.x = Math.round((_tempPanAreaSize.x - realPanElementW) / 2);\n      bounds.center.y = Math.round((_tempPanAreaSize.y - realPanElementH) / 2) + item.vGap.top; // maximum pan position\n\n      bounds.max.x = realPanElementW > _tempPanAreaSize.x ? Math.round(_tempPanAreaSize.x - realPanElementW) : bounds.center.x;\n      bounds.max.y = realPanElementH > _tempPanAreaSize.y ? Math.round(_tempPanAreaSize.y - realPanElementH) + item.vGap.top : bounds.center.y; // minimum pan position\n\n      bounds.min.x = realPanElementW > _tempPanAreaSize.x ? 0 : bounds.center.x;\n      bounds.min.y = realPanElementH > _tempPanAreaSize.y ? item.vGap.top : bounds.center.y;\n    },\n        _calculateItemSize = function _calculateItemSize(item, viewportSize, zoomLevel) {\n      if (item.src && !item.loadError) {\n        var isInitial = !zoomLevel;\n\n        if (isInitial) {\n          if (!item.vGap) {\n            item.vGap = {\n              top: 0,\n              bottom: 0\n            };\n          } // allows overriding vertical margin for individual items\n\n\n          _shout('parseVerticalMargin', item);\n        }\n\n        _tempPanAreaSize.x = viewportSize.x;\n        _tempPanAreaSize.y = viewportSize.y - item.vGap.top - item.vGap.bottom;\n\n        if (isInitial) {\n          var hRatio = _tempPanAreaSize.x / item.w;\n          var vRatio = _tempPanAreaSize.y / item.h;\n          item.fitRatio = hRatio < vRatio ? hRatio : vRatio; //item.fillRatio = hRatio > vRatio ? hRatio : vRatio;\n\n          var scaleMode = _options.scaleMode;\n\n          if (scaleMode === 'orig') {\n            zoomLevel = 1;\n          } else if (scaleMode === 'fit') {\n            zoomLevel = item.fitRatio;\n          }\n\n          if (zoomLevel > 1) {\n            zoomLevel = 1;\n          }\n\n          item.initialZoomLevel = zoomLevel;\n\n          if (!item.bounds) {\n            // reuse bounds object\n            item.bounds = _getZeroBounds();\n          }\n        }\n\n        if (!zoomLevel) {\n          return;\n        }\n\n        _calculateSingleItemPanBounds(item, item.w * zoomLevel, item.h * zoomLevel);\n\n        if (isInitial && zoomLevel === item.initialZoomLevel) {\n          item.initialPosition = item.bounds.center;\n        }\n\n        return item.bounds;\n      } else {\n        item.w = item.h = 0;\n        item.initialZoomLevel = item.fitRatio = 1;\n        item.bounds = _getZeroBounds();\n        item.initialPosition = item.bounds.center; // if it's not image, we return zero bounds (content is not zoomable)\n\n        return item.bounds;\n      }\n    },\n        _appendImage = function _appendImage(index, item, baseDiv, img, preventAnimation, keepPlaceholder) {\n      if (item.loadError) {\n        return;\n      }\n\n      if (img) {\n        item.imageAppended = true;\n\n        _setImageSize(item, img, item === self.currItem && _renderMaxResolution);\n\n        baseDiv.appendChild(img);\n\n        if (keepPlaceholder) {\n          setTimeout(function () {\n            if (item && item.loaded && item.placeholder) {\n              item.placeholder.style.display = 'none';\n              item.placeholder = null;\n            }\n          }, 500);\n        }\n      }\n    },\n        _preloadImage = function _preloadImage(item) {\n      item.loading = true;\n      item.loaded = false;\n      var img = item.img = framework.createEl('pswp__img', 'img');\n\n      var onComplete = function onComplete() {\n        item.loading = false;\n        item.loaded = true;\n\n        if (item.loadComplete) {\n          item.loadComplete(item);\n        } else {\n          item.img = null; // no need to store image object\n        }\n\n        img.onload = img.onerror = null;\n        img = null;\n      };\n\n      img.onload = onComplete;\n\n      img.onerror = function () {\n        item.loadError = true;\n        onComplete();\n      };\n\n      img.src = item.src; // + '?a=' + Math.random();\n\n      return img;\n    },\n        _checkForError = function _checkForError(item, cleanUp) {\n      if (item.src && item.loadError && item.container) {\n        if (cleanUp) {\n          item.container.innerHTML = '';\n        }\n\n        item.container.innerHTML = _options.errorMsg.replace('%url%', item.src);\n        return true;\n      }\n    },\n        _setImageSize = function _setImageSize(item, img, maxRes) {\n      if (!item.src) {\n        return;\n      }\n\n      if (!img) {\n        img = item.container.lastChild;\n      }\n\n      var w = maxRes ? item.w : Math.round(item.w * item.fitRatio),\n          h = maxRes ? item.h : Math.round(item.h * item.fitRatio);\n\n      if (item.placeholder && !item.loaded) {\n        item.placeholder.style.width = w + 'px';\n        item.placeholder.style.height = h + 'px';\n      }\n\n      img.style.width = w + 'px';\n      img.style.height = h + 'px';\n    },\n        _appendImagesPool = function _appendImagesPool() {\n      if (_imagesToAppendPool.length) {\n        var poolItem;\n\n        for (var i = 0; i < _imagesToAppendPool.length; i++) {\n          poolItem = _imagesToAppendPool[i];\n\n          if (poolItem.holder.index === poolItem.index) {\n            _appendImage(poolItem.index, poolItem.item, poolItem.baseDiv, poolItem.img, false, poolItem.clearPlaceholder);\n          }\n        }\n\n        _imagesToAppendPool = [];\n      }\n    };\n\n    _registerModule('Controller', {\n      publicMethods: {\n        lazyLoadItem: function lazyLoadItem(index) {\n          index = _getLoopedId(index);\n\n          var item = _getItemAt(index);\n\n          if (!item || (item.loaded || item.loading) && !_itemsNeedUpdate) {\n            return;\n          }\n\n          _shout('gettingData', index, item);\n\n          if (!item.src) {\n            return;\n          }\n\n          _preloadImage(item);\n        },\n        initController: function initController() {\n          framework.extend(_options, _controllerDefaultOptions, true);\n          self.items = _items = items;\n          _getItemAt = self.getItemAt;\n          _getNumItems = _options.getNumItemsFn; //self.getNumItems;\n\n          _initialIsLoop = _options.loop;\n\n          if (_getNumItems() < 3) {\n            _options.loop = false; // disable loop if less then 3 items\n          }\n\n          _listen('beforeChange', function (diff) {\n            var p = _options.preload,\n                isNext = diff === null ? true : diff >= 0,\n                preloadBefore = Math.min(p[0], _getNumItems()),\n                preloadAfter = Math.min(p[1], _getNumItems()),\n                i;\n\n            for (i = 1; i <= (isNext ? preloadAfter : preloadBefore); i++) {\n              self.lazyLoadItem(_currentItemIndex + i);\n            }\n\n            for (i = 1; i <= (isNext ? preloadBefore : preloadAfter); i++) {\n              self.lazyLoadItem(_currentItemIndex - i);\n            }\n          });\n\n          _listen('initialLayout', function () {\n            self.currItem.initialLayout = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\n          });\n\n          _listen('mainScrollAnimComplete', _appendImagesPool);\n\n          _listen('initialZoomInEnd', _appendImagesPool);\n\n          _listen('destroy', function () {\n            var item;\n\n            for (var i = 0; i < _items.length; i++) {\n              item = _items[i]; // remove reference to DOM elements, for GC\n\n              if (item.container) {\n                item.container = null;\n              }\n\n              if (item.placeholder) {\n                item.placeholder = null;\n              }\n\n              if (item.img) {\n                item.img = null;\n              }\n\n              if (item.preloader) {\n                item.preloader = null;\n              }\n\n              if (item.loadError) {\n                item.loaded = item.loadError = false;\n              }\n            }\n\n            _imagesToAppendPool = null;\n          });\n        },\n        getItemAt: function getItemAt(index) {\n          if (index >= 0) {\n            return _items[index] !== undefined ? _items[index] : false;\n          }\n\n          return false;\n        },\n        allowProgressiveImg: function allowProgressiveImg() {\n          // 1. Progressive image loading isn't working on webkit/blink \n          //    when hw-acceleration (e.g. translateZ) is applied to IMG element.\n          //    That's why in PhotoSwipe parent element gets zoom transform, not image itself.\n          //    \n          // 2. Progressive image loading sometimes blinks in webkit/blink when applying animation to parent element.\n          //    That's why it's disabled on touch devices (mainly because of swipe transition)\n          //    \n          // 3. Progressive image loading sometimes doesn't work in IE (up to 11).\n          // Don't allow progressive loading on non-large touch devices\n          return _options.forceProgressiveLoading || !_likelyTouchDevice || _options.mouseUsed || screen.width > 1200; // 1200 - to eliminate touch devices with large screen (like Chromebook Pixel)\n        },\n        setContent: function setContent(holder, index) {\n          if (_options.loop) {\n            index = _getLoopedId(index);\n          }\n\n          var prevItem = self.getItemAt(holder.index);\n\n          if (prevItem) {\n            prevItem.container = null;\n          }\n\n          var item = self.getItemAt(index),\n              img;\n\n          if (!item) {\n            holder.el.innerHTML = '';\n            return;\n          } // allow to override data\n\n\n          _shout('gettingData', index, item);\n\n          holder.index = index;\n          holder.item = item; // base container DIV is created only once for each of 3 holders\n\n          var baseDiv = item.container = framework.createEl('pswp__zoom-wrap');\n\n          if (!item.src && item.html) {\n            if (item.html.tagName) {\n              baseDiv.appendChild(item.html);\n            } else {\n              baseDiv.innerHTML = item.html;\n            }\n          }\n\n          _checkForError(item);\n\n          _calculateItemSize(item, _viewportSize);\n\n          if (item.src && !item.loadError && !item.loaded) {\n            item.loadComplete = function (item) {\n              // gallery closed before image finished loading\n              if (!_isOpen) {\n                return;\n              } // check if holder hasn't changed while image was loading\n\n\n              if (holder && holder.index === index) {\n                if (_checkForError(item, true)) {\n                  item.loadComplete = item.img = null;\n\n                  _calculateItemSize(item, _viewportSize);\n\n                  _applyZoomPanToItem(item);\n\n                  if (holder.index === _currentItemIndex) {\n                    // recalculate dimensions\n                    self.updateCurrZoomItem();\n                  }\n\n                  return;\n                }\n\n                if (!item.imageAppended) {\n                  if (_features.transform && (_mainScrollAnimating || _initialZoomRunning)) {\n                    _imagesToAppendPool.push({\n                      item: item,\n                      baseDiv: baseDiv,\n                      img: item.img,\n                      index: index,\n                      holder: holder,\n                      clearPlaceholder: true\n                    });\n                  } else {\n                    _appendImage(index, item, baseDiv, item.img, _mainScrollAnimating || _initialZoomRunning, true);\n                  }\n                } else {\n                  // remove preloader & mini-img\n                  if (!_initialZoomRunning && item.placeholder) {\n                    item.placeholder.style.display = 'none';\n                    item.placeholder = null;\n                  }\n                }\n              }\n\n              item.loadComplete = null;\n              item.img = null; // no need to store image element after it's added\n\n              _shout('imageLoadComplete', index, item);\n            };\n\n            if (framework.features.transform) {\n              var placeholderClassName = 'pswp__img pswp__img--placeholder';\n              placeholderClassName += item.msrc ? '' : ' pswp__img--placeholder--blank';\n              var placeholder = framework.createEl(placeholderClassName, item.msrc ? 'img' : '');\n\n              if (item.msrc) {\n                placeholder.src = item.msrc;\n              }\n\n              _setImageSize(item, placeholder);\n\n              baseDiv.appendChild(placeholder);\n              item.placeholder = placeholder;\n            }\n\n            if (!item.loading) {\n              _preloadImage(item);\n            }\n\n            if (self.allowProgressiveImg()) {\n              // just append image\n              if (!_initialContentSet && _features.transform) {\n                _imagesToAppendPool.push({\n                  item: item,\n                  baseDiv: baseDiv,\n                  img: item.img,\n                  index: index,\n                  holder: holder\n                });\n              } else {\n                _appendImage(index, item, baseDiv, item.img, true, true);\n              }\n            }\n          } else if (item.src && !item.loadError) {\n            // image object is created every time, due to bugs of image loading & delay when switching images\n            img = framework.createEl('pswp__img', 'img');\n            img.style.opacity = 1;\n            img.src = item.src;\n\n            _setImageSize(item, img);\n\n            _appendImage(index, item, baseDiv, img, true);\n          }\n\n          if (!_initialContentSet && index === _currentItemIndex) {\n            _currZoomElementStyle = baseDiv.style;\n\n            _showOrHide(item, img || item.img);\n          } else {\n            _applyZoomPanToItem(item);\n          }\n\n          holder.el.innerHTML = '';\n          holder.el.appendChild(baseDiv);\n        },\n        cleanSlide: function cleanSlide(item) {\n          if (item.img) {\n            item.img.onload = item.img.onerror = null;\n          }\n\n          item.loaded = item.loading = item.img = item.imageAppended = false;\n        }\n      }\n    });\n    /*>>items-controller*/\n\n    /*>>tap*/\n\n    /**\r\n     * tap.js:\r\n     *\r\n     * Displatches tap and double-tap events.\r\n     * \r\n     */\n\n\n    var tapTimer,\n        tapReleasePoint = {},\n        _dispatchTapEvent = function _dispatchTapEvent(origEvent, releasePoint, pointerType) {\n      var e = document.createEvent('CustomEvent'),\n          eDetail = {\n        origEvent: origEvent,\n        target: origEvent.target,\n        releasePoint: releasePoint,\n        pointerType: pointerType || 'touch'\n      };\n      e.initCustomEvent('pswpTap', true, true, eDetail);\n      origEvent.target.dispatchEvent(e);\n    };\n\n    _registerModule('Tap', {\n      publicMethods: {\n        initTap: function initTap() {\n          _listen('firstTouchStart', self.onTapStart);\n\n          _listen('touchRelease', self.onTapRelease);\n\n          _listen('destroy', function () {\n            tapReleasePoint = {};\n            tapTimer = null;\n          });\n        },\n        onTapStart: function onTapStart(touchList) {\n          if (touchList.length > 1) {\n            clearTimeout(tapTimer);\n            tapTimer = null;\n          }\n        },\n        onTapRelease: function onTapRelease(e, releasePoint) {\n          if (!releasePoint) {\n            return;\n          }\n\n          if (!_moved && !_isMultitouch && !_numAnimations) {\n            var p0 = releasePoint;\n\n            if (tapTimer) {\n              clearTimeout(tapTimer);\n              tapTimer = null; // Check if taped on the same place\n\n              if (_isNearbyPoints(p0, tapReleasePoint)) {\n                _shout('doubleTap', p0);\n\n                return;\n              }\n            }\n\n            if (releasePoint.type === 'mouse') {\n              _dispatchTapEvent(e, releasePoint, 'mouse');\n\n              return;\n            }\n\n            var clickedTagName = e.target.tagName.toUpperCase(); // avoid double tap delay on buttons and elements that have class pswp__single-tap\n\n            if (clickedTagName === 'BUTTON' || framework.hasClass(e.target, 'pswp__single-tap')) {\n              _dispatchTapEvent(e, releasePoint);\n\n              return;\n            }\n\n            _equalizePoints(tapReleasePoint, p0);\n\n            tapTimer = setTimeout(function () {\n              _dispatchTapEvent(e, releasePoint);\n\n              tapTimer = null;\n            }, 300);\n          }\n        }\n      }\n    });\n    /*>>tap*/\n\n    /*>>desktop-zoom*/\n\n    /**\r\n     *\r\n     * desktop-zoom.js:\r\n     *\r\n     * - Binds mousewheel event for paning zoomed image.\r\n     * - Manages \"dragging\", \"zoomed-in\", \"zoom-out\" classes.\r\n     *   (which are used for cursors and zoom icon)\r\n     * - Adds toggleDesktopZoom function.\r\n     * \r\n     */\n\n\n    var _wheelDelta;\n\n    _registerModule('DesktopZoom', {\n      publicMethods: {\n        initDesktopZoom: function initDesktopZoom() {\n          if (_oldIE) {\n            // no zoom for old IE (<=8)\n            return;\n          }\n\n          if (_likelyTouchDevice) {\n            // if detected hardware touch support, we wait until mouse is used,\n            // and only then apply desktop-zoom features\n            _listen('mouseUsed', function () {\n              self.setupDesktopZoom();\n            });\n          } else {\n            self.setupDesktopZoom(true);\n          }\n        },\n        setupDesktopZoom: function setupDesktopZoom(onInit) {\n          _wheelDelta = {};\n          var events = 'wheel mousewheel DOMMouseScroll';\n\n          _listen('bindEvents', function () {\n            framework.bind(template, events, self.handleMouseWheel);\n          });\n\n          _listen('unbindEvents', function () {\n            if (_wheelDelta) {\n              framework.unbind(template, events, self.handleMouseWheel);\n            }\n          });\n\n          self.mouseZoomedIn = false;\n\n          var hasDraggingClass,\n              updateZoomable = function updateZoomable() {\n            if (self.mouseZoomedIn) {\n              framework.removeClass(template, 'pswp--zoomed-in');\n              self.mouseZoomedIn = false;\n            }\n\n            if (_currZoomLevel < 1) {\n              framework.addClass(template, 'pswp--zoom-allowed');\n            } else {\n              framework.removeClass(template, 'pswp--zoom-allowed');\n            }\n\n            removeDraggingClass();\n          },\n              removeDraggingClass = function removeDraggingClass() {\n            if (hasDraggingClass) {\n              framework.removeClass(template, 'pswp--dragging');\n              hasDraggingClass = false;\n            }\n          };\n\n          _listen('resize', updateZoomable);\n\n          _listen('afterChange', updateZoomable);\n\n          _listen('pointerDown', function () {\n            if (self.mouseZoomedIn) {\n              hasDraggingClass = true;\n              framework.addClass(template, 'pswp--dragging');\n            }\n          });\n\n          _listen('pointerUp', removeDraggingClass);\n\n          if (!onInit) {\n            updateZoomable();\n          }\n        },\n        handleMouseWheel: function handleMouseWheel(e) {\n          if (_currZoomLevel <= self.currItem.fitRatio) {\n            if (_options.modal) {\n              if (!_options.closeOnScroll || _numAnimations || _isDragging) {\n                e.preventDefault();\n              } else if (_transformKey && Math.abs(e.deltaY) > 2) {\n                // close PhotoSwipe\n                // if browser supports transforms & scroll changed enough\n                _closedByScroll = true;\n                self.close();\n              }\n            }\n\n            return true;\n          } // allow just one event to fire\n\n\n          e.stopPropagation(); // https://developer.mozilla.org/en-US/docs/Web/Events/wheel\n\n          _wheelDelta.x = 0;\n\n          if ('deltaX' in e) {\n            if (e.deltaMode === 1\n            /* DOM_DELTA_LINE */\n            ) {\n                // 18 - average line height\n                _wheelDelta.x = e.deltaX * 18;\n                _wheelDelta.y = e.deltaY * 18;\n              } else {\n              _wheelDelta.x = e.deltaX;\n              _wheelDelta.y = e.deltaY;\n            }\n          } else if ('wheelDelta' in e) {\n            if (e.wheelDeltaX) {\n              _wheelDelta.x = -0.16 * e.wheelDeltaX;\n            }\n\n            if (e.wheelDeltaY) {\n              _wheelDelta.y = -0.16 * e.wheelDeltaY;\n            } else {\n              _wheelDelta.y = -0.16 * e.wheelDelta;\n            }\n          } else if ('detail' in e) {\n            _wheelDelta.y = e.detail;\n          } else {\n            return;\n          }\n\n          _calculatePanBounds(_currZoomLevel, true);\n\n          var newPanX = _panOffset.x - _wheelDelta.x,\n              newPanY = _panOffset.y - _wheelDelta.y; // only prevent scrolling in nonmodal mode when not at edges\n\n          if (_options.modal || newPanX <= _currPanBounds.min.x && newPanX >= _currPanBounds.max.x && newPanY <= _currPanBounds.min.y && newPanY >= _currPanBounds.max.y) {\n            e.preventDefault();\n          } // TODO: use rAF instead of mousewheel?\n\n\n          self.panTo(newPanX, newPanY);\n        },\n        toggleDesktopZoom: function toggleDesktopZoom(centerPoint) {\n          centerPoint = centerPoint || {\n            x: _viewportSize.x / 2 + _offset.x,\n            y: _viewportSize.y / 2 + _offset.y\n          };\n\n          var doubleTapZoomLevel = _options.getDoubleTapZoom(true, self.currItem);\n\n          var zoomOut = _currZoomLevel === doubleTapZoomLevel;\n          self.mouseZoomedIn = !zoomOut;\n          self.zoomTo(zoomOut ? self.currItem.initialZoomLevel : doubleTapZoomLevel, centerPoint, 333);\n          framework[(!zoomOut ? 'add' : 'remove') + 'Class'](template, 'pswp--zoomed-in');\n        }\n      }\n    });\n    /*>>desktop-zoom*/\n\n    /*>>history*/\n\n    /**\r\n     *\r\n     * history.js:\r\n     *\r\n     * - Back button to close gallery.\r\n     * \r\n     * - Unique URL for each slide: example.com/&pid=1&gid=3\r\n     *   (where PID is picture index, and GID and gallery index)\r\n     *   \r\n     * - Switch URL when slides change.\r\n     * \r\n     */\n\n\n    var _historyDefaultOptions = {\n      history: true,\n      galleryUID: 1\n    };\n\n    var _historyUpdateTimeout,\n        _hashChangeTimeout,\n        _hashAnimCheckTimeout,\n        _hashChangedByScript,\n        _hashChangedByHistory,\n        _hashReseted,\n        _initialHash,\n        _historyChanged,\n        _closedFromURL,\n        _urlChangedOnce,\n        _windowLoc,\n        _supportsPushState,\n        _getHash = function _getHash() {\n      return _windowLoc.hash.substring(1);\n    },\n        _cleanHistoryTimeouts = function _cleanHistoryTimeouts() {\n      if (_historyUpdateTimeout) {\n        clearTimeout(_historyUpdateTimeout);\n      }\n\n      if (_hashAnimCheckTimeout) {\n        clearTimeout(_hashAnimCheckTimeout);\n      }\n    },\n        // pid - Picture index\n    // gid - Gallery index\n    _parseItemIndexFromURL = function _parseItemIndexFromURL() {\n      var hash = _getHash(),\n          params = {};\n\n      if (hash.length < 5) {\n        // pid=1\n        return params;\n      }\n\n      var i,\n          vars = hash.split('&');\n\n      for (i = 0; i < vars.length; i++) {\n        if (!vars[i]) {\n          continue;\n        }\n\n        var pair = vars[i].split('=');\n\n        if (pair.length < 2) {\n          continue;\n        }\n\n        params[pair[0]] = pair[1];\n      }\n\n      if (_options.galleryPIDs) {\n        // detect custom pid in hash and search for it among the items collection\n        var searchfor = params.pid;\n        params.pid = 0; // if custom pid cannot be found, fallback to the first item\n\n        for (i = 0; i < _items.length; i++) {\n          if (_items[i].pid === searchfor) {\n            params.pid = i;\n            break;\n          }\n        }\n      } else {\n        params.pid = parseInt(params.pid, 10) - 1;\n      }\n\n      if (params.pid < 0) {\n        params.pid = 0;\n      }\n\n      return params;\n    },\n        _updateHash = function _updateHash() {\n      if (_hashAnimCheckTimeout) {\n        clearTimeout(_hashAnimCheckTimeout);\n      }\n\n      if (_numAnimations || _isDragging) {\n        // changing browser URL forces layout/paint in some browsers, which causes noticable lag during animation\n        // that's why we update hash only when no animations running\n        _hashAnimCheckTimeout = setTimeout(_updateHash, 500);\n        return;\n      }\n\n      if (_hashChangedByScript) {\n        clearTimeout(_hashChangeTimeout);\n      } else {\n        _hashChangedByScript = true;\n      }\n\n      var pid = _currentItemIndex + 1;\n\n      var item = _getItemAt(_currentItemIndex);\n\n      if (item.hasOwnProperty('pid')) {\n        // carry forward any custom pid assigned to the item\n        pid = item.pid;\n      }\n\n      var newHash = _initialHash + '&' + 'gid=' + _options.galleryUID + '&' + 'pid=' + pid;\n\n      if (!_historyChanged) {\n        if (_windowLoc.hash.indexOf(newHash) === -1) {\n          _urlChangedOnce = true;\n        } // first time - add new hisory record, then just replace\n\n      }\n\n      var newURL = _windowLoc.href.split('#')[0] + '#' + newHash;\n\n      if (_supportsPushState) {\n        if ('#' + newHash !== window.location.hash) {\n          history[_historyChanged ? 'replaceState' : 'pushState']('', document.title, newURL);\n        }\n      } else {\n        if (_historyChanged) {\n          _windowLoc.replace(newURL);\n        } else {\n          _windowLoc.hash = newHash;\n        }\n      }\n\n      _historyChanged = true;\n      _hashChangeTimeout = setTimeout(function () {\n        _hashChangedByScript = false;\n      }, 60);\n    };\n\n    _registerModule('History', {\n      publicMethods: {\n        initHistory: function initHistory() {\n          framework.extend(_options, _historyDefaultOptions, true);\n\n          if (!_options.history) {\n            return;\n          }\n\n          _windowLoc = window.location;\n          _urlChangedOnce = false;\n          _closedFromURL = false;\n          _historyChanged = false;\n          _initialHash = _getHash();\n          _supportsPushState = 'pushState' in history;\n\n          if (_initialHash.indexOf('gid=') > -1) {\n            _initialHash = _initialHash.split('&gid=')[0];\n            _initialHash = _initialHash.split('?gid=')[0];\n          }\n\n          _listen('afterChange', self.updateURL);\n\n          _listen('unbindEvents', function () {\n            framework.unbind(window, 'hashchange', self.onHashChange);\n          });\n\n          var returnToOriginal = function returnToOriginal() {\n            _hashReseted = true;\n\n            if (!_closedFromURL) {\n              if (_urlChangedOnce) {\n                history.back();\n              } else {\n                if (_initialHash) {\n                  _windowLoc.hash = _initialHash;\n                } else {\n                  if (_supportsPushState) {\n                    // remove hash from url without refreshing it or scrolling to top\n                    history.pushState('', document.title, _windowLoc.pathname + _windowLoc.search);\n                  } else {\n                    _windowLoc.hash = '';\n                  }\n                }\n              }\n            }\n\n            _cleanHistoryTimeouts();\n          };\n\n          _listen('unbindEvents', function () {\n            if (_closedByScroll) {\n              // if PhotoSwipe is closed by scroll, we go \"back\" before the closing animation starts\n              // this is done to keep the scroll position\n              returnToOriginal();\n            }\n          });\n\n          _listen('destroy', function () {\n            if (!_hashReseted) {\n              returnToOriginal();\n            }\n          });\n\n          _listen('firstUpdate', function () {\n            _currentItemIndex = _parseItemIndexFromURL().pid;\n          });\n\n          var index = _initialHash.indexOf('pid=');\n\n          if (index > -1) {\n            _initialHash = _initialHash.substring(0, index);\n\n            if (_initialHash.slice(-1) === '&') {\n              _initialHash = _initialHash.slice(0, -1);\n            }\n          }\n\n          setTimeout(function () {\n            if (_isOpen) {\n              // hasn't destroyed yet\n              framework.bind(window, 'hashchange', self.onHashChange);\n            }\n          }, 40);\n        },\n        onHashChange: function onHashChange() {\n          if (_getHash() === _initialHash) {\n            _closedFromURL = true;\n            self.close();\n            return;\n          }\n\n          if (!_hashChangedByScript) {\n            _hashChangedByHistory = true;\n            self.goTo(_parseItemIndexFromURL().pid);\n            _hashChangedByHistory = false;\n          }\n        },\n        updateURL: function updateURL() {\n          // Delay the update of URL, to avoid lag during transition, \n          // and to not to trigger actions like \"refresh page sound\" or \"blinking favicon\" to often\n          _cleanHistoryTimeouts();\n\n          if (_hashChangedByHistory) {\n            return;\n          }\n\n          if (!_historyChanged) {\n            _updateHash(); // first time\n\n          } else {\n            _historyUpdateTimeout = setTimeout(_updateHash, 800);\n          }\n        }\n      }\n    });\n    /*>>history*/\n\n\n    framework.extend(self, publicMethods);\n  };\n\n  return PhotoSwipe;\n});"},711:function(n,e,t){t(9)(t(712))},712:function(n,e){n.exports="function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*! PhotoSwipe Default UI - 4.1.3 - 2019-01-08\r\n* http://photoswipe.com\r\n* Copyright (c) 2019 Dmitry Semenov; */\n\n/**\r\n*\r\n* UI on top of main sliding area (caption, arrows, close button, etc.).\r\n* Built just using public methods/properties of PhotoSwipe.\r\n* \r\n*/\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(factory);\n  } else if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === 'object') {\n    module.exports = factory();\n  } else {\n    root.PhotoSwipeUI_Default = factory();\n  }\n})(this, function () {\n  'use strict';\n\n  var PhotoSwipeUI_Default = function PhotoSwipeUI_Default(pswp, framework) {\n    var ui = this;\n\n    var _overlayUIUpdated = false,\n        _controlsVisible = true,\n        _fullscrenAPI,\n        _controls,\n        _captionContainer,\n        _fakeCaptionContainer,\n        _indexIndicator,\n        _shareButton,\n        _shareModal,\n        _shareModalHidden = true,\n        _initalCloseOnScrollValue,\n        _isIdle,\n        _listen,\n        _loadingIndicator,\n        _loadingIndicatorHidden,\n        _loadingIndicatorTimeout,\n        _galleryHasOneSlide,\n        _options,\n        _defaultUIOptions = {\n      barsSize: {\n        top: 44,\n        bottom: 'auto'\n      },\n      closeElClasses: ['item', 'caption', 'zoom-wrap', 'ui', 'top-bar'],\n      timeToIdle: 4000,\n      timeToIdleOutside: 1000,\n      loadingIndicatorDelay: 1000,\n      // 2s\n      addCaptionHTMLFn: function addCaptionHTMLFn(item, captionEl\n      /*, isFake */\n      ) {\n        if (!item.title) {\n          captionEl.children[0].innerHTML = '';\n          return false;\n        }\n\n        captionEl.children[0].innerHTML = item.title;\n        return true;\n      },\n      closeEl: true,\n      captionEl: true,\n      fullscreenEl: true,\n      zoomEl: true,\n      shareEl: true,\n      counterEl: true,\n      arrowEl: true,\n      preloaderEl: true,\n      tapToClose: false,\n      tapToToggleControls: true,\n      clickToCloseNonZoomable: true,\n      shareButtons: [{\n        id: 'facebook',\n        label: 'Share on Facebook',\n        url: 'https://www.facebook.com/sharer/sharer.php?u={{url}}'\n      }, {\n        id: 'twitter',\n        label: 'Tweet',\n        url: 'https://twitter.com/intent/tweet?text={{text}}&url={{url}}'\n      }, {\n        id: 'pinterest',\n        label: 'Pin it',\n        url: 'http://www.pinterest.com/pin/create/button/' + '?url={{url}}&media={{image_url}}&description={{text}}'\n      }, {\n        id: 'download',\n        label: 'Download image',\n        url: '{{raw_image_url}}',\n        download: true\n      }],\n      getImageURLForShare: function getImageURLForShare()\n      /* shareButtonData */\n      {\n        return pswp.currItem.src || '';\n      },\n      getPageURLForShare: function getPageURLForShare()\n      /* shareButtonData */\n      {\n        return window.location.href;\n      },\n      getTextForShare: function getTextForShare()\n      /* shareButtonData */\n      {\n        return pswp.currItem.title || '';\n      },\n      indexIndicatorSep: ' / ',\n      fitControlsWidth: 1200\n    },\n        _blockControlsTap,\n        _blockControlsTapTimeout;\n\n    var _onControlsTap = function _onControlsTap(e) {\n      if (_blockControlsTap) {\n        return true;\n      }\n\n      e = e || window.event;\n\n      if (_options.timeToIdle && _options.mouseUsed && !_isIdle) {\n        // reset idle timer\n        _onIdleMouseMove();\n      }\n\n      var target = e.target || e.srcElement,\n          uiElement,\n          clickedClass = target.getAttribute('class') || '',\n          found;\n\n      for (var i = 0; i < _uiElements.length; i++) {\n        uiElement = _uiElements[i];\n\n        if (uiElement.onTap && clickedClass.indexOf('pswp__' + uiElement.name) > -1) {\n          uiElement.onTap();\n          found = true;\n        }\n      }\n\n      if (found) {\n        if (e.stopPropagation) {\n          e.stopPropagation();\n        }\n\n        _blockControlsTap = true; // Some versions of Android don't prevent ghost click event \n        // when preventDefault() was called on touchstart and/or touchend.\n        // \n        // This happens on v4.3, 4.2, 4.1, \n        // older versions strangely work correctly, \n        // but just in case we add delay on all of them)\t\n\n        var tapDelay = framework.features.isOldAndroid ? 600 : 30;\n        _blockControlsTapTimeout = setTimeout(function () {\n          _blockControlsTap = false;\n        }, tapDelay);\n      }\n    },\n        _fitControlsInViewport = function _fitControlsInViewport() {\n      return !pswp.likelyTouchDevice || _options.mouseUsed || screen.width > _options.fitControlsWidth;\n    },\n        _togglePswpClass = function _togglePswpClass(el, cName, add) {\n      framework[(add ? 'add' : 'remove') + 'Class'](el, 'pswp__' + cName);\n    },\n        // add class when there is just one item in the gallery\n    // (by default it hides left/right arrows and 1ofX counter)\n    _countNumItems = function _countNumItems() {\n      var hasOneSlide = _options.getNumItemsFn() === 1;\n\n      if (hasOneSlide !== _galleryHasOneSlide) {\n        _togglePswpClass(_controls, 'ui--one-slide', hasOneSlide);\n\n        _galleryHasOneSlide = hasOneSlide;\n      }\n    },\n        _toggleShareModalClass = function _toggleShareModalClass() {\n      _togglePswpClass(_shareModal, 'share-modal--hidden', _shareModalHidden);\n    },\n        _toggleShareModal = function _toggleShareModal() {\n      _shareModalHidden = !_shareModalHidden;\n\n      if (!_shareModalHidden) {\n        _toggleShareModalClass();\n\n        setTimeout(function () {\n          if (!_shareModalHidden) {\n            framework.addClass(_shareModal, 'pswp__share-modal--fade-in');\n          }\n        }, 30);\n      } else {\n        framework.removeClass(_shareModal, 'pswp__share-modal--fade-in');\n        setTimeout(function () {\n          if (_shareModalHidden) {\n            _toggleShareModalClass();\n          }\n        }, 300);\n      }\n\n      if (!_shareModalHidden) {\n        _updateShareURLs();\n      }\n\n      return false;\n    },\n        _openWindowPopup = function _openWindowPopup(e) {\n      e = e || window.event;\n      var target = e.target || e.srcElement;\n      pswp.shout('shareLinkClick', e, target);\n\n      if (!target.href) {\n        return false;\n      }\n\n      if (target.hasAttribute('download')) {\n        return true;\n      }\n\n      window.open(target.href, 'pswp_share', 'scrollbars=yes,resizable=yes,toolbar=no,' + 'location=yes,width=550,height=420,top=100,left=' + (window.screen ? Math.round(screen.width / 2 - 275) : 100));\n\n      if (!_shareModalHidden) {\n        _toggleShareModal();\n      }\n\n      return false;\n    },\n        _updateShareURLs = function _updateShareURLs() {\n      var shareButtonOut = '',\n          shareButtonData,\n          shareURL,\n          image_url,\n          page_url,\n          share_text;\n\n      for (var i = 0; i < _options.shareButtons.length; i++) {\n        shareButtonData = _options.shareButtons[i];\n        image_url = _options.getImageURLForShare(shareButtonData);\n        page_url = _options.getPageURLForShare(shareButtonData);\n        share_text = _options.getTextForShare(shareButtonData);\n        shareURL = shareButtonData.url.replace('{{url}}', encodeURIComponent(page_url)).replace('{{image_url}}', encodeURIComponent(image_url)).replace('{{raw_image_url}}', image_url).replace('{{text}}', encodeURIComponent(share_text));\n        shareButtonOut += '<a href=\"' + shareURL + '\" target=\"_blank\" ' + 'class=\"pswp__share--' + shareButtonData.id + '\"' + (shareButtonData.download ? 'download' : '') + '>' + shareButtonData.label + '</a>';\n\n        if (_options.parseShareButtonOut) {\n          shareButtonOut = _options.parseShareButtonOut(shareButtonData, shareButtonOut);\n        }\n      }\n\n      _shareModal.children[0].innerHTML = shareButtonOut;\n      _shareModal.children[0].onclick = _openWindowPopup;\n    },\n        _hasCloseClass = function _hasCloseClass(target) {\n      for (var i = 0; i < _options.closeElClasses.length; i++) {\n        if (framework.hasClass(target, 'pswp__' + _options.closeElClasses[i])) {\n          return true;\n        }\n      }\n    },\n        _idleInterval,\n        _idleTimer,\n        _idleIncrement = 0,\n        _onIdleMouseMove = function _onIdleMouseMove() {\n      clearTimeout(_idleTimer);\n      _idleIncrement = 0;\n\n      if (_isIdle) {\n        ui.setIdle(false);\n      }\n    },\n        _onMouseLeaveWindow = function _onMouseLeaveWindow(e) {\n      e = e ? e : window.event;\n      var from = e.relatedTarget || e.toElement;\n\n      if (!from || from.nodeName === 'HTML') {\n        clearTimeout(_idleTimer);\n        _idleTimer = setTimeout(function () {\n          ui.setIdle(true);\n        }, _options.timeToIdleOutside);\n      }\n    },\n        _setupFullscreenAPI = function _setupFullscreenAPI() {\n      if (_options.fullscreenEl && !framework.features.isOldAndroid) {\n        if (!_fullscrenAPI) {\n          _fullscrenAPI = ui.getFullscreenAPI();\n        }\n\n        if (_fullscrenAPI) {\n          framework.bind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\n          ui.updateFullscreen();\n          framework.addClass(pswp.template, 'pswp--supports-fs');\n        } else {\n          framework.removeClass(pswp.template, 'pswp--supports-fs');\n        }\n      }\n    },\n        _setupLoadingIndicator = function _setupLoadingIndicator() {\n      // Setup loading indicator\n      if (_options.preloaderEl) {\n        _toggleLoadingIndicator(true);\n\n        _listen('beforeChange', function () {\n          clearTimeout(_loadingIndicatorTimeout); // display loading indicator with delay\n\n          _loadingIndicatorTimeout = setTimeout(function () {\n            if (pswp.currItem && pswp.currItem.loading) {\n              if (!pswp.allowProgressiveImg() || pswp.currItem.img && !pswp.currItem.img.naturalWidth) {\n                // show preloader if progressive loading is not enabled, \n                // or image width is not defined yet (because of slow connection)\n                _toggleLoadingIndicator(false); // items-controller.js function allowProgressiveImg\n\n              }\n            } else {\n              _toggleLoadingIndicator(true); // hide preloader\n\n            }\n          }, _options.loadingIndicatorDelay);\n        });\n\n        _listen('imageLoadComplete', function (index, item) {\n          if (pswp.currItem === item) {\n            _toggleLoadingIndicator(true);\n          }\n        });\n      }\n    },\n        _toggleLoadingIndicator = function _toggleLoadingIndicator(hide) {\n      if (_loadingIndicatorHidden !== hide) {\n        _togglePswpClass(_loadingIndicator, 'preloader--active', !hide);\n\n        _loadingIndicatorHidden = hide;\n      }\n    },\n        _applyNavBarGaps = function _applyNavBarGaps(item) {\n      var gap = item.vGap;\n\n      if (_fitControlsInViewport()) {\n        var bars = _options.barsSize;\n\n        if (_options.captionEl && bars.bottom === 'auto') {\n          if (!_fakeCaptionContainer) {\n            _fakeCaptionContainer = framework.createEl('pswp__caption pswp__caption--fake');\n\n            _fakeCaptionContainer.appendChild(framework.createEl('pswp__caption__center'));\n\n            _controls.insertBefore(_fakeCaptionContainer, _captionContainer);\n\n            framework.addClass(_controls, 'pswp__ui--fit');\n          }\n\n          if (_options.addCaptionHTMLFn(item, _fakeCaptionContainer, true)) {\n            var captionSize = _fakeCaptionContainer.clientHeight;\n            gap.bottom = parseInt(captionSize, 10) || 44;\n          } else {\n            gap.bottom = bars.top; // if no caption, set size of bottom gap to size of top\n          }\n        } else {\n          gap.bottom = bars.bottom === 'auto' ? 0 : bars.bottom;\n        } // height of top bar is static, no need to calculate it\n\n\n        gap.top = bars.top;\n      } else {\n        gap.top = gap.bottom = 0;\n      }\n    },\n        _setupIdle = function _setupIdle() {\n      // Hide controls when mouse is used\n      if (_options.timeToIdle) {\n        _listen('mouseUsed', function () {\n          framework.bind(document, 'mousemove', _onIdleMouseMove);\n          framework.bind(document, 'mouseout', _onMouseLeaveWindow);\n          _idleInterval = setInterval(function () {\n            _idleIncrement++;\n\n            if (_idleIncrement === 2) {\n              ui.setIdle(true);\n            }\n          }, _options.timeToIdle / 2);\n        });\n      }\n    },\n        _setupHidingControlsDuringGestures = function _setupHidingControlsDuringGestures() {\n      // Hide controls on vertical drag\n      _listen('onVerticalDrag', function (now) {\n        if (_controlsVisible && now < 0.95) {\n          ui.hideControls();\n        } else if (!_controlsVisible && now >= 0.95) {\n          ui.showControls();\n        }\n      }); // Hide controls when pinching to close\n\n\n      var pinchControlsHidden;\n\n      _listen('onPinchClose', function (now) {\n        if (_controlsVisible && now < 0.9) {\n          ui.hideControls();\n          pinchControlsHidden = true;\n        } else if (pinchControlsHidden && !_controlsVisible && now > 0.9) {\n          ui.showControls();\n        }\n      });\n\n      _listen('zoomGestureEnded', function () {\n        pinchControlsHidden = false;\n\n        if (pinchControlsHidden && !_controlsVisible) {\n          ui.showControls();\n        }\n      });\n    };\n\n    var _uiElements = [{\n      name: 'caption',\n      option: 'captionEl',\n      onInit: function onInit(el) {\n        _captionContainer = el;\n      }\n    }, {\n      name: 'share-modal',\n      option: 'shareEl',\n      onInit: function onInit(el) {\n        _shareModal = el;\n      },\n      onTap: function onTap() {\n        _toggleShareModal();\n      }\n    }, {\n      name: 'button--share',\n      option: 'shareEl',\n      onInit: function onInit(el) {\n        _shareButton = el;\n      },\n      onTap: function onTap() {\n        _toggleShareModal();\n      }\n    }, {\n      name: 'button--zoom',\n      option: 'zoomEl',\n      onTap: pswp.toggleDesktopZoom\n    }, {\n      name: 'counter',\n      option: 'counterEl',\n      onInit: function onInit(el) {\n        _indexIndicator = el;\n      }\n    }, {\n      name: 'button--close',\n      option: 'closeEl',\n      onTap: pswp.close\n    }, {\n      name: 'button--arrow--left',\n      option: 'arrowEl',\n      onTap: pswp.prev\n    }, {\n      name: 'button--arrow--right',\n      option: 'arrowEl',\n      onTap: pswp.next\n    }, {\n      name: 'button--fs',\n      option: 'fullscreenEl',\n      onTap: function onTap() {\n        if (_fullscrenAPI.isFullscreen()) {\n          _fullscrenAPI.exit();\n        } else {\n          _fullscrenAPI.enter();\n        }\n      }\n    }, {\n      name: 'preloader',\n      option: 'preloaderEl',\n      onInit: function onInit(el) {\n        _loadingIndicator = el;\n      }\n    }];\n\n    var _setupUIElements = function _setupUIElements() {\n      var item, classAttr, uiElement;\n\n      var loopThroughChildElements = function loopThroughChildElements(sChildren) {\n        if (!sChildren) {\n          return;\n        }\n\n        var l = sChildren.length;\n\n        for (var i = 0; i < l; i++) {\n          item = sChildren[i];\n          classAttr = item.className;\n\n          for (var a = 0; a < _uiElements.length; a++) {\n            uiElement = _uiElements[a];\n\n            if (classAttr.indexOf('pswp__' + uiElement.name) > -1) {\n              if (_options[uiElement.option]) {\n                // if element is not disabled from options\n                framework.removeClass(item, 'pswp__element--disabled');\n\n                if (uiElement.onInit) {\n                  uiElement.onInit(item);\n                } //item.style.display = 'block';\n\n              } else {\n                framework.addClass(item, 'pswp__element--disabled'); //item.style.display = 'none';\n              }\n            }\n          }\n        }\n      };\n\n      loopThroughChildElements(_controls.children);\n      var topBar = framework.getChildByClass(_controls, 'pswp__top-bar');\n\n      if (topBar) {\n        loopThroughChildElements(topBar.children);\n      }\n    };\n\n    ui.init = function () {\n      // extend options\n      framework.extend(pswp.options, _defaultUIOptions, true); // create local link for fast access\n\n      _options = pswp.options; // find pswp__ui element\n\n      _controls = framework.getChildByClass(pswp.scrollWrap, 'pswp__ui'); // create local link\n\n      _listen = pswp.listen;\n\n      _setupHidingControlsDuringGestures(); // update controls when slides change\n\n\n      _listen('beforeChange', ui.update); // toggle zoom on double-tap\n\n\n      _listen('doubleTap', function (point) {\n        var initialZoomLevel = pswp.currItem.initialZoomLevel;\n\n        if (pswp.getZoomLevel() !== initialZoomLevel) {\n          pswp.zoomTo(initialZoomLevel, point, 333);\n        } else {\n          pswp.zoomTo(_options.getDoubleTapZoom(false, pswp.currItem), point, 333);\n        }\n      }); // Allow text selection in caption\n\n\n      _listen('preventDragEvent', function (e, isDown, preventObj) {\n        var t = e.target || e.srcElement;\n\n        if (t && t.getAttribute('class') && e.type.indexOf('mouse') > -1 && (t.getAttribute('class').indexOf('__caption') > 0 || /(SMALL|STRONG|EM)/i.test(t.tagName))) {\n          preventObj.prevent = false;\n        }\n      }); // bind events for UI\n\n\n      _listen('bindEvents', function () {\n        framework.bind(_controls, 'pswpTap click', _onControlsTap);\n        framework.bind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\n\n        if (!pswp.likelyTouchDevice) {\n          framework.bind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\n        }\n      }); // unbind events for UI\n\n\n      _listen('unbindEvents', function () {\n        if (!_shareModalHidden) {\n          _toggleShareModal();\n        }\n\n        if (_idleInterval) {\n          clearInterval(_idleInterval);\n        }\n\n        framework.unbind(document, 'mouseout', _onMouseLeaveWindow);\n        framework.unbind(document, 'mousemove', _onIdleMouseMove);\n        framework.unbind(_controls, 'pswpTap click', _onControlsTap);\n        framework.unbind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\n        framework.unbind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\n\n        if (_fullscrenAPI) {\n          framework.unbind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\n\n          if (_fullscrenAPI.isFullscreen()) {\n            _options.hideAnimationDuration = 0;\n\n            _fullscrenAPI.exit();\n          }\n\n          _fullscrenAPI = null;\n        }\n      }); // clean up things when gallery is destroyed\n\n\n      _listen('destroy', function () {\n        if (_options.captionEl) {\n          if (_fakeCaptionContainer) {\n            _controls.removeChild(_fakeCaptionContainer);\n          }\n\n          framework.removeClass(_captionContainer, 'pswp__caption--empty');\n        }\n\n        if (_shareModal) {\n          _shareModal.children[0].onclick = null;\n        }\n\n        framework.removeClass(_controls, 'pswp__ui--over-close');\n        framework.addClass(_controls, 'pswp__ui--hidden');\n        ui.setIdle(false);\n      });\n\n      if (!_options.showAnimationDuration) {\n        framework.removeClass(_controls, 'pswp__ui--hidden');\n      }\n\n      _listen('initialZoomIn', function () {\n        if (_options.showAnimationDuration) {\n          framework.removeClass(_controls, 'pswp__ui--hidden');\n        }\n      });\n\n      _listen('initialZoomOut', function () {\n        framework.addClass(_controls, 'pswp__ui--hidden');\n      });\n\n      _listen('parseVerticalMargin', _applyNavBarGaps);\n\n      _setupUIElements();\n\n      if (_options.shareEl && _shareButton && _shareModal) {\n        _shareModalHidden = true;\n      }\n\n      _countNumItems();\n\n      _setupIdle();\n\n      _setupFullscreenAPI();\n\n      _setupLoadingIndicator();\n    };\n\n    ui.setIdle = function (isIdle) {\n      _isIdle = isIdle;\n\n      _togglePswpClass(_controls, 'ui--idle', isIdle);\n    };\n\n    ui.update = function () {\n      // Don't update UI if it's hidden\n      if (_controlsVisible && pswp.currItem) {\n        ui.updateIndexIndicator();\n\n        if (_options.captionEl) {\n          _options.addCaptionHTMLFn(pswp.currItem, _captionContainer);\n\n          _togglePswpClass(_captionContainer, 'caption--empty', !pswp.currItem.title);\n        }\n\n        _overlayUIUpdated = true;\n      } else {\n        _overlayUIUpdated = false;\n      }\n\n      if (!_shareModalHidden) {\n        _toggleShareModal();\n      }\n\n      _countNumItems();\n    };\n\n    ui.updateFullscreen = function (e) {\n      if (e) {\n        // some browsers change window scroll position during the fullscreen\n        // so PhotoSwipe updates it just in case\n        setTimeout(function () {\n          pswp.setScrollOffset(0, framework.getScrollY());\n        }, 50);\n      } // toogle pswp--fs class on root element\n\n\n      framework[(_fullscrenAPI.isFullscreen() ? 'add' : 'remove') + 'Class'](pswp.template, 'pswp--fs');\n    };\n\n    ui.updateIndexIndicator = function () {\n      if (_options.counterEl) {\n        _indexIndicator.innerHTML = pswp.getCurrentIndex() + 1 + _options.indexIndicatorSep + _options.getNumItemsFn();\n      }\n    };\n\n    ui.onGlobalTap = function (e) {\n      e = e || window.event;\n      var target = e.target || e.srcElement;\n\n      if (_blockControlsTap) {\n        return;\n      }\n\n      if (e.detail && e.detail.pointerType === 'mouse') {\n        // close gallery if clicked outside of the image\n        if (_hasCloseClass(target)) {\n          pswp.close();\n          return;\n        }\n\n        if (framework.hasClass(target, 'pswp__img')) {\n          if (pswp.getZoomLevel() === 1 && pswp.getZoomLevel() <= pswp.currItem.fitRatio) {\n            if (_options.clickToCloseNonZoomable) {\n              pswp.close();\n            }\n          } else {\n            pswp.toggleDesktopZoom(e.detail.releasePoint);\n          }\n        }\n      } else {\n        // tap anywhere (except buttons) to toggle visibility of controls\n        if (_options.tapToToggleControls) {\n          if (_controlsVisible) {\n            ui.hideControls();\n          } else {\n            ui.showControls();\n          }\n        } // tap to close gallery\n\n\n        if (_options.tapToClose && (framework.hasClass(target, 'pswp__img') || _hasCloseClass(target))) {\n          pswp.close();\n          return;\n        }\n      }\n    };\n\n    ui.onMouseOver = function (e) {\n      e = e || window.event;\n      var target = e.target || e.srcElement; // add class when mouse is over an element that should close the gallery\n\n      _togglePswpClass(_controls, 'ui--over-close', _hasCloseClass(target));\n    };\n\n    ui.hideControls = function () {\n      framework.addClass(_controls, 'pswp__ui--hidden');\n      _controlsVisible = false;\n    };\n\n    ui.showControls = function () {\n      _controlsVisible = true;\n\n      if (!_overlayUIUpdated) {\n        ui.update();\n      }\n\n      framework.removeClass(_controls, 'pswp__ui--hidden');\n    };\n\n    ui.supportsFullscreen = function () {\n      var d = document;\n      return !!(d.exitFullscreen || d.mozCancelFullScreen || d.webkitExitFullscreen || d.msExitFullscreen);\n    };\n\n    ui.getFullscreenAPI = function () {\n      var dE = document.documentElement,\n          api,\n          tF = 'fullscreenchange';\n\n      if (dE.requestFullscreen) {\n        api = {\n          enterK: 'requestFullscreen',\n          exitK: 'exitFullscreen',\n          elementK: 'fullscreenElement',\n          eventK: tF\n        };\n      } else if (dE.mozRequestFullScreen) {\n        api = {\n          enterK: 'mozRequestFullScreen',\n          exitK: 'mozCancelFullScreen',\n          elementK: 'mozFullScreenElement',\n          eventK: 'moz' + tF\n        };\n      } else if (dE.webkitRequestFullscreen) {\n        api = {\n          enterK: 'webkitRequestFullscreen',\n          exitK: 'webkitExitFullscreen',\n          elementK: 'webkitFullscreenElement',\n          eventK: 'webkit' + tF\n        };\n      } else if (dE.msRequestFullscreen) {\n        api = {\n          enterK: 'msRequestFullscreen',\n          exitK: 'msExitFullscreen',\n          elementK: 'msFullscreenElement',\n          eventK: 'MSFullscreenChange'\n        };\n      }\n\n      if (api) {\n        api.enter = function () {\n          // disable close-on-scroll in fullscreen\n          _initalCloseOnScrollValue = _options.closeOnScroll;\n          _options.closeOnScroll = false;\n\n          if (this.enterK === 'webkitRequestFullscreen') {\n            pswp.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT);\n          } else {\n            return pswp.template[this.enterK]();\n          }\n        };\n\n        api.exit = function () {\n          _options.closeOnScroll = _initalCloseOnScrollValue;\n          return document[this.exitK]();\n        };\n\n        api.isFullscreen = function () {\n          return document[this.elementK];\n        };\n      }\n\n      return api;\n    };\n  };\n\n  return PhotoSwipeUI_Default;\n});"},713:function(n,e,t){var a=t(155);t(39),t(3).run(["$http","$compile","$rootScope","adsSlotReady",function(n,i,o,e){var t=a.parse(location.href,!0),r=t.path.split("/"),s=r.pop();r.push("xodpqbox"),r.push(s),t.pathname=r.join("/").split("?")[0].split("#")[0],delete t.path,delete t.query,delete t.search;t=t.format();location.href.match(/\/xodpqbox\//i)||n.get(t).then(function(n){var t=document.createElement("div");function e(n){var e=$(t).find("#".concat(n));$("[data-".concat(n,"]")).replaceWith(i(e)(o.$new()))}t.innerHTML=n.data,(t=$(t)).find("script").remove(),e("moi-nhat"),e("dang-quan-tam")}).finally(function(){e.resolve()})}])},714:function(n,e,t){t(3).directive("boxDangQuanTam",["$http","config","$rootScope",function(i,o,n){return{restrict:"EA",transclude:!0,replace:!0,scope:{articleId:"=?"},template:t("Web"===o.AppType?715:716),link:function(e,t,n){console.log("dang quan tam"),e.articles=[{},{},{},{},{},{}],n.article&&(n="".concat(o.WebApi,"/Article/GetDangQuanTam/").concat(n.article,"/dang-quan-tam"),i.get(n).then(function(n){n=n.data;console.log(n),n.forEach(function(n){n.imagePath="".concat(o.ImageDomain,"/zoom/480_320/").concat(n.imagePath)}),e.articles=n,t.ready(function(){})}))}}}])},715:function(n,e){n.exports='<div id=dang-quan-tam class=ng-scope ng-if="articles && articles.length"> <section class="dt-section dt-section--primary dt-section--fit mt-4"> <header class=dt-section__header> <div class="dt-section__title text-uppercase"> Đáng quan tâm </div> </header> <div class=dt-section__body> <ul class="dt-list dt-list--lg"> <li ng-repeat="it in articles"> <div class="news-item news-item--timeline news-item--left2right" ng-class="{\'news-item--large\':$index==4}"> <h3 ng-if="$index==4" class=news-item__title> <a data-utm=Article|Box_DangQuanTam|1 href={{it.localPath}} title={{it.title}}> {{it.title}} </a> </h3> <a data-utm=Article|Box_DangQuanTam|1 class=news-item__avatar href={{it.localPath}} title={{it.title}}> <div class="dt-thumbnail dt-thumbnail--3x2"> <img alt={{it.title}} class="no-img ng-isolate-scope" src={{it.imagePath}}> </div> </a> <div class=news-item__content> <h3 ng-if="$index!=4" class=news-item__title> <a data-utm=Article|Box_DangQuanTam|1 href={{it.localPath}} title={{it.title}}> {{it.title}} </a> </h3> <a data-utm=Article|Box_DangQuanTam|1 class=news-item__sapo title={{it.title}} href={{it.localPath}}>{{it.sapo}}</a> <div class=news-item__meta> <a data-utm=Article|Box_DangQuanTam|1 data-cat-id={{it.category.id}} class=news-item__category title={{it.category.name}} href={{it.category.localPath}}>{{it.category.name}}</a> <span class=news-item__time>{{it.publishDate}}</span> </div> </div> </div> <div class="mb-4 clearfix" ng-if="$index==4" id=xds-153></div> </li> </ul> </div> </section> </div>'},716:function(n,e){n.exports='<section class="dt-section dt-section--gradient" id=dang-quan-tam ng-if="articles && articles.length"> <header class=dt-section__header> <div class=dt-section__title> Đáng quan tâm </div> </header> <div class=dt-section__body> <ul class="dt-list dt-list--normal"> <li class="news-item news-item--left2right" ng-repeat="it in articles"> <div class="news-item news-item--normal"> <a class=news-item__avatar href={{it.localPath}} title={{it.title}}> <div class="dt-thumbnail dt-thumbnail--3x2"> <img alt={{it.title}} src={{it.imagePath}}> </div> </a> </div> <div class=news-item__content> <h3 class=news-item__title> <a href={{it.localPath}} title={{it.title}}>{{it.title}}</a> </h3> </div> <div class=clearfix ng-if="$index==2" id=xds-3062></div> </li> </ul> </div> </section>'}}]);