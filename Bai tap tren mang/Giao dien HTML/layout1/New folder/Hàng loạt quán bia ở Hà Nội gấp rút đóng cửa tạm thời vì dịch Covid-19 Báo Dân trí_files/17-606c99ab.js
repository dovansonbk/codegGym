(window.DanTriManagementSystem=window.DanTriManagementSystem||[]).push([[17],{349:function(t,e,i){"use strict";var n=t.exports=i(353).t(),r=(0,i(351).r)("/common-cdn$1.0.1/src/components/wss-prod/index.marko",function(){return t.exports}),o=i(432),a=i(354),s=i(352),c=i(361);n._=a(function(t,e,i,n,r){r.device&&c(e,r.device,function(){return r},null,null,null,i,"0",[["redirect","handleRedirect",!1]])},{e_:r},o),n.Component=s(o,n._)},432:function(t,e,i){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=i(433),o=r,a=i(437),s=i(64),c=i(50),l=i(132),u=i(440),d=i(133),p=i(131);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,h,f;return e=t,(h=[{key:"onCreate",value:function(){this.state={url:"",device:null,data:[],text:"test",width:0,color:""}}},{key:"onMount",value:function(){var t=this,e=this;if(!location.href.match(/\/chinh\-tri\//i)){var n=(((location.href.split(/\.htm/)||[])[0]||"").match(/\d+$/)||[])[0];if(location.href.match(/\/asset-dtms/i)){var h=l.parse(location.href,!0);n=h.query.aid,e.state.color=h.query.color}else void 0===n&&(n=0);var f=d.stringify({articleId:n,count:p(this.input.el).attr("data-count")}),v=p(".site-menu"),m={cat:p(this.input.el).attr("data-cat"),count:p(this.input.el).attr("data-count"),v:c.get(),font:p(this.input.el).attr("data-font"),aid:n,type:1,script:1};v.length&&(m.color=u(v[0],"background-color"));var w=d.stringify(m);this.state.url="".concat("https://cdnasset.dantri.com.vn/fe/","asset-dtms.html?dtms=wss-prod&").concat(w),this.state.width=p(this.input.el).width(),this.state.device="0"==(p(this.input.el).attr("data-type")||"0")?s.isMobile()?o:r:a,s.fetch("".concat("https://webapi.dantri.com.vn","/Sosanh/GetProductsByArticleId?").concat(f)).then(function(t){var i=t.map(function(t){var e=d.stringify({width:440,height:440});t.imageUrl="".concat(t.imageUrl,"?").concat(e);var i=new l.parse(t.url,!0);return i.query.utm_source="dantri",t.url=i.format(),t.price=s.formatPrice(t.price),t.originalPrice=s.formatPrice(t.originalPrice),t});((i||[]).length||0)>0?e.state.data=i:(console.log("nodata to display"),this.state.device=null)}).catch(function(e){t.state.device=null}),void 0===window.DTMS.render&&(s.isMobile()?(i.e(22).then(i.t.bind(null,445,7)),"0"==(p(this.input.el).attr("data-font")||"")&&i.e(23).then(i.t.bind(null,446,7))):i.e(18).then(i.t.bind(null,447,7)),"1"==(p(this.input.el).attr("data-font")||"")?i.e(20).then(i.t.bind(null,448,7)):i.e(21).then(i.t.bind(null,449,7)))}}},{key:"handleRedirect",value:function(t){this.emit("redirect",t)}}])&&n(e.prototype,h),f&&n(e,f),t}()},433:function(t,e,i){"use strict";var n=t.exports=i(353).t(),r=(0,i(351).r)("/common-cdn$1.0.1/src/components/wss-prod/desktop/index.marko",function(){return t.exports}),o=i(434),a=i(354),s=i(352),c=i(387),l=i(369),u={class:"dt-section dt-section--gradient"},d={class:"dt-section__body"},p={class:"dt-slider dt-slider--product swiper-container "},h={class:"swiper-wrapper",style:"transition-duration: 0ms; transform: translate3d(0px, 0px, 0px);"},f={class:"swiper-slide"},v={class:"product-item__avatar"},m={class:"product-item__content"},w={class:"dt-thumbnail dt-thumbnail--1x1"},g={class:"product-item__title"},b={class:"product-item__sale-price"},y={class:"product-item__original-price"},_={class:"product-item__merchant"},x={class:"swiper-button-next"},k={class:"swiper-button-prev"};n._=a(function(t,e,i,n,r){r.show&&(e.be("section",u,"@dth",n),e.e("header",{class:"dt-section__header",style:c([""==r.color?"":"border-top: 2px solid "+r.color+";"])},"0",n,1,1).e("h2",{class:"dt-section__title",style:c({color:r.color})},"1",n,1,1).t("Sản phẩm dành cho bạn"),e.be("div",d,"2",n),e.be("div",p,"@swiper",n),e.be("div",h,"3",n),l(t.data,function(t,r){var o="@sw"+r,a="["+o+"]";e.e("div",f,o,n,1).e("a",{href:"javascript:void(0)",title:t.name,class:"product-item product-item--bordered"},"4"+a,n,2,0,{onclick:i.d("click","redirect",!1,[t.url])}).e("div",v,"5"+a,n,1).e("div",w,"6"+a,n,1).e("img",{src:t.imageUrl,alt:""},"7"+a,n,0).e("div",m,"8"+a,n,4).e("h3",g,"9"+a,n,1).t(t.name,n).e("div",b,"10"+a,n,2).t(t.price,n).t(" đ").e("div",y,"11"+a,n,2).t(t.originalPrice,n).t(" đ").e("div",_,"12"+a,n,1).t(t.merchant,n)}),e.ee(),r.showPaging&&(e.e("div",x,"@swiper-next",n,1,0,{onclick:i.d("click","next",!1)}).t(" "),e.e("div",k,"@swiper-prev",n,0,0,{onclick:i.d("click","prev",!1)})),e.ee(),e.ee(),e.ee())},{e_:r},o),n.Component=s(o,n._)},434:function(t,e,i){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=i(435);i(436);var o=i(64),a=i(132);i(131);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,s,c;return e=t,(s=[{key:"onCreate",value:function(){this.state={showPaging:!1,swiper:null,show:!0,color:""}}},{key:"onMount",value:function(){var t=this,e=this.getEl("swiper"),n=document.referrer||"";if(void 0!==t.input.color){var s=t.input.color;t.state.color=s}if(""!=n)try{var c=a.parse(n);(c.hostname||c.host).match(/^amp/i)&&c.href.match(/\/(xa\-hoi|chinh\-tri)\//i)&&(this.state.show=!1)}catch(t){}t.input.width<=460&&!o.isMobile()&&(t.state.showPaging=!0),function n(){var a=t.getEl("sw"+(t.input.data.length-1)),s=t.getEl("swiper-next"),c=t.getEl("swiper-prev");if(void 0!==a){if(t.state.showPaging&&(void 0===s||void 0===c))return void setTimeout(function(){n()},100);!function(){var n={direction:"horizontal",slidesPerView:"auto"};o.isMobile()||(n.simulateTouch=!1,t.input.width<=460&&(i.e(19).then(i.t.bind(null,450,7)),n.pagination={nextEl:t.getEl("swiper-next"),prevEl:t.getEl("swiper-prev")}));var a=new r(e,n);a.init(),t.state.swiper=a}()}else setTimeout(function(){n()},100)}()}},{key:"next",value:function(){this.state.swiper.isEnd||this.state.swiper.slideNext()}},{key:"prev",value:function(){this.state.swiper.isBeginning||this.state.swiper.slidePrev()}},{key:"redirect",value:function(t){this.emit("redirect",t)}}])&&n(e.prototype,s),c&&n(e,c),t}()},437:function(t,e,i){"use strict";var n=t.exports=i(353).t(),r=(0,i(351).r)("/common-cdn$1.0.1/src/components/wss-prod/iframe/index.marko",function(){return t.exports}),o=i(438),a=i(354),s=i(352);n._=a(function(t,e,i,n,r){e.e("iframe",{src:t.url,frameborder:"0",style:"width:100%;height:100%"},"@iframe",n,0)},{e_:r},o),n.Component=s(o,n._)},438:function(t,e,i){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=i(439);i(131);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,o;return e=t,(i=[{key:"onMount",value:function(){var t=this;!function e(){var i=t.getEl("iframe");void 0===i?setTimeout(function(){e()},200):r({checkOrigin:!1,warningTimeout:0},i)}()}}])&&n(e.prototype,i),o&&n(e,o),t}()}}]);